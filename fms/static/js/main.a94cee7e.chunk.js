(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,a){},117:function(e,t){e.exports="data:image/jpeg;base64,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"},125:function(e){e.exports=[{menuOptionId:"mnuDashaboard",menuOptionTitle:"Dashboard",menuDropdown:[],path:"/dashboard",privil:"Dashboard"},{menuOptionId:"mnuMasters",menuOptionTitle:"Masters",menuDropdown:[{ddItemId:"mnuMastCustCare",ddItemTitle:"Customer Care Master",path:"/mastcustcare",privil:"MastHDD"},{ddItemId:"mnuMastInvetory",ddItemTitle:"Inventory Master",path:"/mastinvdepend",privil:"MastInvD"},{ddItemId:"mnuMastUsersAdmin",ddItemTitle:"Users Administration",path:"/mastusersadmin",privil:"MastUAdmin"},{ddItemId:"mnuMastClientUsersAdmin",ddItemTitle:"Client Users Administration",path:"/mastclientusersadmin",privil:"MastCUAdmin"},{ddItemId:"mnuMastProjServDef",ddItemTitle:"Services Definitions",path:"/projservdef",privil:"MastSProf"}],path:"",privil:"Masters"},{menuOptionId:"mnuInventory",menuOptionTitle:"Assets",menuDropdown:[{ddItemId:"mnuInvClientsAssets",ddItemTitle:"Clients and Assets",path:"/invclientsassets",privil:"AssetsClients"},{ddItemId:"mnuProjContDef",ddItemTitle:"Contract Definition",path:"/projcontdef",privil:"AssetsContracts"}],path:"",isToggleOn:!1,privil:"Assets"},{menuOptionId:"mnuFinance",menuOptionTitle:"Financials",menuDropdown:[{ddItemId:"mnuFinSOA",ddItemTitle:"Clients Statements of Accounts",path:"/fincsoa",privil:"FinClientSOA"}],path:"",isToggleOn:!1,privil:"Financials"},{menuOptionId:"mnuMaintenance",menuOptionTitle:"Maintenance",menuDropdown:[{ddItemId:"mnuMainJobPlanner",ddItemTitle:"Job Planner",path:"/mainjobplanner",privil:"MaintenanceJP"},{ddItemId:"mnuMainJobCards",ddItemTitle:"Job Cards",path:"/mainjobcards",privil:"MaintenanceJC"},{ddItemId:"mnuMainPoolReadings",ddItemTitle:"Pool Readings",path:"/mainpoolreadings",privil:"MaintenanceJC"}],path:"",isToggleOn:!1,privil:"Maintenance"},{menuOptionId:"mnuCustomerCare",menuOptionTitle:"Customer Care",menuDropdown:[{ddItemId:"mnuCCareTickets",ddItemTitle:"Tickets",path:"/ccaretickets",privil:"CustCareTkt"}],path:"",isToggleOn:!1,privil:"CustCare"},{menuOptionId:"mnuReports",menuOptionTitle:"Reports",menuDropdown:[],path:"/reports",isToggleOn:!1,privil:"Reports"},{menuOptionId:"mnuCRM",menuOptionTitle:"Website CRM",menuDropdown:[{ddItemId:"mnuCRMUploadAttach",ddItemTitle:"Upload Attachments",path:"/crmuploadattach",privil:"CRMUploadAttach"}],path:"",isToggleOn:!1,privil:"CustCare"},{menuOptionId:"mnuSignout",menuOptionTitle:"Sign-out",menuDropdown:[],path:"/",isToggleOn:!1,privil:"All"}]},127:function(e,t,a){e.exports=a(242)},132:function(e,t,a){},134:function(e,t,a){},15:function(e,t,a){e.exports=a.p+"static/media/processing.a6e3d85f.gif"},174:function(e,t,a){},194:function(e,t){e.exports="data:image/png;base64,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"},195:function(e){e.exports=[{Name:"Masters",Reports:[]},{Name:"Assets",Reports:[]},{Name:"Financials",Reports:[{Report:"Client Statement of Account"}]},{Name:"Maintenance",Reports:[{Report:"Job Cards List",Form:"jclForm"},{Report:"Job Card by Number"},{Report:"Job Card by Date"},{Report:"Job Cards Statistics Summary",Form:"jcssForm"}]},{Name:"Customer Care",Reports:[{Report:"All Open Tickets"},{Report:"Tickets Contract-wise",Form:"tcontForm"},{Report:"Tickets by Date"},{Report:"Ticket by Number"},{Report:"Ticket by Month",Form:"tbmForm"},{Report:"Tickets Statistics Summary",Form:"tssForm"}]}]},234:function(e,t,a){},239:function(e,t,a){},242:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(28),o=a.n(r),i=(a(132),a(1)),l=a(6),c=a(5),d=a(4),u=a(7),h=a(8),m=(a(134),a(136),a(249)),p=a(247),g=a(117),f=a.n(g),b=function(e){e.brandName;return n.a.createElement(m.a.Brand,{style:{paddingLeft:0}},n.a.createElement("a",{href:"/",style:{width:"100%"}},n.a.createElement("img",{src:f.a,style:{margin:"-0.5em"},alt:"Experts Service Management",height:"200%"})))},v=a(244),E=a(251),C=a(246),O=a(245),S=(a(174),function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={subDir:"/fms"},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.menuitem;return 0===t.menuDropdown.length?n.a.createElement(v.a,{eventKey:t.menuOptionId},n.a.createElement(O.a,{to:this.state.subDir+t.path},n.a.createElement("button",{type:"text",className:"myNavItem"},t.menuOptionTitle))):n.a.createElement(E.a,{eventKey:t.menuOptionId,title:t.menuOptionTitle,id:"basic-nav-dropdown"},t.menuDropdown.map(function(t){return n.a.createElement(C.a,{key:t.ddItemId,eventKey:t.ddItemId,style:{padding:"0",margin:"0"}},n.a.createElement(O.a,{to:e.state.subDir+t.path,className:"myNavButton"},n.a.createElement("button",{className:"myNavInnerButton"},t.ddItemTitle)))}))}}]),t}(s.Component)),j=a(125),y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={uprofile:{}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(m.a,{collapseOnSelect:!0},n.a.createElement(m.a.Header,null,n.a.createElement(b,{brandName:"Experts Services Management"})),n.a.createElement(m.a.Toggle,null),n.a.createElement(m.a.Collapse,null,n.a.createElement(p.a,null,this.props.menuBarVisible?j.map(function(e){return n.a.createElement(S,{key:e.menuOptionId,menuitem:e})}):"")))}}]),t}(s.Component),w=(s.Component,y),N=a(253),P=a(254),R=function(e){var t={paddingTop:"2vh",paddingBottom:"2vh",textAlign:"center",fontSize:"4vh",color:e.color,fontWeight:"bold",height:"9vh",backgroundColor:e.bgColor,textShadow:"2px 2px lightgray"},a=e.title;return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12",style:t},a))},A=function(e){var t={paddingBottom:"2vh",textAlign:"center",fontSize:"3vh",color:e.color,fontWeight:"bold",height:"8vh",backgroundColor:e.bgColor,textShadow:"2px 2px lightgray"},a=e.title;return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12",style:t},a))},D=a(40),T=a(3),k=a(10),B=a(15),x=a.n(B),F=a(9),I=a.n(F),L=a(14),V=a(43),W=a.n(V),M=(a(113),a(114),{apiKey:"AIzaSyB-9sI2zff2kHF_V6fGpriD3FSTGb9AxL0",authDomain:"airmechcafm-training.firebaseapp.com",databaseURL:"https://airmechcafm-training.firebaseio.com",projectId:"airmechcafm-training",storageBucket:"airmechcafm-training.appspot.com",messagingSenderId:"623690321802"});W.a.apps.length||W.a.initializeApp(M);W.a.auth();Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a};var H=function(){var e=Object(L.a)(I.a.mark(function e(){var t,a,s,n,r,o,l,c,d;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a="",s="","",n="",r=W.a.firestore(),o={timestampsInSnapshots:!0},r.settings(o),l=r.collection("HelpDesk"),c=[],d={},e.abrupt("return",l.get().then(function(e){if(e.docs.length>0){e.forEach(function(e){c.push(Object(i.a)({},e.data(),{TicketNum:e.id}))});var r=c.filter(function(e){return"Open"===e.TicketStatus}),o=c.filter(function(e){return"Closed"===e.TicketStatus}),l=c.filter(function(e){return"In Progress"===e.TicketStatus});d.Open=r.length,d.Closed=o.length,d.InProgress=l.length,t="Ok",a=d}else t="No",a={},n="Could not fetch statistics. Returning empty list.";return{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a={},n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}));case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),U=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={uprofile:{},ticketsStatistics:{},showProcess:!1},a.columns=[{type:"string",id:"Service"},{type:"string",id:"Title"},{type:"date",id:"Start"},{type:"date",id:"End"}],a.rows=[["Washington",new Date(1789,3,30),new Date(1795,2,4)],["Washington",new Date(1797,2,15),new Date(1798,2,4)],["Badih",new Date(1791,3,30),new Date(1794,1,4)],["Badih",new Date(1794,8,15),new Date(1798,2,4)]],a.componentDidMount=function(){a.setState({showProcess:!0});var e={Open:0,Closed:0,InProgress:0};H().then(function(t){t.Success?(e=Object(i.a)({},t.Result),a.setState({ticketsStatistics:e})):a.setState({ticketsStatistics:e})}).catch(function(t){console.log(t),a.setState({ticketsStatistics:e})})};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{title:"Dashboard",bgColor:"white",color:"gray"}),n.a.createElement("div",{className:"row",style:q},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{className:"row",style:{padding:"0",margin:"0"}},n.a.createElement("div",{className:"col-md-4",style:G},n.a.createElement(D.a,{chartType:"PieChart",data:[["Status","Count"],["Open",this.state.ticketsStatistics.Open],["In Progress",this.state.ticketsStatistics.InProgress],["Closed",this.state.ticketsStatistics.Closed]],width:"100%",height:"300px",loader:n.a.createElement("div",null,"Loading Chart"),options:{title:"Customer-care Tickets Statistics",is3D:!0,legend:"none"}})),n.a.createElement("div",{className:"col-md-4",style:J},n.a.createElement(D.a,{chartType:"LineChart",data:[["Revenue","Month"],["Jan '19",15e3],["Feb '19",10350],["Mar '19",9489],["Apr '19",11225],["May '19",20200],["Jun '19",1e4],["Jul '19",5200],["Aug '19",2500],["Sep '19",3500],["Oct '19",8e3],["Nov '19",9e3],["Dec '19",5352]],width:"100%",height:"300px",loader:n.a.createElement("div",null,"Loading Chart"),options:{title:"Revenue during 2019",vAxis:{title:"Revenue (OMR)"},hAxis:{title:"Month"},is3D:!0,legend:"none"}})),n.a.createElement("div",{className:"col-md-4",style:G})))))}}]),t}(s.Component),G={borderStyle:"solid",borderSize:"1px",borderColor:"lightgray",borderRadius:"20px",boxShadow:"5px 5px gray",minHeight:"330px",overflow:"auto",backgroundColor:"white"},J={borderStyle:"solid",borderSize:"1px",borderColor:"lightgray",borderRadius:"20px",boxShadow:"5px 5px gray",minHeight:"330px",overflow:"auto",paddingTop:"10px",backgroundColor:"white"},q={paddingLeft:"20px",paddingRight:"20px"},z=a(12),X=a(250),Z=a(92),Q=a(16),K=a.n(Q),Y=a(33),_=a.n(Y),$=a(192),ee={width:"100%",paddingBottom:"5px",marginBottom:"5px",borderBottom:"solid thin"},te={width:"100%",paddingBottom:"5px",marginBottom:"5px",marginTop:"5px",borderBottom:"solid thin"},ae=function(e,t,a,s,r){if(e)return n.a.createElement($.a,{className:e[t]?"":"hidden"},n.a.createElement(Z.a,{bsStyle:s,onClick:function(){e[a]()}},n.a.createElement(k.a,{icon:r})))},se=function(e){var t=e.buttonsOptions,a=t.addButton,s=t.editButton,r=t.deleteButton,o=t.refreshButton,i=t.replyButton,l=t.searchButton,c=t.saveButton,d=t.cancelButton,u=t.btnPlaceHolder,h=t.searchPlaceHolder,m=e.onSearchValueChange;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12",style:{paddingTop:"1vh"}},n.a.createElement($.a,{justified:!0},ae(a,"showAdd","onAdd","primary","plus"),ae(s,"showEdit","onEdit","primary","edit"),ae(r,"showDelete","onDelete","danger","trash-alt"),ae(o,"showRefresh","onRefresh","primary","sync-alt"),ae(c,"showSave","onSave","success","save"),ae(d,"showCancel","onCancel","danger","ban"),ae(i,"showReply","onReply","primary","reply"),n.a.createElement($.a,{className:u?"":"hidden"},n.a.createElement(Z.a,{bsStyle:"primary",disabled:"disabled",style:{height:"5vh"}}))))),n.a.createElement("div",{style:ee,className:l.showSearch?"":"hidden"},n.a.createElement("div",{className:"lookupbar"},n.a.createElement("div",null,n.a.createElement("input",{type:"text",id:"txtCatLookup",className:"form-control input-sm",width:"100%",onChange:m})),n.a.createElement("div",null,n.a.createElement("button",{id:"btnCatLookup",className:"btn btn-primary form-control input-sm",width:"50%",onClick:function(){return l.onSearch()}},n.a.createElement(k.a,{icon:"search"}))))),n.a.createElement($.a,{justified:!0,className:h?"":"hidden",style:te},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",disabled:"disabled",style:{height:"5vh"}}))))},ne=(a(47),a(115),function(e){var t=e.name,a=e.label,s=e.value,r=e.onChange,o=e.rows,i=e.flgDisabled,l=e.error;return n.a.createElement("div",{className:"form-group row fieldContainer"},n.a.createElement("label",{htmlFor:t,className:"col-form-label textareaLabel"},a),n.a.createElement("textarea",{value:s,onChange:r,id:t,name:t,rows:o,className:"form-control",disabled:i}),l&&n.a.createElement("div",{className:"alert alert-danger"},l))}),re=function(e){var t=e.name,a=e.label,s=e.value,r=e.onChange,o=e.onInput,i=(e.flgDisabled,e.error);return n.a.createElement("div",{className:"form-group row fieldContainer"},n.a.createElement("label",{htmlFor:t,className:"col-form-label textareaLabel"},a),n.a.createElement("div",{style:{height:"100px",overflow:"scroll"},onInput:function(e){e.currentTarget.name;var t=e.currentTarget.innerText;o(t)},onBlur:function(e){var t=e.currentTarget.innerHTML,a=e.currentTarget.name;r(a,t)},id:t,name:t,className:"form-control",contenteditable:"true",dangerouslySetInnerHTML:{__html:s}}),i&&n.a.createElement("div",{className:"alert alert-danger"},i))},oe=function(e){var t,a=e.name,s=e.label,r=e.values,o=e.onChange,i=e.flgDisabled,l=e.error,c=e.defValue;return t=r?r.map(function(e){return n.a.createElement("option",{key:e.Name,value:e.Name,selected:e.Name===c?"selected":""},e.Name)}):"",n.a.createElement("div",{className:"form-group row fieldContainer"},n.a.createElement("label",{htmlFor:a,className:"col-form-label selectLabel"},s),n.a.createElement("select",{name:a,id:a,disabled:i,className:"form-control",onChange:o},n.a.createElement("option",{value:""}),t),l&&n.a.createElement("div",{className:"alert alert-danger"},l))},ie=function(e){var t=e.name,a=e.type,s=e.label,r=e.value,o=e.onChange,i=e.flgDisabled,l=e.error;return n.a.createElement("div",{className:"form-group row fieldContainer"},n.a.createElement("label",{htmlFor:t,className:"col-form-label inputLabel"},s),n.a.createElement("input",{value:r,onChange:o,id:t,name:t,type:a,checked:"checkbox"==a?r:"",className:"form-control",disabled:i}),l&&n.a.createElement("div",{className:"alert alert-danger"},l))},le=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={fields:{Name:"",Description:""}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.onSubmit,s=e.onCancel,r=e.data,o=e.flags,i=e.errors,l=e.showProcess,c=e.showButtons;return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{style:{marginTop:"10px"}},n.a.createElement(ie,{name:"Name",label:"Category Name:",type:"text",onChange:t,value:r.Name,flgDisabled:o.isAdd?"":"disabled",error:i.Name?i.Name:""}),n.a.createElement(ne,{name:"Description",label:"Category Description:",onChange:t,rows:10,value:r.Description,flgDisabled:o.isAdd||o.isEdit?"":"disabled",error:i.Description?i.Description:""}),n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",className:l?"":"hidden",style:{marginTop:"2vh"}}),n.a.createElement("div",{className:"btn-toolbar btnToobar"+((o.isAdd||o.isEdit)&&c?"":" hidden")},n.a.createElement("div",{className:"btn-group btn-group-justified"},n.a.createElement("button",{type:"button",className:"btn btn-primary",style:{width:"50%"},onClick:function(){return a()}},n.a.createElement(k.a,{icon:"save"})),n.a.createElement("button",{type:"button",className:"btn btn-danger",style:{width:"50%"},onClick:function(){return s()}},n.a.createElement(k.a,{icon:"ban"}))))))}}]),t}(s.Component),ce=W.a.firestore();ce.settings({timestampsInSnapshots:!0});var de=function(e){try{var t="N",a="",s="",n="",r="",o="",i=ce.collection("Inventory").doc("Dependencies").collection("Categories")}catch(l){console.log(l)}return i.doc(e.Name).get().then(function(l){return l.exists?"Y"==t.toUpperCase()?i.doc(e.Name).set(e):{Success:a="No",Result:s={},FailReason:o="Category already exists. No Overwrite.",Error:n,Warning:r}:i.doc(e.Name).set(e)}).then(function(e){return{Success:a="Ok",Result:s={},FailReason:o,Error:n,Warning:r}}).catch(function(e){return a="No",s={},o="Error",n=e.message,{Success:a,Result:s,FailReason:o,Error:n,Warning:r}})},ue=function(e){var t=e.Name,a="",s="",n="",r="",o=ce.collection("Inventory").doc("Dependencies").collection("Categories");return o.doc(t).get().then(function(i){return i.exists?o.doc(t).update(e):{Success:a="No",Result:s={},FailReason:r="Category do not exist.",Error:n,Warning:""}}).then(function(e){return{Success:a="Ok",Result:s={},FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s={},r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}})},he=function(e){var t="",a="",s="",n="";return ce.collection("Inventory").doc("Dependencies").collection("Categories").doc(e).get().then(function(e){return e.exists?(t="Ok",a=e.data(),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}):{Success:t="No",Result:a={},FailReason:n="Category do not exist.",Error:s,Warning:""}}).catch(function(e){return t="No",a={},n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}})},me=function(){var e="",t="",a="",s="";return ce.collection("Inventory").doc("Dependencies").collection("Categories").get().then(function(n){if(0==n.docs.length)e="No",t=[],s="There are no categories found. Returning Empty List.";else{var r=[];n.forEach(function(e){r.push(e.data())}),e="Ok",t=r}return{Success:e,Result:t,FailReason:s,Error:a,Warning:""}}).catch(function(n){return e="No",t=[],s="Error",a=n.message,{Success:e,Result:t,FailReason:s,Error:a,Warning:""}})},pe=function(e){var t="",a="",s="",n="",r=ce.collection("Inventory").doc("Dependencies").collection("EquipTemplates");return r.doc(e.Name).get().then(function(o){return o.exists?{Success:t="No",Result:a="{}",FailReason:n="Equipment Template already exists. No Overwrite.",Error:s,Warning:""}:r.doc(e.Name).set(e)}).then(function(e){return{Success:t="Ok",Result:a="{}",FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a="{}",n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}})},ge=function(e){var t="",a="",s="",n="",r=ce.collection("Inventory").doc("Dependencies").collection("EquipTemplates");return r.doc(e.Name).get().then(function(o){return o.exists?r.doc(e.Name).update(e):{Success:t="No",Result:a="{}",FailReason:n="Equipment do not exist.",Error:s,Warning:""}}).then(function(e){return{Success:t="Ok",Result:a="{}",FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a="{}",n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}})},fe=function(e){var t=e,a="",s="",n="",r="";return ce.collection("Inventory").doc("Dependencies").collection("EquipTemplates").doc(t).get().then(function(e){return e.exists?(a="Ok",s=e.data(),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}):{Success:a="No",Result:s="{}",FailReason:r="Equipment do not exist.",Error:n,Warning:""}}).catch(function(e){return a="No",s="{}",r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}})},be=function(){var e="",t="",a="",s="";return ce.collection("Inventory").doc("Dependencies").collection("EquipTemplates").get().then(function(n){if(0==n.docs.length)e="No",t=[],s="There are no Equipments found. Returning Empty List.";else{var r=[];n.forEach(function(e){r.push(e.data())}),e="Ok",t=r}return{Success:e,Result:t,FailReason:s,Error:a,Warning:""}}).catch(function(n){return e="No",t=[],s="Error",a=n.message,{Success:e,Result:t,FailReason:s,Error:a,Warning:""}})},ve=function(e){var t="",a="",s="",n="",r=ce.collection("Inventory").doc("Dependencies").collection("SPTemplates");return r.doc(e.Name).get().then(function(o){return o.exists?{Success:t="No",Result:a="{}",FailReason:n="Spare Part already exists. No Overwrite.",Error:s,Warning:""}:r.doc(e.Name).set(e)}).then(function(e){return{Success:t="Ok",Result:a="{}",FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a="{}",n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}})},Ee=function(e){var t="",a="",s="",n="",r=ce.collection("Inventory").doc("Dependencies").collection("SPTemplates");return r.doc(e.Name).get().then(function(o){return o.exists?r.doc(e.Name).update(e):{Success:t="No",Result:a="{}",FailReason:n="Spare Part do not exist.",Error:s,Warning:""}}).then(function(e){return{Success:t="Ok",Result:a="{}",FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a="{}",n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}})},Ce=function(e){var t=e,a="",s="",n="",r="";return ce.collection("Inventory").doc("Dependencies").collection("SPTemplates").doc(t).get().then(function(e){return e.exists?(a="Ok",s=e.data(),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}):{Success:a="No",Result:s="{}",FailReason:r="Spare Part do not exist.",Error:n,Warning:""}}).catch(function(e){return a="No",s="{}",r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}})},Oe=function(){var e="",t="",a="",s="";return ce.collection("Inventory").doc("Dependencies").collection("SPTemplates").get().then(function(n){if(0==n.docs.length)e="No",t=[],s="There are no Spare Parts found. Returning Empty List.";else{var r=[];n.forEach(function(e){r.push(e.data())}),e="Ok",t=r}return{Success:e,Result:t,FailReason:s,Error:a,Warning:""}}).catch(function(n){return e="No",t=[],s="Error",a=n.message,{Success:e,Result:t,FailReason:s,Error:a,Warning:""}})},Se=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).getClassName=function(e,t,a,s){return t?e&&e===a?"btn btn-danger btn-sm":"Water"===s?"btn btn-primary btn-sm":"btn btn-warning btn-sm":e&&e===a?"btn btn-primary btn-sm":"btn btn-success btn-sm"},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props,s=a.data,r=a.name,o=a.label,i=a.onClick,l=a.showProcess,c=a.showList,d=a.selected,u=a.mtype;return e=s?s.map(function(e){return n.a.createElement("tr",{key:e[r]},n.a.createElement("td",null,n.a.createElement("button",{className:t.getClassName(d,u,e[r],u?e.Type:null),key:e[r],style:{width:"100%"},onClick:function(){return i(e[r])}},e[o])))}):"",n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",className:l?"":"hidden",style:{marginTop:"5vh"}}),n.a.createElement("table",{width:"100%",className:c?"":"hidden"},n.a.createElement("tbody",null,e)))}}]),t}(s.Component),je=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={categories:[],result:{},buttonsOptions:{addButton:{showAdd:!0,onAdd:function(){return a.handleAdd()}},editButton:{showEdit:!1,onEdit:function(){return a.handleEdit()}},deleteButton:{showDelete:!1,onDelete:null},refreshButton:{showRefresh:!0,onRefresh:function(){return a.handleRefresh()}},searchButton:{showSearch:!0,onSearch:null}},listProcess:!0,listVisible:!1,formProcess:!1,formVisible:!0,category:{Name:"",Description:""},flags:{isAdd:!1,isEdit:!1},showmodal:!1,errors:{}},a.schema={Name:K.a.string().required().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("Category Name"),Description:K.a.string().regex(/^[a-zA-Z0-9\s\_\-\.\&\+\:\,]+$/,{name:"No Special Chars"}).label("Category Description")},a.handleCloseModal=function(){a.setState({showmodal:!1})},a.handleListUpdated=function(){a.setState({listProcess:!1,listVisible:!0})},a.handleSubmit=function(){var e=a.validateFields();a.setState({errors:e||{}});if(a.setState({formProcess:!0,formVisible:!1}),e){return a.setState({formProcess:!1,formVisible:!0}),void T.toast.warn("Some data fields are invalid.\nPlease recheck entered fields!",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}a.state.flags.isAdd?de(a.state.category).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;var s=Object(z.a)(a.state.categories);s.push(a.state.category),s=_.a.orderBy(s,["Name"]);a.setState({result:e,flags:t,categories:s,formProcess:!1,formVisible:!0}),T.toast.success("New Inventory Category saved successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}else{var n=Object(i.a)({},a.state.flags);n.isAdd=!1,n.isEdit=!1;a.setState({category:{},flags:n,result:e,formProcess:!1,formVisible:!0}),T.toast.warn("New Inventory Category was not saved successfully!\n"+e.FailReason,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}}).catch(function(e){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,category:{},flags:t,formProcess:!1,formVisible:!0}),T.toast.error("Error occured:\n"+e.message,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}):a.state.flags.isEdit&&ue(a.state.category).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,flags:t,formProcess:!1,formVisible:!0}),T.toast.success("Inventory Category updated successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}else{var s=Object(i.a)({},a.state.flags);s.isAdd=!1,s.isEdit=!1;a.setState({category:{},flags:s,result:e,formProcess:!1,formVisible:!0}),T.toast.warn("Inventory Category was not updated successfully!\n"+e.FailReason,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}}).catch(function(e){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,category:{},flags:t,formProcess:!1,formVisible:!0}),T.toast.error("Error occured:\n"+e.message,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})},a.handleAdd=function(){var e=Object(i.a)({},a.state.category),t=Object(i.a)({},a.state.flags),s=Object(i.a)({},a.state.buttonsOptions);e.Name="",e.Description="",t.isAdd=!0,t.isEdit=!1,s.showEdit=!1,a.setState({category:e,flags:t,buttonsOptions:s})},a.handleEdit=function(){var e=Object(i.a)({},a.state.flags);e.isEdit=!0,e.isAdd=!1,a.setState({flags:e})},a.handleCancel=function(){var e=Object(i.a)({},a.state.category);e.Name="",e.Description="",a.setState({flags:{isAdd:!1,isEdit:!1},errors:{},category:e})},a.handleChange=function(e){var t=e.currentTarget,s=t.name,n=t.value,r=Object(i.a)({},a.state.category);r[s]=n,a.setState({category:r})},a.handleCategClick=function(e){he(e).then(function(e){if("Ok"===e.Success){var t={};t.Name=e.Result.Name,t.Description=e.Result.Description;var s=Object(i.a)({},a.state.buttonsOptions);s.editButton.showEdit=!0,a.setState({result:e}),a.setState({category:t,buttonsOptions:s})}else{a.setState({category:{}})}}).catch(function(e){a.setState({result:e}),a.setState({category:{}})})},a.handleRefresh=function(){var e=me();a.setState({listProcess:!0}),a.setState({listVisible:!1}),e.then(function(e){a.setState({categories:e.Result});var t=Object(i.a)({},a.state.category),s=Object(i.a)({},a.state.buttonsOptions);return t.Description="",t.Name="",s.addButton.showAdd=!0,s.editButton.showEdit=!1,s.refreshButton.showRefresh=!0,s.deleteButton.showDelete=!1,a.setState({listProcess:!1,listVisible:!0,category:t,buttonsOptions:s}),a.setState({result:e}),e}).catch(function(e){var t=Object(i.a)({},a.state.category);return t.Description="",t.Name="",a.setState({listProcess:!1,listVisible:!0,category:t,categories:[],result:e,showmodal:!0}),e})},a.validateFields=function(){var e={},t=K.a.validate(a.state.category,a.schema,{abortEarly:!1});if(console.log(t),!t.error)return null;var s=!0,n=!1,r=void 0;try{for(var o,i=t.error.details[Symbol.iterator]();!(s=(o=i.next()).done);s=!0){var l=o.value;e[l.path[0]]=l.message}}catch(c){n=!0,r=c}finally{try{s||null==i.return||i.return()}finally{if(n)throw r}}return 0===Object.keys(e).length?null:e},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(L.a)(I.a.mark(function e(){var t,a=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=me(),this.setState({listProcess:!0}),this.setState({listVisible:!1}),t.then(function(e){return a.setState({categories:e.Result}),a.setState({result:e}),a.setState({listProcess:!1}),a.setState({listVisible:!0}),e}).catch(function(e){return a.setState({categories:[]}),a.setState({result:e}),a.setState({listProcess:!1}),a.setState({listVisible:!0}),a.setState({showmodal:!0}),e});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"container",style:{marginTop:"20px"}},n.a.createElement("div",{className:"col-md-3 leftCol"},n.a.createElement(se,{buttonsOptions:this.state.buttonsOptions}),n.a.createElement(Se,{data:this.state.categories,name:"Name",label:"Name",value:"Description",showProcess:this.state.listProcess,showList:this.state.listVisible,onClick:this.handleCategClick})),n.a.createElement("div",{className:"col-md-9 rightCol"},n.a.createElement(le,{onChange:this.handleChange,onSubmit:this.handleSubmit,onCancel:this.handleCancel,data:this.state.category,flags:this.state.flags,errors:this.state.errors,showProcess:this.state.formProcess,showButtons:this.state.formVisible})),n.a.createElement(X.a,{show:this.state.showmodal,onHide:this.handleCloseModal},n.a.createElement(X.a.Header,{closeButton:!0},n.a.createElement(X.a.Title,null,"Modal heading")),n.a.createElement(X.a.Body,null,n.a.createElement("pre",null,this.state.result.Error)),n.a.createElement(X.a.Footer,null,n.a.createElement(Z.a,{onClick:this.handleCloseModal},"Close"))),n.a.createElement(T.ToastContainer,null))}}]),t}(s.Component),ye=(a(234),function(e){return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12 msgDiv"},n.a.createElement("i",null,e.message)))}),we=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={fields:{Name:"",Description:""}},a.EquipForm=function(e){var t=e.onChange,a=e.data,s=e.flags,r=e.errors,o=e.categories;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ie,{name:"Name",label:"Template Name:",type:"text",onChange:t,value:a.Name,flgDisabled:s.isAdd?"":"disabled",error:r.Name?r.Name:""}),n.a.createElement(ne,{name:"Description",label:"Template Description:",onChange:t,rows:2,value:a.Description,flgDisabled:s.isAdd||s.isEdit?"":"disabled",error:r.Description?r.Description:""}),n.a.createElement(ie,{name:"SerialNum",label:"Serial Number:",type:"text",onChange:t,value:a.SerialNum,flgDisabled:s.isAdd||s.isEdit?"":"disabled",error:r.SerialNum?r.SerialNum:""}),n.a.createElement(ie,{name:"PurchDate",label:"Purchace Date:",type:"date",onChange:t,value:a.PurchDate,flgDisabled:s.isAdd||s.isEdit?"":"disabled",error:r.PurchDate?r.PurchDate:""}),n.a.createElement(ie,{name:"PurchVal",label:"Purchace Value:",type:"text",onChange:t,value:a.PurchVal,flgDisabled:s.isAdd||s.isEdit?"":"disabled",error:r.PurchVal?r.PurchVal:""}),n.a.createElement(oe,{name:"Categ1",label:"Category 2:",type:"text",onChange:t,values:o,defValue:a.Categ1,flgDisabled:s.isAdd||s.isEdit?"":"disabled",error:r.Categ1?r.Categ1:""}),n.a.createElement(oe,{name:"Categ2",label:"Category 2:",type:"text",onChange:t,values:o,defValue:a.Categ2,flgDisabled:s.isAdd||s.isEdit?"":"disabled",error:r.Categ2?r.Categ2:""}))},a.SPartForm=function(e){var t=e.onChange,a=e.data,s=e.flags,r=e.errors,o=e.categories;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ie,{name:"Name",label:"Template Name:",type:"text",onChange:t,value:a.Name,flgDisabled:s.isAdd?"":"disabled",error:r.Name?r.Name:""}),n.a.createElement(ne,{name:"Description",label:"Template Description:",onChange:t,rows:2,value:a.Description,flgDisabled:s.isAdd||s.isEdit?"":"disabled",error:r.Description?r.Description:""}),n.a.createElement(ie,{name:"UPCNum",label:"UPC Number:",type:"text",onChange:t,value:a.UPCNum,flgDisabled:s.isAdd||s.isEdit?"":"disabled",error:r.UPCNum?r.UPCNum:""}),n.a.createElement(ie,{name:"Quantity",label:"Quantity:",type:"text",onChange:t,value:a.Quantity,flgDisabled:s.isAdd||s.isEdit?"":"disabled",error:r.Quantity?r.Quantity:""}),n.a.createElement(oe,{name:"Categ1",label:"Category 2:",type:"text",onChange:t,values:o,defValue:a.Categ1,flgDisabled:s.isAdd||s.isEdit?"":"disabled",error:r.Categ1?r.Categ1:""}),n.a.createElement(oe,{name:"Categ2",label:"Category 2:",type:"text",onChange:t,values:o,defValue:a.Categ2,flgDisabled:s.isAdd||s.isEdit?"":"disabled",error:r.Categ2?r.Categ2:""}))},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onSubmit,a=e.onCancel,s=(e.data,e.flags),r=e.showProcess,o=e.showButtons,i=e.selType;return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{style:{marginTop:"10px"}},"Equipment"===i?n.a.createElement(this.EquipForm,this.props):"Spare Part"===i?n.a.createElement(this.SPartForm,this.props):"",n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",className:r?"":"hidden",style:{marginTop:"2vh"}}),n.a.createElement("div",{className:"btn-toolbar btnToobar"+((s.isAdd||s.isEdit)&&o?"":" hidden")},n.a.createElement("div",{className:"btn-group btn-group-justified"},n.a.createElement("button",{type:"button",className:"btn btn-primary",style:{width:"50%"},onClick:function(){return t()}},n.a.createElement(k.a,{icon:"save"})),n.a.createElement("button",{type:"button",className:"btn btn-danger",style:{width:"50%"},onClick:function(){return a()}},n.a.createElement(k.a,{icon:"ban"}))))))}}]),t}(s.Component),Ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={templates:[],equipTemp:{Name:"",Description:"",SerialNum:"",Categ1:"",Categ2:"",PurchDate:new Date,PurchVal:0},template:{},spartTemp:{Name:"",Description:"",SerialNum:"",Categ1:"",Categ2:"",Quantity:0,UPCNum:""},selectedType:"",categories:[],result:{},types:[{tempType:"Equipment"},{tempType:"Spare Part"}],typesButtonsOptions:{addButton:{showAdd:!1,onAdd:null},editButton:{showEdit:!1,onEdit:null},deleteButton:{showDelete:!1,onDelete:null},refreshButton:{showRefresh:!1,onRefresh:null},searchButton:{showSearch:!1,onSearch:null},btnPlaceHolder:!0,searchPlaceHolder:!0},tempButtonsOptions:{addButton:{showAdd:!0,onAdd:function(){return a.handleAdd()}},editButton:{showEdit:!1,onEdit:function(){return a.handleEdit()}},deleteButton:{showDelete:!1,onDelete:null},refreshButton:{showRefresh:!0,onRefresh:function(){return a.handleRefresh()}},searchButton:{showSearch:!0,onSearch:null},btnPlaceHolder:!1,searchPlaceHolder:!1},listProcess:!1,listVisible:!0,formProcess:!1,formVisible:!0,flags:{isAdd:!1,isEdit:!1},showmodal:!1,errors:{},formDivHeight:""},a.schema={equipTemp:{Description:K.a.string().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("Category Description"),SerialNum:K.a.string().regex(/^$|^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("Serial Number").valid(""),Categ1:K.a.string().label("Category 1"),Categ2:K.a.string().label("Category 2").valid(""),Name:K.a.string().required().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("Category Name"),PurchDate:K.a.date().required().label("Purchase Date"),PurchVal:K.a.number().min(0).precision(3).label("Purchase Value")},spartTemp:{Name:K.a.string().required().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("Category Name"),Description:K.a.string().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("Category Description"),Categ1:K.a.string().label("Category 1"),Categ2:K.a.string().label("Category 2").valid(""),Quantity:K.a.number().integer().min(0).label("Items Quantity"),UPCNum:K.a.string().label("Unique Product Code").valid("")}},a.handleTypeClick=function(e){var t=e;a.setState({selectedType:t,listProcess:!0,listVisible:!1}),"Equipment"===t?be().then(function(e){var t=Object(i.a)({},a.state.equipTemp);a.setState({templates:e.Result,result:e,listProcess:!1,listVisible:!0,template:t})}).catch(function(e){a.setState({templates:[],result:e,listProcess:!1,listVisible:!0,showmodal:!0,template:{}})}):Oe().then(function(e){var t=Object(i.a)({},a.state.spartTemp);a.setState({templates:e.Result,result:e,listProcess:!1,listVisible:!0,template:t})}).catch(function(e){a.setState({templates:[],result:e,listProcess:!1,listVisible:!0,showmodal:!0,template:{}})})},a.handleCloseModal=function(){a.setState({showmodal:!1})},a.handleListUpdated=function(){a.setState({listProcess:!1,listVisible:!0})},a.handleSubmit=function(){var e=a.validateFields();a.setState({errors:e||{}});if(a.setState({formProcess:!0,formVisible:!1}),e){return a.setState({formProcess:!1,formVisible:!0}),void T.toast.warn("Some data fields are invalid.\nPlease recheck entered fields!",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}if(a.state.flags.isAdd){var t=a.state,s=t.selectedType,n=t.template;("Equipment"===s?pe(n):ve(n)).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},a.state.flags),s=Object(z.a)(a.state.templates);t.isAdd=!1,t.isEdit=!1,s.push(n);a.setState({result:e,flags:t,templates:s,formProcess:!1,formVisible:!0}),T.toast.success("New Inventory Template saved successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}else{var r=Object(i.a)({},a.state.flags);r.isAdd=!1,r.isEdit=!1;a.setState({template:{},flags:r,result:e,formProcess:!1,formVisible:!0}),T.toast.warn("New Inventory Template was not saved successfully!\n"+e.FailReason,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}}).catch(function(e){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,template:{},flags:t,formProcess:!1,formVisible:!0}),T.toast.error("Error occured:\n"+e.message,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})}else if(a.state.flags.isEdit){var r=a.state,o=r.selectedType,l=r.template;("Equipment"===o?ge(l):Ee(l)).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,flags:t,formProcess:!1,formVisible:!0}),T.toast.success("Inventory Template updated successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}else{var s=Object(i.a)({},a.state.flags);s.isAdd=!1,s.isEdit=!1;a.setState({template:{},flags:s,result:e,formProcess:!1,formVisible:!0}),T.toast.warn("Inventory Template was not updated successfully!\n"+e.FailReason,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}}).catch(function(e){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,template:{},flags:t,formProcess:!1,formVisible:!0}),T.toast.error("Error occured:\n"+e.message,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})}},a.handleAdd=function(){var e="Equipment"===a.state.selectedType?Object(i.a)({},a.state.equipTemp):Object(i.a)({},a.state.spartTemp),t=Object(i.a)({},a.state.flags),s=Object(i.a)({},a.state.tempButtonsOptions),n=new Date;e.PurchDate=n.getFullYear()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"-"+("0"+n.getDate()).slice(-2),console.log("PurchDate: ",e.PurchDate),t.isAdd=!0,t.isEdit=!1,s.showEdit=!1,a.setState({template:e,flags:t,tempButtonsOptions:s})},a.handleEdit=function(){var e=Object(i.a)({},a.state.flags);e.isEdit=!0,e.isAdd=!1,a.setState({flags:e})},a.handleCancel=function(){a.setState({flags:{isAdd:!1,isEdit:!1},errors:{}})},a.handleChange=function(e){var t=e.currentTarget,s=t.name,n=t.value;console.log(s,n);var r=Object(i.a)({},a.state.template);r[s]=n,a.setState({template:r})},a.handleTemplateClick=function(e){"Equipment"===a.state.selectedType?fe(e).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},a.state.template),s=e.Result;t.Name=s.Name,t.Description=s.Description,t.SerialNum=s.SerialNum,t.Categ1=s.Categ1,t.Categ2=s.Categ2,t.PurchDate=s.PurchDate,t.PurchVal=s.PurchVal;var n=Object(i.a)({},a.state.tempButtonsOptions);n.editButton.showEdit=!0,a.setState({result:e}),a.setState({template:t,tempButtonsOptions:n})}else{a.setState({template:{}})}}).catch(function(e){a.setState({result:e}),a.setState({template:{}})}):Ce(e).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},a.state.template),s=e.Result;t.Name=s.Name,t.Description=s.Description,t.SerialNum=s.SerialNum,t.Categ1=s.Categ1,t.Categ2=s.Categ2,t.Quantity=s.Quantity,t.UPCNum=s.UPCNum;var n=Object(i.a)({},a.state.tempButtonsOptions);n.editButton.showEdit=!0,a.setState({result:e}),a.setState({template:t,tempButtonsOptions:n})}else{a.setState({template:{}})}}).catch(function(e){a.setState({result:e}),a.setState({template:{}})})},a.handleRefresh=function(){},a.validateFields=function(){var e=a.state,t=e.template,s=e.selectedType,n=a.schema,r=n.equipTemp,o=n.spartTemp,i={},l=K.a.validate(t,"Equipment"===s?r:o,{abortEarly:!1});if(!l.error)return null;var c=!0,d=!1,u=void 0;try{for(var h,m=l.error.details[Symbol.iterator]();!(c=(h=m.next()).done);c=!0){var p=h.value;i[p.path[0]]=p.message}}catch(g){d=!0,u=g}finally{try{c||null==m.return||m.return()}finally{if(d)throw u}}return 0===Object.keys(i).length?null:i},a.leftColRef=n.a.createRef(),a.leftMiddleRef=n.a.createRef(),a.formColRef=n.a.createRef(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(L.a)(I.a.mark(function e(){var t,a=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=me(),this.setState({listProcess:!0}),this.setState({listVisible:!1}),t.then(function(e){return a.setState({categories:e.Result}),a.setState({result:e}),a.setState({listProcess:!1}),a.setState({listVisible:!0}),e}).catch(function(e){return a.setState({categories:[]}),a.setState({result:e}),a.setState({listProcess:!1}),a.setState({listVisible:!0}),a.setState({showmodal:!0}),e});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"container",style:{marginTop:"20px"}},n.a.createElement("div",{className:"col-md-2 leftColEx",ref:this.leftColRef},n.a.createElement(se,{buttonsOptions:this.state.typesButtonsOptions}),n.a.createElement(Se,{data:this.state.types,name:"tempType",label:"tempType",value:"",showProcess:!1,showList:!0,onClick:this.handleTypeClick})),n.a.createElement("div",{className:"col-md-4 middleColEx",ref:this.middleColRef},n.a.createElement(se,{buttonsOptions:this.state.tempButtonsOptions}),n.a.createElement(Se,{data:this.state.templates,name:"Name",label:"Name",value:"Description",showProcess:this.state.listProcess,showList:this.state.listVisible,onClick:this.handleTemplateClick})),n.a.createElement("div",{className:"col-md-6 rightColEx",ref:this.formColRef},n.a.createElement(we,{onChange:this.handleChange,onSubmit:this.handleSubmit,onCancel:this.handleCancel,data:this.state.template,categories:this.state.categories,flags:this.state.flags,errors:this.state.errors,showProcess:this.state.formProcess,showButtons:this.state.formVisible,selType:this.state.selectedType})),n.a.createElement(X.a,{show:this.state.showmodal,onHide:this.handleCloseModal},n.a.createElement(X.a.Header,{closeButton:!0},n.a.createElement(X.a.Title,null,"Modal heading")),n.a.createElement(X.a.Body,null,n.a.createElement("pre",null,this.state.result.Error)),n.a.createElement(X.a.Footer,null,n.a.createElement(Z.a,{onClick:this.handleCloseModal},"Close"))),n.a.createElement(T.ToastContainer,null))}}]),t}(s.Component),Pe=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={selectedTab:"",uprofile:{},subDir:"/fms"};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,a):(e.history.push(a.state.subDir+"/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleSelect",value:function(e){this.setState({selectedTab:e}),"1"===e?this.props.history.push(this.state.subDir+"/mastinvdepend/invcategories"):"2"===e?this.props.history.push(this.state.subDir+"/mastinvdepend/invtemplates"):"3"===e&&this.props.history.push(this.state.subDir+"/mastinvdepend/invunits")}}]),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{title:"Inventory Master Settings",bgColor:"white",color:"gray"}),n.a.createElement(p.a,{bsStyle:"tabs",activeKey:this.state.selectedTab,onSelect:function(t){return e.handleSelect(t)}},n.a.createElement(v.a,{eventKey:"1"},"Inventory Categories"),n.a.createElement(v.a,{eventKey:"2"},"Items Templates")),n.a.createElement(N.a,null,n.a.createElement(P.a,{path:this.state.subDir+"/mastinvdepend/invcategories",component:je}),n.a.createElement(P.a,{path:this.state.subDir+"/mastinvdepend/invtemplates",component:Ne}),n.a.createElement(P.a,{path:this.state.subDir+"/mastinvdepend",exact:!0,render:function(e){return n.a.createElement(ye,Object.assign({message:"Please, select your option from the above tabs."},e))}})))}}]),t}(s.Component),Re=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={fields:{categname:"",categdesc:""}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.onSubmit,s=e.onCancel,r=e.data,o=e.flags,i=e.errors,l=e.showProcess,c=e.showButtons;return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{style:{marginTop:"10px"}},n.a.createElement(ie,{name:"categname",label:"Category Name:",type:"text",onChange:t,value:r.categname,flgDisabled:o.isAdd?"":"disabled",error:i.categname?i.categname:""}),n.a.createElement(ne,{name:"categdesc",label:"Category Description:",onChange:t,rows:10,value:r.categdesc,flgDisabled:o.isAdd||o.isEdit?"":"disabled",error:i.categdesc?i.categdesc:""}),n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",className:l?"":"hidden",style:{marginTop:"2vh"}}),n.a.createElement("div",{className:"btn-toolbar btnToobar"+((o.isAdd||o.isEdit)&&c?"":" hidden")},n.a.createElement("div",{className:"btn-group btn-group-justified"},n.a.createElement("button",{type:"button",className:"btn btn-primary",style:{width:"50%"},onClick:function(){return a()}},n.a.createElement(k.a,{icon:"save"})),n.a.createElement("button",{type:"button",className:"btn btn-danger",style:{width:"50%"},onClick:function(){return s()}},n.a.createElement(k.a,{icon:"ban"}))))))}}]),t}(s.Component),Ae=function(){var e=Object(L.a)(I.a.mark(function e(){var t,a,s,n,r,o,i,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a="",s="","",n="",r=W.a.firestore(),o={timestampsInSnapshots:!0},r.settings(o),i=r.collection("Dependencies").doc("HelpDesk").collection("Categories"),l=[],(c={}).categname="",c.categdesc="",e.abrupt("return",i.get().then(function(e){return e.docs.length>0?(e.forEach(function(e){l.push(e.data())}),t="Ok",a=l):(t="No",a=[],n="No Categories were found. Returning empty list."),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a=[],n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),De=function(e){var t="",a="",s="",n="",r=W.a.firestore();return r.settings({timestampsInSnapshots:!0}),r.collection("Dependencies").doc("HelpDesk").collection("Categories").doc(e).get().then(function(e){return e.exists?(t="Ok",a=e.data(),n="",s=""):(t="No",a={},n="Requested Category could not be found."),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a={},n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}})},Te=function(e){var t=e.categname,a=e.categdesc,s="",n="",r="",o="",i=W.a.firestore();i.settings({timestampsInSnapshots:!0});var l={categName:t,categDescription:a},c=i.collection("Dependencies").doc("HelpDesk").collection("Categories");return c.doc(t).get().then(function(e){if(e.exists){return{Success:"No",Result:{},FailReason:"Category Already Exists.",Error:"",Warning:""}}return c.doc(t).set(l)}).then(function(e){return{Success:"Ok",Result:{},FailReason:"",Error:"",Warning:""}}).catch(function(e){return s="No",n={},o="Error",r=e.message,{Success:s,Result:n,FailReason:o,Error:r,Warning:""}})},ke=function(e){var t=e.categname,a=e.categdesc,s="",n="",r="",o="",i=W.a.firestore();i.settings({timestampsInSnapshots:!0});var l=i.collection("Dependencies").doc("HelpDesk").collection("Categories");return l.doc(t).get().then(function(e){return e.exists?l.doc(t).update({categDescription:a}):{Success:s="No",Result:n={},FailReason:o="Category was not found. Update Aborted.",Error:r="",Warning:""}}).then(function(e){return{Success:"Ok",Result:{},FailReason:"",Error:"",Warning:""}}).catch(function(e){return s="No",n={},o="Error",r=e.message,{Success:s,Result:n,FailReason:o,Error:r,Warning:""}})},Be=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={categories:[],result:{},buttonsOptions:{addButton:{showAdd:!0,onAdd:function(){return a.handleAdd()}},editButton:{showEdit:!1,onEdit:function(){return a.handleEdit()}},deleteButton:{showDelete:!1,onDelete:null},refreshButton:{showRefresh:!0,onRefresh:function(){return a.handleRefresh()}},searchButton:{showSearch:!0,onSearch:null}},listProcess:!0,listVisible:!1,formProcess:!1,formVisible:!0,category:{categname:"",categdesc:""},flags:{isAdd:!1,isEdit:!1},showmodal:!1,errors:{}},a.schema={categname:K.a.string().required().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("Category Name"),categdesc:K.a.string().regex(/^[a-zA-Z0-9\s\_\-\.\&\+\:\,]+$/,{name:"No Special Chars"}).label("Category Description")},a.handleCloseModal=function(){a.setState({showmodal:!1})},a.handleListUpdated=function(){a.setState({listProcess:!1,listVisible:!0})},a.handleSubmit=function(){var e=a.validateFields();a.setState({errors:e||{}});if(a.setState({formProcess:!0,formVisible:!1}),e){a.setState({formProcess:!1,formVisible:!0})}else a.state.flags.isAdd?Te(a.state.category).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;var s=Object(z.a)(a.state.categories),n=Object(i.a)({},s[0]);n.categName=a.state.category.categname,n.categDescription=a.state.category.categdesc,s.push(n),s=_.a.orderBy(s,"categName");a.setState({result:e,flags:t,categories:s,formProcess:!1,formVisible:!0}),T.toast.success("New Customer Care Category Saved Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}else{var r=Object(i.a)({},a.state.flags);r.isAdd=!1,r.isEdit=!1;a.setState({category:{},flags:r,result:e,formProcess:!1,formVisible:!0}),T.toast.warn("Category was not saved Successfully...\n"+e.FailReason,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}}).catch(function(e){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,category:{},flags:t,formProcess:!1,formVisible:!0}),T.toast.error("Error occured: \n"+e.message,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}):a.state.flags.isEdit&&ke(a.state.category).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,flags:t,formProcess:!1,formVisible:!0}),T.toast.success("Customer Care Category updated Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}else{var s=Object(i.a)({},a.state.flags);s.isAdd=!1,s.isEdit=!1;a.setState({category:{},flags:s,result:e,formProcess:!1,formVisible:!0}),T.toast.warn("Customer Care Category was not updated Successfully...\n"+e.FailReason,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}}).catch(function(e){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,category:{},flags:t,formProcess:!1,formVisible:!0}),T.toast.error("Error occured: \n"+e.message,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})},a.handleAdd=function(){var e=Object(i.a)({},a.state.category),t=Object(i.a)({},a.state.flags),s=Object(i.a)({},a.state.buttonsOptions);e.categname="",e.categdesc="",t.isAdd=!0,t.isEdit=!1,s.showEdit=!1,a.setState({category:e,flags:t,buttonsOptions:s})},a.handleEdit=function(){var e=Object(i.a)({},a.state.flags);e.isEdit=!0,e.isAdd=!1,a.setState({flags:e})},a.handleCancel=function(){var e=Object(i.a)({},a.state.category);e.categname="",e.categdesc="",a.setState({flags:{isAdd:!1,isEdit:!1},errors:{},category:e})},a.handleChange=function(e){var t=e.currentTarget,s=t.name,n=t.value,r=Object(i.a)({},a.state.category);r[s]=n,a.setState({category:r})},a.handleCategClick=function(e){De(e).then(function(e){if("Ok"===e.Success){var t={};t.categname=e.Result.categName,t.categdesc=e.Result.categDescription;var s=Object(i.a)({},a.state.buttonsOptions);s.editButton.showEdit=!0,a.setState({result:e}),a.setState({category:t,buttonsOptions:s})}else{a.setState({category:{}})}}).catch(function(e){a.setState({result:e}),a.setState({category:{}})})},a.handleRefresh=function(){var e=Ae();a.setState({listProcess:!0}),a.setState({listVisible:!1}),e.then(function(e){a.setState({categories:e.Result});var t=Object(i.a)({},a.state.category),s=Object(i.a)({},a.state.buttonsOptions);return t.categdesc="",t.categname="",s.addButton.showAdd=!0,s.editButton.showEdit=!1,s.refreshButton.showRefresh=!0,s.deleteButton.showDelete=!1,a.setState({listProcess:!1,listVisible:!0,category:t,buttonsOptions:s}),a.setState({result:e}),e}).catch(function(e){var t=Object(i.a)({},a.state.category);return t.categdesc="",t.categname="",a.setState({listProcess:!1,listVisible:!0,category:t,categories:[],result:e,showmodal:!0}),e})},a.validateFields=function(){var e={},t=K.a.validate(a.state.category,a.schema,{abortEarly:!1});if(!t.error)return null;var s=!0,n=!1,r=void 0;try{for(var o,i=t.error.details[Symbol.iterator]();!(s=(o=i.next()).done);s=!0){var l=o.value;e[l.path[0]]=l.message}}catch(c){n=!0,r=c}finally{try{s||null==i.return||i.return()}finally{if(n)throw r}}return 0===Object.keys(e).length?null:(T.toast.warn("Some data fields are invalid.\nPlease recheck entered fields!",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e)},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(L.a)(I.a.mark(function e(){var t,a=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Ae(),this.setState({listProcess:!0}),this.setState({listVisible:!1}),t.then(function(e){return a.setState({categories:e.Result}),a.setState({result:e}),a.setState({listProcess:!1}),a.setState({listVisible:!0}),e}).catch(function(e){return a.setState({categories:[]}),a.setState({result:e}),a.setState({listProcess:!1}),a.setState({listVisible:!0}),a.setState({showmodal:!0}),e});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"container",style:{marginTop:"20px"}},n.a.createElement("div",{className:"col-md-3 leftCol"},n.a.createElement(se,{buttonsOptions:this.state.buttonsOptions}),n.a.createElement(Se,{data:this.state.categories,name:"categName",label:"categName",value:"categDescription",showProcess:this.state.listProcess,showList:this.state.listVisible,onClick:this.handleCategClick})),n.a.createElement("div",{className:"col-md-9 rightCol"},n.a.createElement(Re,{onChange:this.handleChange,onSubmit:this.handleSubmit,onCancel:this.handleCancel,data:this.state.category,flags:this.state.flags,errors:this.state.errors,showProcess:this.state.formProcess,showButtons:this.state.formVisible})),n.a.createElement(X.a,{show:this.state.showmodal,onHide:this.handleCloseModal},n.a.createElement(X.a.Header,{closeButton:!0},n.a.createElement(X.a.Title,null,"Modal heading")),n.a.createElement(X.a.Body,null,n.a.createElement("pre",null,this.state.result.Error)),n.a.createElement(X.a.Footer,null,n.a.createElement(Z.a,{onClick:this.handleCloseModal},"Close"))),n.a.createElement(T.ToastContainer,null))}}]),t}(s.Component),xe=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={uprofile:{},subDir:"/fms"};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,a):(e.history.push(a.state.subDir+"/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleSelect",value:function(e){console.log(e),this.props.history.push(this.state.subDir+"/mastcustcare/inquirecat")}}]),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{title:"Customer Care Master Settings",bgColor:"white",color:"gray"}),n.a.createElement(p.a,{bsStyle:"tabs",activeKey:"1",onSelect:function(t){return e.handleSelect(t)}},n.a.createElement(v.a,{eventKey:"1"},"Inquiries Categories")),n.a.createElement(N.a,null,n.a.createElement(P.a,{path:this.state.subDir+"/mastcustcare/inquirecat",component:Be}),n.a.createElement(P.a,{path:this.state.subDir+"/mastcustcare",exact:!0,render:function(e){return n.a.createElement(ye,Object.assign({message:"Please, select your option from the above tabs."},e))}})))}}]),t}(s.Component),Fe={textAlign:"left"},Ie={textAlign:"left"},Le={textAlign:"right"};function Ve(e){return e.toLocaleString(void 0,{minimumFractionDigits:3})}var We=function(e){var t=e.id,a=e.transDate,s=e.transDesc,r=e.transAmountDr,o=e.transAmountCr,i=e.transClick,l=e.transId;return n.a.createElement("tr",null,n.a.createElement("td",null,l),n.a.createElement("td",{style:Ie},new Date(a).toLocaleDateString()),n.a.createElement("td",{style:Fe},s),n.a.createElement("td",{style:Le},Ve(r)),n.a.createElement("td",{style:Le},Ve(o)),n.a.createElement("td",null,n.a.createElement("button",{onClick:function(){return i(t)}},n.a.createElement(k.a,{icon:"edit"}))))};Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a};var Me=function(){var e=Object(L.a)(I.a.mark(function e(){var t,a,s,n,r,o,i,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a="",s="","",n="",r=W.a.firestore(),o={timestampsInSnapshots:!0},r.settings(o),i=r.collection("Inventory").doc("Assets").collection("Clients"),l=[],c="",e.abrupt("return",i.get().then(function(e){return e.docs.length>0?(e.forEach(function(e){c=e.data().clName,l.push(c)}),t="Ok",a=l):(t="No",a=[],n="No Clients were found. Returning empty list."),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a=[],n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}));case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),He=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),i={timestampsInSnapshots:!0},o.settings(i),l=o.collection("Projects"),c=[],e.abrupt("return",l.where("clientName","==",t).get().then(function(e){return e.docs.length>0?(e.forEach(function(e){var t={name:e.data().prjName,code:e.data().prjCode};c.push(t)}),a="Ok",s=c):(a="No",s=[],r="No Projects were found. Returning empty list."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s="{}",r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),i={timestampsInSnapshots:!0},o.settings(i),l=o.collection("Projects").doc(t).collection("Contracts"),c=[],e.abrupt("return",l.get().then(function(e){return e.docs.length>0?(e.forEach(function(e){var t={name:e.data().contName,code:e.data().contCode};c.push(t)}),a="Ok",s=c):(a="No",s=[],r="No Contracts were found. Returning empty list."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s="{}",r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i,l,c,d,u,h,m,p,g,f,b,v;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.clientName,s=t.projectName,n=t.contractName,r=t.transDate,o=t.transClass,i=t.transDesc,l=t.transType,c=parseFloat(t.transAmount),d=a+"_"+s+"_"+n,u="",h="",m="",p="","",g="",f=W.a.firestore(),b={timestampsInSnapshots:!0},f.settings(b),v=f.collection("Accounts").doc("SOA"),e.abrupt("return",v.collection(d).get().then(function(e){if(e.docs.length>0){var t=e.docs[0].id,a=e.docs.length+1,s={transId:u=t.split(".")[0]+".Tr"+a.pad(5,"0"),transDate:r,transClass:o,transDesc:i,transType:l,transAmount:c};return v.collection(d).doc(u).set(s)}var n=0;return v.get().then(function(e){if(e.exists){n=e.data().ContractCounter;var t={transId:u="C"+(n+1).pad(5,"0")+".Tr00001",transDate:r,transClass:o,transDesc:i,transType:l,transAmount:c};return f.collection("Accounts").doc("SOA").collection(d).doc(u).set(t)}return{Success:h="No",Result:m="{}",FailReason:g="Statement of Accounts Parameters are not found. Action Aborted.",Error:p="",Warning:""}}).then(function(e){return v.update({ContractCounter:n+1})}).then(function(e){return{Success:h="Ok",Result:m=u,FailReason:g="",Error:p,Warning:""}}).catch(function(e){return h="No",m="{}",g="Error",p=e.message,{Success:h,Result:m,FailReason:g,Error:p,Warning:""}})}).then(function(e){return{Success:h="Ok",Result:m=u,FailReason:g="",Error:p="",Warning:""}}).catch(function(e){return h="No",m="{}",g="Error",p=e.message,{Success:h,Result:m,FailReason:g,Error:p,Warning:""}}));case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Object(L.a)(I.a.mark(function e(t,a,s,n){var r,o,i,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t+"_"+a+"_"+s,"","",o="","","",i=W.a.firestore(),l={timestampsInSnapshots:!0},i.settings(l),c=i.collection("Accounts").doc("SOA").collection(r),e.abrupt("return",c.doc(n.transId).update(n).then(function(e){return{Success:"Ok",Result:e,FailReason:"",Error:o,Warning:""}}).catch(function(e){return{Success:"No",Result:{},FailReason:"Error",Error:o=e,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(t,a,s,n){return e.apply(this,arguments)}}(),qe=function(){var e=Object(L.a)(I.a.mark(function e(t,a,s){var n,r,o,i,l,c,d,u;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="",r="",o="","",i="",l=W.a.firestore(),c={timestampsInSnapshots:!0},l.settings(c),d=t+"_"+a+"_"+s,u=l.collection("Accounts").doc("SOA").collection(d),e.abrupt("return",u.get().then(function(e){if(e.docs.length>0){var t=[];e.forEach(function(e){t.push(e.data())}),n="Ok",r=t}else n="No",r=[],i="Could not find Transactions for given Client/Project/Contract.";return{Success:n,Result:r,FailReason:i,Error:o,Warning:""}}).catch(function(e){return n="No",r=[],i="Error",o=e.message,{Success:n,Result:r,FailReason:i,Error:o,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(t,a,s){return e.apply(this,arguments)}}(),ze=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={dateSorted:!1,transNumSorted:!0,uprofile:{},transClasses:[{Name:"Open Balance"},{Name:"Periodic Contract Fees"},{Name:"Incident Maintainence Charges"}],transTypes:[{Name:"Credit"},{Name:"Debit"}],clientsList:[],projectsList:[],contractsList:[],transData:{transDate:"",transClass:"Open Balance",transDesc:"",transType:"Credit",transAmount:0},showProcess:!0,error:"",selectedClient:"",selectedProject:"",selectedContract:"",flags:{isAdd:!1,isEdit:!1},soaTransactions:[],selectedTransIndex:-1,buttonsOptions:{addButton:{showAdd:!0,onAdd:function(){return a.handleAdd()}},editButton:{showEdit:!1,onEdit:function(){return a.handleEdit()}},saveButton:{showSave:!1,onSave:function(){return a.handleOnSubmit()}},cancelButton:{showCancel:!1,onCancel:function(){return a.handleCancel()}},searchButton:{showSearch:!1,onSearch:null}}},a.handleAdd=function(){if(""!==a.state.selectedClient&&""!==a.state.selectedProject&&""!==a.state.selectedContract){var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1;var t=Object(i.a)({},a.state.buttonsOptions);t.addButton.showAdd=!1,t.editButton.showEdit=!1,t.saveButton.showSave=!0,t.cancelButton.showCancel=!0,a.setState({transData:{transDate:"",transClass:"Open Balance",transDesc:"",transType:"Credit",transAmount:0},flags:e,buttonsOptions:t})}else T.toast.warn("You must select the Client, Project, and Contract before your Add or Edit...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.handleEdit=function(){var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0;var t=Object(i.a)({},a.state.buttonsOptions);t.addButton.showAdd=!1,t.editButton.showEdit=!1,t.saveButton.showSave=!0,t.cancelButton.showCancel=!0,a.setState({flags:e,buttonsOptions:t})},a.handleCancel=function(){if(Object(i.a)({},a.state.flags).isAdd){var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!1;var t=Object(i.a)({},a.state.buttonsOptions);t.addButton.showAdd=!0,t.editButton.showEdit=!1,t.saveButton.showSave=!1,t.cancelButton.showCancel=!1,a.setState({transData:{transDate:"",transClass:"Open Balance",transDesc:"",transType:"Credit",transAmount:0},flags:e,buttonsOptions:t})}else{var s=Object(i.a)({},a.state.soaTransactions[a.state.selectedTransIndex]),n=Object(i.a)({},a.state.flags);n.isAdd=!1,n.isEdit=!1;var r=Object(i.a)({},a.state.buttonsOptions);r.addButton.showAdd=!0,r.editButton.showEdit=!0,r.saveButton.showSave=!1,r.cancelButton.showCancel=!1,a.setState({transData:s,flags:n,buttonsOptions:r})}},a.handleTransDescOnChange=function(e){var t=Object(i.a)({},a.state.transData);t.transDesc=e.currentTarget.value,a.setState({transData:t})},a.handleClientsOnChange=function(e){a.setState({showProcess:!0});var t=e.currentTarget.value;He(e.currentTarget.value).then(function(e){var s=[];e.Result.map(function(e){var t={Name:e.name};s.push(t)}),a.setState({projectsList:s,selectedClient:t}),a.setState({showProcess:!1})}).catch(function(e){console.log(e)})},a.handleProjectsOnChange=function(e){a.setState({showProcess:!0});var t=e.currentTarget.value;Ue(e.currentTarget.value).then(function(e){var s=[];e.Result.map(function(e){var t={Name:e.name};s.push(t)}),a.setState({contractsList:s,selectedProject:t}),a.setState({showProcess:!1})}).catch(function(e){console.log(e)})},a.handleContractsOnChange=function(e){var t=a.state,s=t.selectedClient,n=t.selectedProject,r=e.currentTarget.value;a.setState({selectedContract:r}),qe(s,n,r).then(function(e){var t=e.Result;console.log(t),a.setState({soaTransactions:t})}).catch(function(e){console.log(e)})},a.handleTransDateOnChange=function(e){var t=Object(i.a)({},a.state.transData);t.transDate=e.currentTarget.value,a.setState({transData:t})},a.handleTransClassOnChange=function(e){var t=Object(i.a)({},a.state.transData);t.transClass=e.currentTarget.value,a.setState({transData:t})},a.handleTransTypeOnChange=function(e){var t=Object(i.a)({},a.state.transData);t.transType=e.currentTarget.value,a.setState({transData:t})},a.handleTransAmountOnChange=function(e){var t=Object(i.a)({},a.state.transData);t.transAmount=e.currentTarget.value,a.setState({transData:t})},a.handleOnSubmit=function(){a.setState({showProcess:!0});var e=a.state,t=e.flags,s=e.selectedClient,n=e.selectedContract,r=e.selectedProject,o=e.transData;if(t.isAdd){var l={clientName:s,projectName:r,contractName:n,transDate:o.transDate,transClass:o.transClass,transType:o.transType,transDesc:o.transDesc,transAmount:o.transAmount};Ge(l).then(function(e){qe(s,r,n).then(function(e){console.log(e.Result)}).catch(function(e){console.log(e)});var t=Object(z.a)(a.state.soaTransactions);l.transId=e.Result,console.log(e),t.push(l);var o=Object(i.a)({},a.state.flags);o.isAdd=!1,o.isEdit=!1;var c=Object(i.a)({},a.state.buttonsOptions);c.addButton.showAdd=!0,c.editButton.showEdit=!1,c.saveButton.showSave=!1,c.cancelButton.showCancel=!1,a.setState({soaTransactions:t,flags:o,buttonsOptions:c}),a.setState({showProcess:!1})}).catch(function(e){console.log(e),T.toast.error(e.message,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;var s=Object(i.a)({},a.state.buttonsOptions);s.addButton.showAdd=!0,s.editButton.showEdit=!1,s.saveButton.showSave=!1,s.cancelButton.showCancel=!1,a.setState({flags:t,buttonsOptions:s}),a.setState({showProcess:!1})})}else{a.setState({showProcess:!0});var c=Object(z.a)(a.state.soaTransactions);c[a.state.selectedTransIndex]=Object(i.a)({},a.state.transData),console.log(a.state.selectedTransIndex,c),a.setState({soaTransactions:c}),Je(s,r,n,o).then(function(e){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;var s=Object(i.a)({},a.state.buttonsOptions);s.addButton.showAdd=!0,s.editButton.showEdit=!0,s.saveButton.showSave=!1,s.cancelButton.showCancel=!1,a.setState({flags:t,buttonsOptions:s}),a.setState({showProcess:!1})}).catch(function(e){console.log(e);var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;var s=Object(i.a)({},a.state.buttonsOptions);s.addButton.showAdd=!0,s.editButton.showEdit=!0,s.saveButton.showSave=!1,s.cancelButton.showCancel=!1,a.setState({flags:t,buttonsOptions:s}),a.setState({showProcess:!1})})}},a.handleSOATransClick=function(e){var t=Object(i.a)({},a.state.soaTransactions[e]),s=Object(i.a)({},a.state.buttonsOptions);s.editButton.showEdit=!0,a.setState({transData:t,buttonsOptions:s,selectedTransIndex:e})},a.sumCr=function(){var e=0;return a.state.soaTransactions.map(function(t){"Credit"===t.transType&&(e+=parseFloat(t.transAmount))}),e.toFixed(3)},a.sumDr=function(){var e=0;return a.state.soaTransactions.map(function(t){"Debit"===t.transType&&(e+=parseFloat(t.transAmount))}),e.toFixed(3)},a.calcBalance=function(){var e=0,t=a.state.soaTransactions;t.map(function(t){"Credit"===t.transType&&(e+=parseFloat(t.transAmount))});var s=0;return t.map(function(e){"Debit"===e.transType&&(s+=parseFloat(e.transAmount))}),(e-s).toFixed(3)},a.sortByDate=function(){var e=Object(z.a)(a.state.soaTransactions);e=_.a.orderBy(e,"transDate");a.setState({soaTransactions:e,dateSorted:!0,transNumSorted:!1})},a.sortByTransNum=function(){var e=Object(z.a)(a.state.soaTransactions);e=_.a.orderBy(e,"transId");a.setState({soaTransactions:e,dateSorted:!1,transNumSorted:!0})};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,Me().then(function(e){var t=[];e.Result.map(function(e){var a={Name:e};t.push(a)}),a.setState({clientsList:t}),a.setState({showProcess:!1})}).catch(function(e){console.log(e)}),a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{title:"Client's Contract Statement of Account",bgColor:"white",color:"gray"}),n.a.createElement("form",{style:{marginTop:"10px",paddingLeft:"25px",paddingRight:"25px"}},n.a.createElement(se,{buttonsOptions:this.state.buttonsOptions}),n.a.createElement("div",{style:{width:"100%",margin:"10px"}}),n.a.createElement(oe,{name:"ddlClients",label:"Clients",values:this.state.clientsList,onChange:this.handleClientsOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit,error:this.state.error}),n.a.createElement(oe,{name:"ddlProjects",label:"Projects",values:this.state.projectsList,onChange:this.handleProjectsOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit,error:this.state.error}),n.a.createElement(oe,{name:"ddlContracts",label:"Contracts",values:this.state.contractsList,onChange:this.handleContractsOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit,error:this.state.error}),n.a.createElement(ie,{type:"text",name:"txtTransDesc",label:"Transaction Description",value:this.state.transData.transDesc,onChange:this.handleTransDescOnChange,flgDisabled:!this.state.flags.isAdd&&!this.state.flags.isEdit,error:this.state.error}),n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{type:"date",name:"txtTransDate",label:"Transaction Date",value:this.state.transData.transDate,onChange:this.handleTransDateOnChange,flgDisabled:!this.state.flags.isAdd&&!this.state.flags.isEdit,error:this.state.error})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{type:"number",name:"txtTransValue",label:"Transaction Value",value:this.state.transData.transAmount,onChange:this.handleTransAmountOnChange,flgDisabled:!this.state.flags.isAdd&&!this.state.flags.isEdit,error:this.state.error}))),n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(oe,{name:"ddlTransClass",label:"Transaction Class",values:this.state.transClasses,onChange:this.handleTransClassOnChange,flgDisabled:!this.state.flags.isAdd&&!this.state.flags.isEdit,error:this.state.error,defValue:"Open Balance"})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(oe,{name:"ddlTransType",label:"Transaction Type",values:this.state.transTypes,onChange:this.handleTransTypeOnChange,flgDisabled:!this.state.flags.isAdd&&!this.state.flags.isEdit,error:this.state.error,defValue:this.state.transData.transType}))),n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",className:this.state.showProcess?"":"hidden",style:{marginTop:"2vh"}}),n.a.createElement("div",{className:"btn-toolbar btnToobar"+(this.state.flags.isAdd||this.state.flags.isEdit?"":" hidden")},n.a.createElement("div",{className:"btn-group btn-group-justified"}))),n.a.createElement("table",{className:"table table-striped table-hover"},n.a.createElement("thead",null,n.a.createElement("tr",{className:"bg-info"},n.a.createElement("th",{style:{width:"10%",textAlign:"center"}},n.a.createElement("div",{onClick:this.sortByTransNum,style:this.state.transNumSorted?{color:"blue"}:{color:"black"}},"Tr ID")),n.a.createElement("th",{style:{width:"10%"}},n.a.createElement("div",{onClick:this.sortByDate,style:this.state.dateSorted?{color:"blue"}:{color:"black"}},"Date")),n.a.createElement("th",{style:{width:"40%"}},"Description"),n.a.createElement("th",{style:Xe},"Debit (OMR)"),n.a.createElement("th",{style:Xe},"Credit (OMR)"),n.a.createElement("th",null,"Edit"))),n.a.createElement("tbody",null,this.state.soaTransactions?this.state.soaTransactions.map(function(t,a){return n.a.createElement(We,{key:a,id:a,transId:t.transId,transDate:t.transDate,transDesc:t.transDesc,transAmountDr:"Debit"===t.transType?parseFloat(t.transAmount).toFixed(3):0,transAmountCr:"Credit"===t.transType?parseFloat(t.transAmount).toFixed(3):0,transClick:e.handleSOATransClick})}):null),n.a.createElement("tfoot",null,n.a.createElement("tr",{className:"bg-success"},n.a.createElement("td",null),n.a.createElement("td",null),n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"right"}},"Total"),n.a.createElement("td",{style:{textAlign:"right",fontWeight:"bold"}},this.sumDr()),n.a.createElement("td",{style:{textAlign:"right",fontWeight:"bold"}},this.sumCr()),n.a.createElement("td",null)),n.a.createElement("tr",{className:"bg-success"},n.a.createElement("td",null),n.a.createElement("td",null),n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"right"}},"Balance"),n.a.createElement("td",{style:{textAlign:"right",fontWeight:"bold"}}),n.a.createElement("td",{style:{textAlign:"right",fontWeight:"bold"}},this.calcBalance()),n.a.createElement("td",null)))),n.a.createElement("hr",null),n.a.createElement(T.ToastContainer,null))}}]),t}(s.Component),Xe={textAlign:"right",width:"20%"};Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a};var Ze=function(){var e=Object(L.a)(I.a.mark(function e(){var t,a,s,n,r,o,i,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a="",s="","",n="",r=W.a.firestore(),o={timestampsInSnapshots:!0},r.settings(o),i=r.collection("Projects"),l=[],e.abrupt("return",i.get().then(function(e){return e.docs.length>0?(e.forEach(function(e){var t={name:e.data().prjName,code:e.data().prjCode};l.push(t)}),console.log("Projects: ",l),t="Ok",a=l):(t="No",a="{}",n="No Projects were found. Returning empty list."),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a="{}",n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i,l,c,d,u,h,m;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a=t.transDate,s=t.transDesc,n=parseFloat(t.transAmount),r=t.transType,o=t.projectName,i="",l="",c="",d="","",u="",h=W.a.firestore(),m=h.collection("Accounts").doc("Transactions").collection("JournalVouchers"),e.abrupt("return",m.get().then(function(e){console.log(e.docs.length);var t=e.docs.length;i="JV"+t.pad(8,"0"),console.log(i);var l={jvNumber:i,jvDate:a,jvDescription:s,jvAmount:n,jvTransType:r,prjName:o};return console.log("JV: ",l),m.doc(i).set(l)}).then(function(e){t.transType;return"Petty Cash"!==t.targetProj?{Success:l="Ok",Result:c="{}",FailReason:u="",Error:d,Warning:""}:h.collection("Accounts").doc("PettyCash").get()}).then(function(e){if(e.exists){var t=e.data().Value;return"Credit"===r?t+=n:t-=n,h.collection("Accounts").doc("PettyCash").update({Value:t})}}).then(function(e){return{Success:l="Ok",Result:c="{}",FailReason:u="",Error:d,Warning:""}}).catch(function(e){return l="No",c="{}",u="Error",d=e.message,console.log(e),{Success:l,Result:c,FailReason:u,Error:d,Warning:""}}));case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(L.a)(I.a.mark(function e(){var t,a,s,n,r,o,i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a="",s="","",n="",r=W.a.firestore(),o={timestampsInSnapshots:!0},r.settings(o),i=r.collection("Accounts").doc("Transactions").collection("JournalVouchers"),e.abrupt("return",i.get().then(function(e){if(e.docs.length>0){var r=[];e.forEach(function(e){r.push(e.data())}),t="Ok",a=r}else t="No",a="{}",n="Could not find any JV Transactions. Returning empty list";return{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a="{}",n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Ye=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={uprofile:{},projectsList:[],transData:{transDate:"",transAmount:0,transDesc:"",targetProj:"Self",transType:"Credit"},showProcess:!0,error:"",selectedClient:"",selectedProject:"",selectedContract:"",flags:{isAdd:!0,isEdit:!0},transTypes:[{Name:"Credit"},{Name:"Debit"}],jvTransactions:[],targetProjects:[{Name:"Self"},{Name:"Petty Cash"}]},a.handleTransDescOnChange=function(e){var t=Object(i.a)({},a.state.transData);t.transDesc=e.currentTarget.value,a.setState({transData:t})},a.handleProjectsOnChange=function(e){var t=Object(i.a)({},a.state.transData);t.targetProj=e.currentTarget.value,a.setState({transData:t})},a.handleTransDateOnChange=function(e){var t=Object(i.a)({},a.state.transData);t.transDate=e.currentTarget.value,a.setState({transData:t})},a.handleTransTypeOnChange=function(e){var t=Object(i.a)({},a.state.transData);t.transType=e.currentTarget.value,a.setState({transData:t})},a.handleTransAmountOnChange=function(e){var t=Object(i.a)({},a.state.transData);t.transAmount=e.currentTarget.value,a.setState({transData:t})},a.handleOnSubmit=function(){a.setState({showProcess:!0});var e=a.state.transData,t={projectName:e.targetProj,transDate:e.transDate,transType:e.transType,transDesc:e.transDesc,transAmount:e.transAmount},s=Qe(t).then(function(e){console.log(e),Ke().then(function(e){var t;t=e.Result,console.log(t),a.setState({jvTransactions:t}),a.setState({showProcess:!1})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)});console.log(s)},a.handleOnCancel=function(){};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,Ze().then(function(e){var t=Object(z.a)(a.state.targetProjects);e.Result.map(function(e){var a={Name:e.name};t.push(a)}),a.setState({projectsList:t}),a.setState({showProcess:!1})}).catch(function(e){console.log("Error: ",e)}),Ke().then(function(e){var t;t=e.Result,console.log(t),a.setState({jvTransactions:t})}).catch(function(e){console.log(e)}),a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{title:"Journal Entries and Petty Cash",bgColor:"white",color:"gray"}),n.a.createElement("form",{style:{marginTop:"10px",paddingLeft:"25px",paddingRight:"25px"}},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{type:"date",name:"txtTransDate",label:"Transaction Date",value:this.state.transData.transDate,onChange:this.handleTransDateOnChange,flgDisabled:!1,error:this.state.error})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{type:"number",name:"txtTransValue",label:"Transaction Value",value:this.state.transData.transAmount,onChange:this.handleTransAmountOnChange,flgDisabled:!1,error:this.state.error}))),n.a.createElement(oe,{name:"ddlProjects",label:"Projects",values:this.state.projectsList,onChange:this.handleProjectsOnChange,flgDisabled:!1,error:this.state.error}),n.a.createElement(ie,{type:"text",name:"txtTransDesc",label:"Transaction Description",value:this.state.transData.transDesc,onChange:this.handleTransDescOnChange,flgDisabled:!1,error:this.state.error}),n.a.createElement(oe,{name:"ddlTransType",label:"Transaction Type",values:this.state.transTypes,onChange:this.handleTransTypeOnChange,flgDisabled:!1,error:this.state.error,defValue:"Credit"}),n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",className:this.state.showProcess?"":"hidden",style:{marginTop:"2vh"}}),n.a.createElement("div",{className:"btn-toolbar"+(this.state.flags.isAdd||this.state.flags.isEdit?"":" hidden"),style:$e},n.a.createElement("div",{className:"btn-group btn-group-justified"},n.a.createElement("button",{type:"button",className:"btn btn-primary",style:{width:"100%"},onClick:this.handleOnSubmit},n.a.createElement(k.a,{icon:"save"}))))),n.a.createElement("table",{className:"table table-striped table-hover"},n.a.createElement("thead",null,n.a.createElement("tr",{className:"bg-info"},n.a.createElement("th",{style:{width:"20%"}},"Date"),n.a.createElement("th",{style:{width:"50%"}},"Description"),n.a.createElement("th",{style:_e},"Debit (OMR)"),n.a.createElement("th",{style:_e},"Credit (OMR)"))),n.a.createElement("tbody",null,this.state.jvTransactions.map(function(e){return n.a.createElement(We,{transDate:e.jvDate,transDesc:e.jvDesc,transAmountDr:"Debit"===e.jvTransType?e.jvAmount:0,transAmountCr:"Credit"===e.jvTransType?e.jvAmount:0})}))),n.a.createElement("hr",null))}}]),t}(s.Component),_e={textAlign:"right",width:"15%"},$e={width:"100%",paddingBottom:"25px",marginBottom:"25px",marginAbove:"25px",borderBottom:"solid thin",borderBottomColor:"gainsboro"};a(66);Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a};var et=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),i={timestampsInSnapshots:!0},o.settings(i),l=o.collection("Inventory").doc("Assets").collection("Clients"),e.abrupt("return",l.where("clName","==",t).get().then(function(e){if(e.docs.length>0){var t=[];e.forEach(function(e){t.push(e.data())}),a="Ok",s=t}else a="No",s="{}",r="No Clients were found. Returning empty list.";return{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s="{}",r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i,l,c,d,u,h,m,p;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.clName,s=t.clEmail,n=t.clContactName,r=t.clContactNumber,o=t.clAddress,i="",l="",c="","",d="",u=W.a.firestore(),h={timestampsInSnapshots:!0},u.settings(h),m=u.collection("Inventory").doc("Assets").collection("Clients"),p={clName:a,clEmail:s,clContactName:n,clContactNumber:r,clAddress:o,SitesCount:0},e.abrupt("return",m.doc(a).get().then(function(e){return e.exists?m.doc(a).set(p):m.doc(a).set(p).then(function(e){u.collection("Inventory").doc("Assets").get().then(function(e){var t=0;return e.exists&&(t=e.data().ClientsCount),++t,u.collection("Inventory").doc("Assets").update({ClientsCount:t})})})}).then(function(e){return{Success:i="Ok",Result:l="{}",FailReason:d,Error:c,Warning:""}}).catch(function(e){return i="No",l="{}",d="Error",c=e.message,{Success:i,Result:l,FailReason:d,Error:c,Warning:""}}));case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),at=function(e){var t=e.clName,a=e.clEmail,s=e.clContactName,n=e.clContactNumber,r=e.clAddress,o="",i="",l="",c="",d=W.a.firestore();d.settings({timestampsInSnapshots:!0});var u=d.collection("Inventory").doc("Assets").collection("Clients"),h={clName:t,clEmail:a,clContactName:s,clContactNumber:n,clAddress:r};return u.doc(t).get().then(function(e){return e.exists?u.doc(t).set(h):{Success:o="No",Result:i="{}",FailReason:c="Client Profile do not exist.",Error:l,Warning:""}}).then(function(e){return{Success:o="Ok",Result:i="{}",FailReason:c,Error:l,Warning:""}}).catch(function(e){return o="No",i="{}",c="Error",l=e.message,{Success:o,Result:i,FailReason:c,Error:l,Warning:""}})},st=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),i={timestampsInSnapshots:!0},o.settings(i),l=o.collection("Projects"),e.abrupt("return",l.where("prjName","==",t).get().then(function(e){if(e.docs.length>0){var t=[];e.forEach(function(e){t.push(e.data())}),a="Ok",s=t}else a="No",s=[],r="No Clients were found. Returning empty list.";return{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s=[],r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),nt=function(e){var t=e,a="",s="",n="",r="",o=W.a.firestore();o.settings({timestampsInSnapshots:!0});var i=o.collection("Projects");return i.doc(t.prjName).get().then(function(e){return e.exists?{Success:a="No",Result:s="{}",FailReason:"Project Exists and cannot overwrite. Adding aborted.",Error:n,Warning:""}:i.doc(t.prjName).set(t)}).then(function(e){return a="Ok",s=e.id,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s="{}",r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}})},rt=function(e){var t=e,a="",s="",n="",r="",o=W.a.firestore();o.settings({timestampsInSnapshots:!0});var i=o.collection("Projects");return i.doc(t.prjName).get().then(function(e){return i.doc(t.prjName).update(t)}).then(function(e){return{Success:a="Ok",Result:s={},FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s={},r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}})},ot=function(e,t,a){var s=e,n=t,r=a,o="",i="",l="",c="";return W.a.firestore().collection("Projects").doc(s).collection("Contracts").doc(n).collection("Assets").doc(r).get().then(function(e){return e.exists?(o="Ok",i=e.data(),{Success:o,Result:i,FailReason:c,Error:l,Warning:""}):{Success:o="No",Result:i={},FailReason:c="Asset does not exist.",Error:l,Warning:""}}).catch(function(e){return o="No",i={},c="Error",l=e.message,{Success:o,Result:i,FailReason:c,Error:l,Warning:""}})},it=function(e,t,a){var s=e,n=t,r=a.Title,o=a.Count,i=!!a.pool&&a.pool,l=!!a.assetEquip&&a.assetEquip,c=a.Description,d=a.serialNo?a.serialNo:"",u=a.Remarks,h=a.Location,m="",p="",g="",f="",b=W.a.firestore().collection("Projects").doc(s).collection("Contracts").doc(n).collection("Assets"),v={Title:r,Description:c,pool:i,assetEquip:l,Location:h,serialNo:d,Count:o,Remarks:u};return b.doc(r).get().then(function(e){return e.exists?{Success:m="No",Result:p={},FailReason:f="Asset already exists. No Overwrite.",Error:g,Warning:""}:b.doc(r).set(v)}).then(function(e){if(e){if(!e.Success)return;if("No"===e.Success)return e}return{Success:m="Ok",Result:p={},FailReason:f,Error:g,Warning:""}}).catch(function(e){return m="No",p={},f="Error",g=e.message,{Success:m,Result:p,FailReason:f,Error:g,Warning:""}})},lt=function(e,t,a){var s=e,n=t,r=a.Title,o=a.Count,i=(!!a.pool&&a.pool,!!a.assetEquip&&a.assetEquip,a.Description),l=a.serialNo?a.serialNo:"",c=a.Location,d=a.Remarks,u="",h="",m="",p="",g=W.a.firestore().collection("Projects").doc(s).collection("Contracts").doc(n).collection("Assets"),f={Title:r,Description:i,Location:c,serialNo:l,Count:o,Remarks:d};return g.doc(r).get().then(function(e){return e.exists?g.doc(r).update(f):{Success:u="No",Result:h={},FailReason:p="Asset does not exist.Update Aborted.",Error:m,Warning:""}}).then(function(e){return{Success:u="Ok",Result:h={},FailReason:p,Error:m,Warning:""}}).catch(function(e){return u="No",h="{}",p="Error",m=e.message,{Success:u,Result:h,FailReason:p,Error:m,Warning:""}})},ct=function(e,t){var a=e,s=t,n="",r="",o="",i="";return W.a.firestore().collection("Projects").doc(a).collection("Contracts").doc(s).collection("Assets").get().then(function(e){var t=[];return e.docs.length>0?(e.forEach(function(e){t.push(e.data()),console.log("Asset: ",e)}),n="Ok",r=t):(n="No",r=t,i="No assets found. Returning empty list."),{Success:n,Result:r,FailReason:i,Error:o,Warning:""}}).catch(function(e){return n="No",r={},i="Error",o=e.message,{Success:n,Result:r,FailReason:i,Error:o,Warning:""}})},dt=function(e,t){var a=e,s=t,n="",r="",o="",i="";return W.a.firestore().collection("Projects").doc(a).collection("Contracts").doc(s).get().then(function(e){return e.exists?(n="Ok",r=e.data(),{Success:n,Result:r,FailReason:i,Error:o,Warning:""}):{Success:n="No",Result:r={},FailReason:i="Contract do not exist.",Error:o,Warning:""}}).catch(function(e){return n="No",r={},i="Error",o=e.message,{Success:n,Result:r,FailReason:i,Error:o,Warning:""}})},ut=function(e,t,a,s){var n="",r="",o="",i="",l=e+"_"+t+"_"+a+"_"+s;return W.a.firestore().collection("Maintenance").doc("Logs").collection(l).get().then(function(e){if(e.docs.length>0){var t=[];e.forEach(function(e){t.push(e.data())}),n="Ok",r=t}else n="No",r=[],i="Could not find logs for given asset.";return{Success:n,Result:r,FailReason:i,Error:o,Warning:""}}).catch(function(e){return n="No",r={},i="Error",o=e.message,{Success:n,Result:r,FailReason:i,Error:o,Warning:""}})},ht=function(e,t,a,s,n){var r=n.logDate,o=n.logDetails,i="",l=n.logPerformedBy,c=e+"_"+t+"_"+a+"_"+s,d="",u="",h="",m="",p=W.a.firestore(),g=p.collection("Maintenance").doc("Logs"),f={};return g.collection(c).get().then(function(e){if(e.docs.length>0){i=e.docs[0].id;var t=e.docs.length+1,a=i.split(".")[0]+".MLOG"+t.pad(5,"0");return f={logId:a,logDate:r,logDetails:o,logPerformedBy:l},g.collection(c).doc(a).set(f).then(function(e){return{Success:d="Ok",Result:u=f,FailReason:m="",Error:h,Warning:""}}).catch(function(e){return d="No",u={},m="Error",h=e.message,console.log("Process: ",e),{Success:d,Result:u,FailReason:m,Error:h,Warning:""}})}var s=0;return g.get().then(function(e){if(e.exists){var t="A"+((s=e.data().LogCounter)+1).pad(5,"0")+".MLOG00001";return f={logId:t,logDate:r,logDetails:o,logPerformedBy:l},p.collection("Maintenance").doc("Logs").collection(c).doc(t).set(f)}return{Success:d="No",Result:u={},FailReason:m="Maintenance Log Parameters are not found. Action Aborted.",Error:h="",Warning:""}}).then(function(e){return g.update({LogCounter:s+1})}).then(function(e){return{Success:d="Ok",Result:u=f,FailReason:m="",Error:h,Warning:""}}).catch(function(e){return d="No",u={},m="Error",h=e.message,console.log("Process: ",e),{Success:d,Result:u,FailReason:m,Error:h,Warning:""}})}).catch(function(e){return d="No",u={},m="Error",h=e.message,console.log("Process: ",e),{Success:d,Result:u,FailReason:m,Error:h,Warning:""}})},mt=function(e,t,a,s,n){var r=n.logDate,o=n.logDetails,i=n.logId,l=n.logPerformedBy,c=e+"_"+t+"_"+a+"_"+s,d="",u="",h="",m="",p=W.a.firestore().collection("Maintenance").doc("Logs");return p.collection(c).doc(i).get().then(function(e){if(e.exists){var t={logId:i,logDate:r,logDetails:o,logPerformedBy:l};return p.collection(c).doc(i).set(t).then(function(e){return{Success:d="Ok",Result:u="{}",FailReason:m="",Error:h,Warning:""}}).catch(function(e){return d="No",u={},m="Error",h=e.message,console.log("Process: ",e),{Success:d,Result:u,FailReason:m,Error:h,Warning:""}})}return{Success:d="No",Result:u={},FailReason:m="Maintenance Log not found. Update aborted.",Error:h="",Warning:""}}).catch(function(e){return d="No",u={},m="Error",h=e.message,console.log("Process: ",e),{Success:d,Result:u,FailReason:m,Error:h,Warning:""}})},pt=function(e,t,a,s,n){var r="",o="",i="",l="",c=e+"_"+t+"_"+a+"_"+s;return W.a.firestore().collection("Maintenance").doc("Logs").collection(c).doc(n).get().then(function(e){if(e.exists){var t=e.data();r="Ok",o=t}else r="No",o={},l="Could not find the log requested.";return{Success:r,Result:o,FailReason:l,Error:i,Warning:""}}).catch(function(e){return r="No",o={},l="Error",i=e.message,{Success:r,Result:o,FailReason:l,Error:i,Warning:""}})},gt=function(e,t,a){var s=e,n=t,r=a,o="",i="",l="",c="";return W.a.firestore().collection("Projects").doc(s).collection("Contracts").doc(n).collection("Meters").doc(r).get().then(function(e){return e.exists?(o="Ok",i=e.data(),{Success:o,Result:i,FailReason:c,Error:l,Warning:""}):{Success:o="No",Result:i={},FailReason:c="Meter does not exist.",Error:l,Warning:""}}).catch(function(e){return o="No",i={},c="Error",l=e.message,{Success:o,Result:i,FailReason:c,Error:l,Warning:""}})},ft=function(e,t,a){var s=e,n=t,r=a.Number,o=a.Remarks,i=a.Location,l=a.Type,c="",d="",u="",h="",m=W.a.firestore().collection("Projects").doc(s).collection("Contracts").doc(n).collection("Meters"),p={Number:r,Location:i,Remarks:o,Type:l};return m.doc(r).get().then(function(e){return e.exists?{Success:c="No",Result:d={},FailReason:h="Meter already exists. No Overwrite.",Error:u,Warning:""}:m.doc(r).set(p)}).then(function(e){if(e){if(!e.Success)return;if("No"===e.Success)return e}return{Success:c="Ok",Result:d={},FailReason:h,Error:u,Warning:""}}).catch(function(e){return c="No",d={},h="Error",u=e.message,{Success:c,Result:d,FailReason:h,Error:u,Warning:""}})},bt=function(e,t,a){var s=e,n=t,r=a.Number,o=a.Location,i=a.Remarks,l="",c="",d="",u="",h=W.a.firestore().collection("Projects").doc(s).collection("Contracts").doc(n).collection("Meters"),m={Number:r,Location:o,Remarks:i};return h.doc(r).get().then(function(e){return e.exists?h.doc(r).update(m):{Success:l="No",Result:c={},FailReason:u="Meter does not exist.Update Aborted.",Error:d,Warning:""}}).then(function(e){return{Success:l="Ok",Result:c={},FailReason:u,Error:d,Warning:""}}).catch(function(e){return l="No",c="{}",u="Error",d=e.message,{Success:l,Result:c,FailReason:u,Error:d,Warning:""}})},vt=function(e,t){var a=e,s=t,n="",r="",o="",i="";return W.a.firestore().collection("Projects").doc(a).collection("Contracts").doc(s).collection("Meters").get().then(function(e){var t=[];return e.docs.length>0?(e.forEach(function(e){t.push(e.data())}),n="Ok",r=t):(n="No",r=t,i="No meters found. Returning empty list."),{Success:n,Result:r,FailReason:i,Error:o,Warning:""}}).catch(function(e){return n="No",r={},i="Error",o=e.message,{Success:n,Result:r,FailReason:i,Error:o,Warning:""}})},Et=function(e,t,a,s,n){var r=t,o=a,i=s,l="",c="",d="",u="";return W.a.firestore().collection("Projects").doc(r).collection("Contracts").doc(o).collection("Meters").doc(i).collection("Readings").doc(n).get().then(function(e){return e.exists?(l="Ok",c=e.data(),{Success:l,Result:c,FailReason:u,Error:d,Warning:""}):{Success:l="No",Result:c={},FailReason:u="Meter Reading does not exist for the given date.",Error:d,Warning:""}}).catch(function(e){return l="No",c={},u="Error",d=e.message,{Success:l,Result:c,FailReason:u,Error:d,Warning:""}})},Ct=function(e,t,a,s,n){var r=t,o=a,i=s,l=n.readingDate,c="",d="",u="",h="",m=W.a.firestore().collection("Projects").doc(r).collection("Contracts").doc(o).collection("Meters").doc(i).collection("Readings");return m.doc(l).get().then(function(e){return e.exists?{Success:c="No",Result:d={},FailReason:h="Meter Reading for this day already exists. No Overwrite.",Error:u,Warning:""}:m.doc(l).set(n)}).then(function(e){if(e){if(!e.Success)return;if("No"===e.Success)return e}return{Success:c="Ok",Result:d={},FailReason:h,Error:u,Warning:""}}).catch(function(e){return c="No",d={},h="Error",u=e.message,{Success:c,Result:d,FailReason:h,Error:u,Warning:""}})},Ot=function(e,t,a,s){var n=e,r=t,o=a,i=s.readingDate,l="",c="",d="",u="",h=W.a.firestore().collection("Projects").doc(n).collection("Contracts").doc(r).collection("Meters").doc(o).collection("Readings").doc(i);return h.get().then(function(e){return e.exists?h.update(s):{Success:l="No",Result:c={},FailReason:u="Meter reading does not exist. Update Aborted.",Error:d,Warning:""}}).then(function(e){return{Success:l="Ok",Result:c={},FailReason:u,Error:d,Warning:""}}).catch(function(e){return l="No",c="{}",u="Error",d=e.message,{Success:l,Result:c,FailReason:u,Error:d,Warning:""}})},St=function(e,t,a,s){var n=t,r=a,o="",i="",l="",c="";return W.a.firestore().collection("Projects").doc(n).collection("Contracts").doc(r).collection("Meters").doc(s).collection("Readings").get().then(function(e){var t=[];return e.docs.length>0?(e.forEach(function(e){t.push(e.data())}),o="Ok",i=t):(o="No",i=t,c="No readings found. Returning empty list."),{Success:o,Result:i,FailReason:c,Error:l,Warning:""}}).catch(function(e){return o="No",i={},c="Error",l=e.message,{Success:o,Result:i,FailReason:c,Error:l,Warning:""}})},jt=a(248),yt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:"",bottomTBVisible:"hidden",topTBVisible:"",flags:{isAdd:!1,isEdit:!1}},a.handleOnAdd=function(){a.props.handlers.handleOnAdd(),a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1,a.setState({flags:e})},a.handleOnEdit=function(){a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0,a.setState({flags:e})},a.handleOnSave=function(){var e=Object(i.a)({},a.state.flags),t=a.props.handlers.handleOnSave(e);console.log(t),a.setState({bottomTBVisible:"hidden",topTBVisible:""}),e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a.handleOnCancel=function(){a.props.handlers.handleOnCancel(),a.setState({bottomTBVisible:"hidden",topTBVisible:""});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.client;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.state.topTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnAdd},n.a.createElement(k.a,{icon:"plus"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnEdit},n.a.createElement(k.a,{icon:"edit"})))))),n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"txtCltName",label:"Client Name",type:"text",value:e.clName,onChange:this.props.handlers.handleClientNameChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtCltEmail",label:"Client Email",type:"text",value:e.clEmail,onChange:this.props.handlers.handleClientEmailChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtCPName",label:"Contact Person",type:"text",value:e.clContactName,onChange:this.props.handlers.handleContactNameChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtCPNumber",label:"Contact Number(s)",type:"text",value:e.clContactNumber,onChange:this.props.handlers.handleContactNumberChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtAddress",label:"Address",type:"text",value:e.clAddress,onChange:this.props.handlers.handleAddressChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement("div",{className:this.state.bottomTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"success",onClick:this.handleOnSave},n.a.createElement(k.a,{icon:"save"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"danger",onClick:this.handleOnCancel},n.a.createElement(k.a,{icon:"ban"})))))))}}]),t}(s.Component),wt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:"",bottomTBVisible:"hidden",topTBVisible:"",flags:{isAdd:!1,isEdit:!1}},a.handleOnAdd=function(){a.props.handlers.handleOnAdd(),a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1,a.setState({flags:e})},a.handleOnEdit=function(){a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0,a.setState({flags:e})},a.handleOnSave=function(){var e=Object(i.a)({},a.state.flags),t=a.props.handlers.handleOnSave(e);console.log(t),a.setState({bottomTBVisible:"hidden",topTBVisible:""}),e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a.handleOnCancel=function(){a.props.handlers.handleOnCancel(),a.setState({bottomTBVisible:"hidden",topTBVisible:""});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.project;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.state.topTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnAdd},n.a.createElement(k.a,{icon:"plus"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnEdit},n.a.createElement(k.a,{icon:"edit"})))))),n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"txtPrjName",label:"Project Name",type:"text",value:e.prjName,onChange:this.props.handlers.handleProjectNameChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtPrjCode",label:"Project Code",type:"text",value:e.prjCode,onChange:this.props.handlers.handleProjectCodeChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtPrjDesc",label:"Description",type:"text",value:e.prjDescription,onChange:this.props.handlers.handleProjectDescriptionChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtClName",label:"Client Name",type:"text",value:e.clientName,onChange:this.props.handlers.handleClientNameChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement("div",{className:this.state.bottomTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"success",onClick:this.handleOnSave},n.a.createElement(k.a,{icon:"save"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"danger",onClick:this.handleOnCancel},n.a.createElement(k.a,{icon:"ban"})))))))}}]),t}(s.Component),Nt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.contract;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"txtContName",label:"Contract Name",type:"text",value:e.contName,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtContCode",label:"Contract Code",type:"text",value:e.contCode,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtContDesc",label:"Description",type:"text",value:e.Description,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtContEmail",label:"Contact Email",type:"text",value:e.contactEmails,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtContPerson",label:"Contact Person",type:"text",value:e.contactPerson,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtEffectiveDate",label:"Effective Date",type:"text",value:e.effectDate,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtExpiryDate",label:"Expiry Date",type:"text",value:e.expiryDate,flgDisabled:"disabled",error:this.state.error}))}}]),t}(s.Component),Pt=a(37),Rt=function(e){var t=e.name,a=e.data,r=e.flgDisabled,o=e.handleSelection,i=Object(s.useState)(!1),l=Object(Pt.a)(i,2),c=l[0],d=l[1];return n.a.createElement("div",{className:"form-group row fieldContainer",style:{marginTop:"0"}},n.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},"disabled"!=r?n.a.createElement("button",{className:"form-control",style:{height:"25px",lineHeight:"10px",fontSize:"10px",fontWeight:"bolder",border:"solid 1px black"},onClick:function(){return d(!c)}},"Locations List "+(c?"\u25b2":"\u25bc")):""),c?n.a.createElement("select",{id:"sel"+t,size:5,className:"form-control",onChange:o,style:{fontSize:"10px"}},a.map(function(e){return n.a.createElement("option",{value:e},e)})):"")},At=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:"",bottomTBVisible:"hidden",topTBVisible:"",flags:{isAdd:!1,isEdit:!1}},a.handleOnAdd=function(){a.props.handlers.handleOnAdd(),a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1,a.setState({flags:e})},a.handleOnEdit=function(){a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0,a.setState({flags:e})},a.handleOnSave=Object(L.a)(I.a.mark(function e(){var t,s;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(i.a)({},a.state.flags),e.next=3,a.props.handlers.handleOnSave(t);case 3:s=e.sent,console.log("Saving Asset",s),"Ok"===s.Success&&(a.setState({bottomTBVisible:"hidden",topTBVisible:""}),t.isAdd=!1,t.isEdit=!1,a.setState({flags:t}));case 6:case"end":return e.stop()}},e,this)})),a.handleOnCancel=function(){a.props.handlers.handleOnCancel(),a.setState({bottomTBVisible:"hidden",topTBVisible:""});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.asset;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.state.topTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnAdd},n.a.createElement(k.a,{icon:"plus"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnEdit},n.a.createElement(k.a,{icon:"edit"})))))),n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"txtAsstTitle",label:"Asset Title",type:"text",value:e.Title,onChange:this.props.handlers.handleAssetTitleChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"chkPool",label:"Is a Pool?",type:"checkbox",value:e.pool,onChange:this.props.handlers.handleAssetPoolChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"chkAssetEquip",label:"Is an Asset Equipment?",type:"checkbox",value:e.assetEquip,onChange:this.props.handlers.handleAssetAssetEquipChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtAsstLocation",label:"Location",type:"text",value:e.Location,onChange:this.props.handlers.handleAssetLocationChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Rt,{name:"Locations",data:this.props.locations,handleSelection:this.props.handlers.handleAssetLocationSelect,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled"}),n.a.createElement(ie,{name:"txtAsstDetails",label:"Details",type:"text",value:e.Description,onChange:this.props.handlers.handleAssetDescriptionChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtAsstCount",label:"Count",type:"number",value:e.Count,onChange:this.props.handlers.handleAssetCountChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtAsstSerialNo",label:"Serial Number",type:"text",value:e.serialNo?e.serialNo:"",onChange:this.props.handlers.handleAssetSNoChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtAsstRemarks",label:"Remarks",type:"text",value:e.Remarks,onChange:this.props.handlers.handleAssetRemarksChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement("div",{className:this.state.bottomTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"success",onClick:this.handleOnSave},n.a.createElement(k.a,{icon:"save"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"danger",onClick:this.handleOnCancel},n.a.createElement(k.a,{icon:"ban"})))))))}}]),t}(s.Component),Dt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:"",bottomTBVisible:"hidden",topTBVisible:"",flags:{isAdd:!1,isEdit:!1}},a.handleOnAdd=function(){a.props.handlers.handleOnAdd(),a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1,a.setState({flags:e})},a.handleOnEdit=function(){a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0,a.setState({flags:e})},a.handleOnSave=function(){var e=Object(i.a)({},a.state.flags),t=a.props.handlers.handleOnSave(e);console.log(t),a.setState({bottomTBVisible:"hidden",topTBVisible:""}),e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a.handleOnCancel=function(){a.props.handlers.handleOnCancel(),a.setState({bottomTBVisible:"hidden",topTBVisible:""});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.mainLog;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.state.topTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnAdd},n.a.createElement(k.a,{icon:"plus"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnEdit},n.a.createElement(k.a,{icon:"edit"})))))),n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"txtMainLogId",label:"Maintenance Log ID",type:"text",value:e.logId,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"dtMainLogDate",label:"Maintenance Log Date",type:"date",value:e.logDate,onChange:this.props.handlers.handleMainLogDateChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtMainLogPeromedBy",label:"Maintenance Performed By",type:"text",value:e.logPerformedBy,onChange:this.props.handlers.handleMainLogPerfromedByChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ne,{name:"txtMainLogDetails",label:"Maintenance Log Details",value:e.logDetails,onChange:this.props.handlers.handleMainLogDetailsChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error,rows:5}),n.a.createElement("div",{className:this.state.bottomTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"success",onClick:this.handleOnSave},n.a.createElement(k.a,{icon:"save"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"danger",onClick:this.handleOnCancel},n.a.createElement(k.a,{icon:"ban"})))))))}}]),t}(s.Component),Tt=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={fullClientsList:[],clientsList:[],projectsList:[],fullProjectsList:[],contractsList:[],fullContractsList:[],assetsItems:[],fullAssetsItems:[],assetsMaintLog:[],fullAssetsMaintLog:[],showClientsProcess:!0,showProjectsProcess:!1,showContractsProcess:!1,showAssetsProcess:!1,showMainLogProcess:!1,showFormProcess:"hidden",selectedClient:"",selectedProject:"",selectedContract:"",selectedAsset:"",selectedMainLog:"",visibileColumns:{first:0,last:2},visibilityFlags:["","","","hidden","hidden"],propControl:"",propControlTitle:"Client",client:{clName:"",clEmail:"",clContactName:"",clContactNumber:"",clAddress:"",SitesCount:0},project:{prjName:"",prjCode:"",prjDescription:"",clientName:""},asset:{Title:"",pool:!1,assetEquip:!1,Description:"",Location:"",Count:0,serialNo:"",Remarks:""},contract:{contName:"",contCode:"",Description:"",contactEmails:"",contactPerson:"",effectDate:"",expiryDate:""},mainLog:{logId:"",logDate:"",logDetails:"",logPerformedBy:""},uprofile:{},locations:[]},a.handleGoLeft=function(){var e=Object(i.a)({},a.state.visibileColumns),t=Object(z.a)(a.state.visibilityFlags);if(0!==e.first){for(var s=0;s<a.state.visibilityFlags.length;s++)s>=e.first-1&&s<=e.last-1?t[s]="":t[s]="hidden";--e.first,--e.last,a.setState({visibileColumns:e,visibilityFlags:t})}},a.handleGoRight=function(){var e=Object(i.a)({},a.state.visibileColumns),t=Object(z.a)(a.state.visibilityFlags);if(e.last!==t.length-1){for(var s=0;s<a.state.visibilityFlags.length;++s)s>=e.first+1&&s<=e.last+1?t[s]="":t[s]="hidden";++e.first,++e.last,a.setState({visibileColumns:e,visibilityFlags:t})}},a.clientFormHandlers={handleClientNameChange:function(e){var t=Object(i.a)({},a.state.client);t.clName=e.currentTarget.value,a.setState({client:t})},handleClientEmailChange:function(e){var t=Object(i.a)({},a.state.client);t.clEmail=e.currentTarget.value,a.setState({client:t})},handleContactNameChange:function(e){var t=Object(i.a)({},a.state.client);t.clContactName=e.currentTarget.value,a.setState({client:t})},handleContactNumberChange:function(e){var t=Object(i.a)({},a.state.client);t.clContactNumber=e.currentTarget.value,a.setState({client:t})},handleAddressChange:function(e){var t=Object(i.a)({},a.state.client);t.clAddress=e.currentTarget.value,a.setState({client:t})},handleOnAdd:function(){var e=Object(i.a)({},a.state.client);e.clName="",e.clEmail="",e.clContactName="",e.clContactNumber="",e.clAddress="",a.setState({client:e})},handleOnCancel:function(){et(a.state.selectedClient).then(function(e){var t=Object(z.a)(e.Result),s=Object(i.a)({},t[0]);a.setState({client:s})}).catch(function(e){console.log(e)})},handleOnSave:function(e){a.setState({showFormProcess:""});var t=Object(i.a)({},a.state.client);e.isAdd?tt(t).then(function(e){var s=Object(z.a)(a.state.clientsList);return s.push(t),s=s.sort(function(e,t){var a=e.clName.toLowerCase(),s=t.clName.toLowerCase();return a<s?-1:a>s?1:0}),a.setState({clientsList:s,showFormProcess:"hidden"}),T.toast.success("New Client Saved Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)}):at(t).then(function(e){return a.setState({showFormProcess:"hidden"}),T.toast.success("Exitsing Client Updated Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)})}},a.projectFormHandlers={handleProjectNameChange:function(e){var t=Object(i.a)({},a.state.project);t.prjName=e.currentTarget.value,a.setState({project:t})},handleProjectCodeChange:function(e){var t=Object(i.a)({},a.state.project);t.prjCode=e.currentTarget.value,a.setState({project:t})},handleProjectDescriptionChange:function(e){var t=Object(i.a)({},a.state.project);t.prjDescription=e.currentTarget.value,a.setState({project:t})},handleClientNameChange:function(e){var t=Object(i.a)({},a.state.project);t.clientName=e.currentTarget.value,a.setState({project:t})},handleOnAdd:function(){var e=Object(i.a)({},a.state.project);e.prjName="",e.prjCode="",e.prjDescription="",e.clientName=a.state.selectedClient,a.setState({project:e})},handleOnCancel:function(){st(a.state.selectedProject).then(function(e){var t=Object(z.a)(e.Result),s=Object(i.a)({},t[0]);a.setState({project:s})}).catch(function(e){console.log(e)})},handleOnSave:function(e){a.setState({showFormProcess:""});var t=Object(i.a)({},a.state.project);e.isAdd?nt(t).then(function(e){var s=Object(z.a)(a.state.projectsList);return s.push(t),s=s.sort(function(e,t){var a=e.prjName.toLowerCase(),s=t.prjName.toLowerCase();return a<s?-1:a>s?1:0}),a.setState({projectsList:s,showFormProcess:"hidden"}),T.toast.success("New Project Saved Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)}):rt(t).then(function(e){return a.setState({showFormProcess:"hidden"}),T.toast.success("Exitsing Project Updated Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)})}},a.assetFormHandlers={handleAssetTitleChange:function(e){var t=Object(i.a)({},a.state.asset);t.Title=e.currentTarget.value,a.setState({asset:t})},handleAssetPoolChange:function(e){var t=Object(i.a)({},a.state.asset);t.pool=e.currentTarget.checked,a.setState({asset:t})},handleAssetAssetEquipChange:function(e){var t=Object(i.a)({},a.state.asset);console.log("Asset Handler: ",t),t.assetEquip=e.currentTarget.checked,a.setState({asset:t})},handleAssetLocationChange:function(e){var t=Object(i.a)({},a.state.asset);t.Location=e.currentTarget.value,a.setState({asset:t})},handleAssetLocationSelect:function(e){var t=Object(i.a)({},a.state.asset);t.Location=e.currentTarget.value,a.setState({asset:t})},handleAssetDescriptionChange:function(e){var t=Object(i.a)({},a.state.asset);t.Description=e.currentTarget.value,a.setState({asset:t})},handleAssetCountChange:function(e){var t=Object(i.a)({},a.state.asset);t.Count=e.currentTarget.value,a.setState({asset:t})},handleAssetRemarksChange:function(e){var t=Object(i.a)({},a.state.asset);t.Remarks=e.currentTarget.value,a.setState({asset:t})},handleAssetSNoChange:function(e){var t=Object(i.a)({},a.state.asset);t.serialNo=e.currentTarget.value,a.setState({asset:t})},handleOnAdd:function(){var e=Object(i.a)({},a.state.asset);e.Title="",e.pool=!1,e.assetEquip=!1,e.Location="",e.Description="",e.Count=0,e.serialNo="",e.Remarks="",a.setState({asset:e})},handleOnCancel:function(){var e=a.state,t=e.selectedProject,s=e.selectedContract,n=e.selectedAsset;if(""!==n)ot(t,s,n).then(function(e){var t=Object(i.a)({},e.Result);a.setState({asset:t})}).catch(function(e){console.log(e)});else{a.setState({asset:{Title:"",pool:!1,assetEquip:!1,Description:"",Location:"",Count:0,serialNo:"",Remarks:""}})}},handleOnSave:function(){var e=Object(L.a)(I.a.mark(function e(t){var s,n,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({showFormProcess:""}),s=Object(i.a)({},a.state.asset),n=a.state.selectedProject,r=a.state.selectedContract,!t.isAdd){e.next=8;break}return e.abrupt("return",it(n,r,s).then(function(e){if("Ok"===e.Success){var t=Object(z.a)(a.state.assetsItems);t.push(s),t=t.sort(function(e,t){var a=e.Title.toLowerCase(),s=t.Title.toLowerCase();return a<s?-1:a>s?1:0}),a.setState({assetsItems:t,showFormProcess:"hidden"}),T.toast.success("New Asset Saved Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}else T.toast.warn(e.FailReason,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),a.setState({showFormProcess:"hidden"});return e}).catch(function(e){return console.log(e),e}));case 8:return e.abrupt("return",lt(n,r,s).then(function(e){return a.setState({showFormProcess:"hidden"}),T.toast.success("Exitsing Asset Updated Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){return console.log(e),e}));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},a.mainLogFormHandlers={handleMainLogDateChange:function(e){var t=Object(i.a)({},a.state.mainLog);t.logDate=e.currentTarget.value,a.setState({mainLog:t})},handleMainLogPerfromedByChange:function(e){var t=Object(i.a)({},a.state.mainLog);t.logPerformedBy=e.currentTarget.value,a.setState({mainLog:t})},handleMainLogDetailsChange:function(e){var t=Object(i.a)({},a.state.mainLog);t.logDetails=e.currentTarget.value,a.setState({mainLog:t})},handleOnAdd:function(){var e=Object(i.a)({},a.state.mainLog);e.logId="",e.logDate="",e.logPerformedBy="",e.logDetails="",a.setState({mainLog:e})},handleOnCancel:function(){var e=a.state,t=e.selectedClient,s=e.selectedProject,n=e.selectedContract,r=e.selectedAsset,o=e.selectedMainLog;pt(t,s,n,r,o).then(function(e){var t=Object(i.a)({},e.Result);a.setState({mainLog:t})}).catch(function(e){console.log(e)})},handleOnSave:function(e){a.setState({showFormProcess:""});var t=Object(i.a)({},a.state.mainLog),s=a.state.selectedClient,n=a.state.selectedProject,r=a.state.selectedContract,o=a.state.selectedAsset;e.isAdd?ht(s,n,r,o,t).then(function(e){t=Object(i.a)({},e.Result);var s=Object(z.a)(a.state.assetsMaintLog);return s.push(t),s=s.sort(function(e,t){var a=e.logId.toLowerCase(),s=t.logId.toLowerCase();return a<s?-1:a>s?1:0}),a.setState({assetsMaintLog:s,showFormProcess:"hidden",mainLog:t}),T.toast.success("New Asset Log Saved Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)}):mt(s,n,r,o,t).then(function(e){return a.setState({showFormProcess:"hidden"}),T.toast.success("Exitsing Asset Log Updated Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)})}},a.handleClientColumnClick=function(){var e=Object(i.a)({},a.state.client);e.clName="",e.clEmail="",e.clContactName="",e.clContactNumber="",e.clAddress="",a.setState({propControl:"ClientForm",propControlTitle:"Client",client:e})},a.handleOnClientClick=function(e){a.setState({showProjectsProcess:!0}),a.setState({projectsList:[],contractsList:[],assetsItems:[],assetsMaintLog:[],selectedProject:"",selectedContract:"",selectedAsset:"",selectedMainLog:""});var t=e;He(e).then(function(s){var n=[],r=[];0!==s.Result.length&&s.Result.map(function(e){var t={prjName:e.name};n.push(t),r.push(t)}),et(e).then(function(e){var t=Object(z.a)(e.Result),s=Object(i.a)({},t[0]);a.setState({client:s})}).catch(function(e){console.log(e)}),a.setState({projectsList:n,fullProjectsList:r,selectedClient:t}),a.setState({showProjectsProcess:!1}),a.setState({propControl:"ClientForm",propControlTitle:"Client"})}).catch(function(e){console.log(e)})},a.handleProjectColumnClick=function(){if(""===a.state.selectedClient)T.toast.warn("You did not select a client!");else{var e=Object(i.a)({},a.state.project);e.prjName="",e.prjCode="",e.prjDescription="",e.clientName="",a.setState({propControl:"ProjectForm",propControlTitle:"Project",project:e})}},a.handleOnProjectClick=function(e){a.setState({showContractsProcess:!0}),a.setState({contractsList:[],assetsItems:[],assetsMaintLog:[]});var t=e;Ue(e).then(function(s){var n=[],r=[];0!==s.Result.length&&s.Result.map(function(e){var t={contName:e.name};n.push(t),r.push(t)}),st(e).then(function(e){var t=Object(z.a)(e.Result),s=Object(i.a)({},t[0]);a.setState({project:s})}).catch(function(e){console.log(e)}),a.setState({contractsList:n,fullContractsList:r,selectedProject:t,propControl:"ProjectForm",propControlTitle:"Project"}),a.setState({showContractsProcess:!1})}).catch(function(e){console.log(e)})},a.handleContractColumnClick=function(){if(""===a.state.selectedProject)T.toast.warn("You did not select a project!");else{var e=Object(i.a)({},a.state.contract);e.contName="",e.contCode="",e.Description="",e.contactPerson="",e.contactEmails="",e.effectDate="",e.expiryDate="",a.setState({propControl:"ContractForm",propControlTitle:"Contract",contract:e})}},a.handleOnContractClick=function(e){a.setState({showAssetsProcess:!0}),a.setState({assetsItems:[],assetsMaintLog:[]});var t=e,s=a.state.selectedProject;ct(s,e).then(function(e){var s=[],n=[],r=[];if(0!==e.Result.length){e.Result.map(function(e){var t={Title:e.Title};s.push(t),n.push(t)});var o=e.Result.filter(function(e){return!e.assetEquip});r=Object(z.a)(new Set(o.map(function(e){return e.Title})))}dt(a.state.selectedProject,t).then(function(e){var t=Object(i.a)({},e.Result);a.setState({contract:t})}).catch(function(e){console.log(e)}),a.setState({assetsItems:s,fullAssetsItems:n,selectedContract:t,locations:r,propControl:"ContractForm",propControlTitle:"Contract"}),a.setState({showAssetsProcess:!1})}).catch(function(e){console.log(e)}),a.state.visibileColumns.last<3&&a.handleGoRight()},a.handleOnAssetClick=function(e){a.setState({showMainLogProcess:!0}),a.setState({assetsMaintLog:[]});var t=e,s=a.state.selectedClient,n=a.state.selectedProject,r=a.state.selectedContract;ut(s,n,r,t).then(function(e){var s=[];0!==e.Result.length&&(console.log(e.Result),e.Result.map(function(e){var t={logId:e.logId};s.push(t)})),ot(n,r,t).then(function(e){var t=Object(i.a)({},e.Result);a.setState({asset:t})}).catch(function(e){console.log(e)}),a.setState({selectedAsset:t,assetsMaintLog:s,propControl:"AssetForm",propControlTitle:"Asset"}),a.setState({showMainLogProcess:!1})}).catch(function(e){console.log(e)}),a.state.visibileColumns.last<3&&a.handleGoRight(),a.state.visibileColumns.last<4&&a.handleGoRight()},a.handleAssetsColumnClick=function(){if(""===a.state.selectedContract)T.toast.warn("You did not select a contract!");else{var e=Object(i.a)({},a.state.asset);e={Title:"",Description:"",Location:"",Count:0,Remarks:""},a.setState({propControl:"AssetForm",propControlTitle:"Asset",asset:e})}},a.handleMainLogColumnClick=function(){if(""===a.state.selectedAsset)T.toast.warn("You did not select an asset!");else{var e=Object(i.a)({},a.state.mainLog);e={logId:"",logDate:"",logDetails:"",logPerformedBy:""},a.setState({propControl:"MainLogForm",propControlTitle:"Maintenance Log",mainLog:e})}},a.handleOnMainLogClick=function(e){a.setState({showMainLogProcess:!0}),a.setState({mainLog:{}});var t=e,s=a.state.selectedClient,n=a.state.selectedProject,r=a.state.selectedContract,o=a.state.selectedAsset;pt(s,n,r,o,t).then(function(e){var s=e.Result;a.setState({selectedMainLog:t,mainLog:s,propControl:"MainLogForm",propControlTitle:"Maintenance Log"}),a.setState({showMainLogProcess:!1})}).catch(function(e){console.log(e)}),a.state.visibileColumns.last<4&&a.handleGoRight()},a.handleOnClientSearch=function(e){var t=Object(z.a)(a.state.fullClientsList).filter(function(t){return-1!==t.clName.toLowerCase().indexOf(e.currentTarget.value.toLowerCase())});a.setState({clientsList:t})},a.handleOnProjectSearch=function(e){var t=Object(z.a)(a.state.fullProjectsList).filter(function(t){return-1!==t.prjName.toLowerCase().indexOf(e.currentTarget.value.toLowerCase())});a.setState({projectsList:t})},a.handleOnContractSearch=function(e){var t=Object(z.a)(a.state.fullContractsList).filter(function(t){return-1!==t.contName.toLowerCase().indexOf(e.currentTarget.value.toLowerCase())});a.setState({contractsList:t})},a.handleOnAssetSearch=function(e){var t=Object(z.a)(a.state.fullAssetsItems).filter(function(t){return-1!==t.title.toLowerCase().indexOf(e.currentTarget.value.toLowerCase())});a.setState({assetsItems:t})},a.renderProperties=function(){switch(a.state.propControl){case"ClientForm":return n.a.createElement(yt,{client:a.state.client,handlers:a.clientFormHandlers,showFormProcess:a.state.showFormProcess});case"ProjectForm":return n.a.createElement(wt,{project:a.state.project,handlers:a.projectFormHandlers,showFormProcess:a.state.showFormProcess});case"AssetForm":return n.a.createElement(At,{asset:a.state.asset,locations:a.state.locations,handlers:a.assetFormHandlers,showFormProcess:a.state.showFormProcess});case"ContractForm":return n.a.createElement(Nt,{contract:a.state.contract,showFormProcess:a.state.showFormProcess});case"MainLogForm":return n.a.createElement(Dt,{mainLog:a.state.mainLog,handlers:a.mainLogFormHandlers,showFormProcess:a.state.showFormProcess})}};var s=sessionStorage.token,r=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=r,a.state.showClientsProcess=!0,Me().then(function(e){var t=[],s=[];e.Result.map(function(e){var a={clName:e};t.push(a),s.push(a)}),a.setState({propControl:"ClientForm"}),a.setState({clientsList:t,fullClientsList:s}),a.setState({showClientsProcess:!1})}).catch(function(e){console.log(e)}),a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"col-md-12"},n.a.createElement(A,{title:"Clients and Contracts Assets Management",bgColor:"white",color:"gray"}),n.a.createElement("div",{className:"col-md-8"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-4 "+this.state.visibilityFlags[0],style:kt,onClick:this.handleClientColumnClick},n.a.createElement("div",{className:"col-md-12",style:xt},"Clients"),n.a.createElement("div",{className:"col-md-12",style:Ft},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnClientSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"clName",label:"clName",selected:this.state.selectedClient,showList:!0,onClick:this.handleOnClientClick,data:this.state.clientsList,showProcess:this.state.showClientsProcess}))),n.a.createElement("div",{className:"col-md-4 "+this.state.visibilityFlags[1],onClick:this.handleProjectColumnClick,style:kt},n.a.createElement("div",{className:"col-md-12",style:xt},"Projects"),n.a.createElement("div",{className:"col-md-12",style:Ft},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnProjectSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"prjName",label:"prjName",selected:this.state.selectedProject,showList:!0,onClick:this.handleOnProjectClick,data:this.state.projectsList,showProcess:this.state.showProjectsProcess}))),n.a.createElement("div",{className:"col-md-4 "+this.state.visibilityFlags[2],style:kt,onClick:this.handleContractColumnClick},n.a.createElement("div",{className:"col-md-12",style:xt},"Contracts"),n.a.createElement("div",{className:"col-md-12",style:Ft},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnContractSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"contName",label:"contName",selected:this.state.selectedContract,showList:!0,onClick:this.handleOnContractClick,data:this.state.contractsList,showProcess:this.state.showContractsProcess}))),n.a.createElement("div",{className:"col-md-4 "+this.state.visibilityFlags[3],style:kt,onClick:this.handleAssetsColumnClick},n.a.createElement("div",{className:"col-md-12",style:xt},"Assets"),n.a.createElement("div",{className:"col-md-12",style:Ft},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnAssetSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"Title",label:"Title",selected:this.state.selectedAsset,showList:!0,onClick:this.handleOnAssetClick,data:this.state.assetsItems,showProcess:this.state.showAssetsProcess}))),n.a.createElement("div",{className:"col-md-4 "+this.state.visibilityFlags[4],style:kt,onClick:this.handleMainLogColumnClick},n.a.createElement("div",{className:"col-md-12",style:xt},"Maintainance Log"),n.a.createElement("div",{className:"col-md-12",style:Ft},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnMainLogSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"logId",label:"logId",selected:this.state.selectedMainLog,showList:!0,data:this.state.assetsMaintLog,onClick:this.handleOnMainLogClick,showProcess:this.state.showMainLogProcess})))),n.a.createElement("div",{className:"row",style:{height:"5vh",backgroundColor:"lightblue",borderRadius:"25px"}},n.a.createElement("div",{className:"col-md-1"},n.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:this.handleGoLeft},n.a.createElement(k.a,{icon:"chevron-left"}))),n.a.createElement("div",{className:"col-md-10"}),n.a.createElement("div",{className:"col-md-1",onClick:this.handleGoRight},n.a.createElement("button",{className:"btn btn-sm btn-primary"},n.a.createElement(k.a,{icon:"chevron-right"}))))),n.a.createElement("div",{className:"col-md-4",style:Bt},n.a.createElement("div",{className:"col-md-12",style:It},this.state.propControlTitle+" Properties"),this.renderProperties()),n.a.createElement(T.ToastContainer,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(s.Component),kt={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"70vh"},Bt={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"75vh",backgroundColor:"lightgray",overflow:"auto"},xt={color:"blue",fontSize:"1vw",fontWeight:"bold",borderBottom:"solid",borderColor:"lightgray",borderWidth:1,paddingTop:"10px",marginBottom:"10px",textAlign:"left"},Ft={fontSize:"0.75vw",borderBottom:"solid",borderColor:"lightgray",borderWidth:1,paddingTop:"5px",paddingBottom:"5px",marginBottom:"10px",textAlign:"left"},It={color:"blue",fontSize:"1vw",fontWeight:"bold",borderBottom:"solid",borderColor:"gray",borderWidth:1,paddingTop:"10px",marginBottom:"10px",textAlign:"left"},Lt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={fields:{Description:"",Manning:0,Value:0}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.onSubmit,s=e.onCancel,r=e.data,o=e.flags,i=e.errors,l=e.showProcess,c=e.showButtons;return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{style:{marginTop:"10px"}},n.a.createElement(ie,{name:"Description",label:"Service Description:",type:"text",onChange:t,value:r.Description,flgDisabled:o.isAdd?"":"disabled",error:i.Description?i.Description:""}),n.a.createElement(ie,{name:"Manning",label:"Manning:",onChange:t,value:r.Manning,flgDisabled:o.isAdd||o.isEdit?"":"disabled",error:i.Manning?i.Manning:""}),n.a.createElement(ie,{name:"Value",label:"Value:",onChange:t,value:r.Value,flgDisabled:o.isAdd||o.isEdit?"":"disabled",error:i.Value?i.Value:""}),n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",className:l?"":"hidden",style:{marginTop:"2vh"}}),n.a.createElement("div",{className:"btn-toolbar btnToobar"+((o.isAdd||o.isEdit)&&c?"":" hidden")},n.a.createElement("div",{className:"btn-group btn-group-justified"},n.a.createElement("button",{type:"button",className:"btn btn-primary",style:{width:"50%"},onClick:function(){return a()}},n.a.createElement(k.a,{icon:"save"})),n.a.createElement("button",{type:"button",className:"btn btn-danger",style:{width:"50%"},onClick:function(){return s()}},n.a.createElement(k.a,{icon:"ban"}))))))}}]),t}(s.Component);Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a};var Vt=function(){var e=Object(L.a)(I.a.mark(function e(){var t,a,s,n,r,o,i,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a="",s="","",n="",r=W.a.firestore(),o={timestampsInSnapshots:!0},r.settings(o),i=r.collection("Accounts").doc("Project Services").collection("Services"),l=[],e.abrupt("return",i.get().then(function(e){return e.docs.length>0?(e.forEach(function(e){var t={Description:e.id};l.push(t)}),t="Ok",a=l):(t="No",a=[],n="No Services were found. Returning empty list."),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a=[],n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Wt=function(e){var t="",a="",s="",n="",r=W.a.firestore().collection("Accounts").doc("Project Services").collection("Services"),o=Object(i.a)({},e);return r.doc(e.Description).set(o).then(function(e){return{Success:t="Ok",Result:a=o,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a={},n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}})},Mt=function(e){var t="",a="",s="",n="",r=W.a.firestore().collection("Accounts").doc("Project Services").collection("Services"),o=Object(i.a)({},e);return r.doc(e.Description).get().then(function(i){return i.exists?r.doc(e.Description).update(o):{Success:t="No",Result:a={},FailReason:n="Project Service do not exist.",Error:s,Warning:""}}).then(function(e){return{Success:t="Ok",Result:a=o,FailReason:n,Error:s,Warning:""}}).catch(function(e){return console.log("ERROR: ",e),t="No",a={},n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}})},Ht=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),i={timestampsInSnapshots:!0},o.settings(i),l=o.collection("Accounts").doc("Project Services").collection("Services").doc(t),[],e.abrupt("return",l.get().then(function(e){return e.exists?(a="Ok",s=e.data()):(a="No",s={},r="No Services were found. Returning empty list."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s={},r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ut=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={services:[],result:{},buttonsOptions:{addButton:{showAdd:!0,onAdd:function(){return a.handleAdd()}},editButton:{showEdit:!1,onEdit:function(){return a.handleEdit()}},deleteButton:{showDelete:!1,onDelete:null},refreshButton:{showRefresh:!0,onRefresh:function(){return a.handleRefresh()}},searchButton:{showSearch:!0,onSearch:null}},listProcess:!0,listVisible:!1,formProcess:!1,formVisible:!0,service:{Description:"",Manning:0,Value:0},flags:{isAdd:!1,isEdit:!1},showmodal:!1,errors:{},uprofile:{}},a.schema={Description:K.a.string().required().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("Service Description"),Manning:K.a.number().integer().min(0).default(0).label("Service Manning"),Value:K.a.number().integer().min(0).default(0).label("Service Value")},a.handleCloseModal=function(){a.setState({showmodal:!1})},a.handleListUpdated=function(){a.setState({listProcess:!1,listVisible:!0})},a.handleSubmit=function(){var e=a.validateFields();a.setState({errors:e||{}});a.setState({formProcess:!0,formVisible:!1}),e||(a.state.flags.isAdd?Wt(a.state.service).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;var s=Object(z.a)(a.state.services);s.push(a.state.service),s=_.a.orderBy(s,["Description"]),console.log(s);a.setState({result:e,flags:t,services:s,formProcess:!1,formVisible:!0})}else{var n=Object(i.a)({},a.state.flags);n.isAdd=!1,n.isEdit=!1;a.setState({service:{},flags:n,result:e,formProcess:!1,formVisible:!0})}}).catch(function(e){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,service:{},flags:t,formProcess:!1,formVisible:!0})}):a.state.flags.isEdit&&Mt(a.state.service).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,flags:t,formProcess:!1,formVisible:!0})}else{var s=Object(i.a)({},a.state.flags);s.isAdd=!1,s.isEdit=!1;a.setState({service:{},flags:s,result:e,formProcess:!1,formVisible:!0})}}).catch(function(e){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,service:{},flags:t,formProcess:!1,formVisible:!0})}))},a.handleAdd=function(){var e=Object(i.a)({},a.state.service),t=Object(i.a)({},a.state.flags),s=Object(i.a)({},a.state.buttonsOptions);e.Description="",e.Manning=0,e.Value=0,t.isAdd=!0,t.isEdit=!1,s.showEdit=!1,a.setState({service:e,flags:t,buttonsOptions:s})},a.handleEdit=function(){var e=Object(i.a)({},a.state.flags);e.isEdit=!0,e.isAdd=!1,a.setState({flags:e})},a.handleCancel=function(){a.setState({flags:{isAdd:!1,isEdit:!1},errors:{}})},a.handleChange=function(e){var t=e.currentTarget,s=t.name,n=t.value,r=Object(i.a)({},a.state.service);r[s]=n,a.setState({service:r})},a.handleServiceClick=function(e){Ht(e).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},e.Result);console.log(t);var s=Object(i.a)({},a.state.buttonsOptions);s.editButton.showEdit=!0,a.setState({result:e}),a.setState({service:t,buttonsOptions:s})}else{a.setState({service:{}})}}).catch(function(e){a.setState({result:e}),a.setState({service:{}})})},a.handleRefresh=function(){var e=Vt();a.setState({listProcess:!0}),a.setState({listVisible:!1}),e.then(function(e){a.setState({services:e.Result});var t=Object(i.a)({},a.state.service),s=Object(i.a)({},a.state.buttonsOptions);return t.Description="",t.Manning=0,t.Value=0,s.addButton.showAdd=!0,s.editButton.showEdit=!1,s.refreshButton.showRefresh=!0,s.deleteButton.showDelete=!1,a.setState({listProcess:!1,listVisible:!0,service:t,buttonsOptions:s}),a.setState({result:e}),e}).catch(function(e){var t=Object(i.a)({},a.state.service);return t.Description="",t.Manning=0,t.Value=0,a.setState({listProcess:!1,listVisible:!0,service:t,services:[],result:e,showmodal:!0}),e})},a.validateFields=function(){var e={},t=K.a.validate(a.state.service,a.schema,{abortEarly:!1});if(!t.error)return null;var s=!0,n=!1,r=void 0;try{for(var o,i=t.error.details[Symbol.iterator]();!(s=(o=i.next()).done);s=!0){var l=o.value;e[l.path[0]]=l.message}}catch(c){n=!0,r=c}finally{try{s||null==i.return||i.return()}finally{if(n)throw r}}return 0===Object.keys(e).length?null:e};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(L.a)(I.a.mark(function e(){var t,a=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Vt(),this.setState({listProcess:!0}),this.setState({listVisible:!1}),t.then(function(e){return a.setState({services:e.Result}),a.setState({result:e}),a.setState({listProcess:!1}),a.setState({listVisible:!0}),e}).catch(function(e){return a.setState({services:[]}),a.setState({result:e}),a.setState({listProcess:!1}),a.setState({listVisible:!0}),a.setState({showmodal:!0}),e});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{title:"Contracts Services Master Setting",bgColor:"white",color:"gray"}),n.a.createElement("div",{className:"col-md-3 leftCol"},n.a.createElement(se,{buttonsOptions:this.state.buttonsOptions}),n.a.createElement(Se,{data:this.state.services,name:"Description",label:"Description",value:"Description",showProcess:this.state.listProcess,showList:this.state.listVisible,onClick:this.handleServiceClick})),n.a.createElement("div",{className:"col-md-9 rightCol"},n.a.createElement(Lt,{onChange:this.handleChange,onSubmit:this.handleSubmit,onCancel:this.handleCancel,data:this.state.service,flags:this.state.flags,errors:this.state.errors,showProcess:this.state.formProcess,showButtons:this.state.formVisible})))}}]),t}(s.Component),Gt=a(27);Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a};var Jt=function(e){var t="",a=0,s=e.jcDate,n=e.jcTime,r=e.jcTicketNum,o=e.jcPrjName,i=e.jcContName,l=e.jcDetails,c=e.jcStatus,d={},u="",h="",m="",p="",g=W.a.firestore(),f=g.collection("Maintenance");return f.doc("Jobs").get().then(function(e){if(e.exists){a=e.data().JobNumber,t="JC"+a.pad(6,"0");var g=new Date(s),b=g.getMonth()+1,v=g.getFullYear();return d={jcNumber:t,jcDate:s,jcMonth:b,jcYear:v,jcTime:n,jcTicketNum:r,jcPrjName:o,jcContName:i,jcDetails:l,jcStatus:c},f.doc("Jobs").collection("JobCards").doc(t).set(d)}return{Success:u="No",Result:h={},FailReason:p="Could not create new Job Card Number. Action aborted.",Error:m,Warning:""}}).then(function(e){return f.doc("Jobs").set({JobNumber:a+1})}).then(function(e){return g.collection("Projects").doc(o).collection("Contracts").doc(i).get()}).then(function(e){if(e.exists)return!0}).then(function(e){return{Success:u="Ok",Result:h=d,FailReason:p,Error:m,Warning:""}}).catch(function(e){u="No",h={},p="Error",m=e.message;var t={Success:u,Result:h,FailReason:p,Error:m,Warning:""};return console.log(t),t})},qt=function(e){var t=e.jcNumber,a=e.jcDetails,s=e.jcStatus,n="",r="",o="",i="",l=W.a.firestore().collection("Maintenance").doc("Jobs").collection("JobCards");return l.doc(t).get().then(function(e){return e.exists?l.doc(t).update({jcDetails:a,jcStatus:s}):{Success:n="No",Result:r={},FailReason:i="Job Card Not Found. Action aborted.",Error:o,Warning:""}}).then(function(e){return{Success:n="Ok",Result:r=t,FailReason:i,Error:o,Warning:""}}).catch(function(e){n="No",r={},i="Error",o=e.message;var t={Success:n,Result:r,FailReason:i,Error:o,Warning:""};return console.log(t),t})},zt=function(){var e="",t="",a="",s="",n=[];return W.a.firestore().collection("Maintenance").doc("Jobs").collection("JobCards").get().then(function(r){return 0==r.docs.length?(e="No",t=[],s="There are no Job Cards found. Returning Empty List."):(r.forEach(function(e){var t={jcNumber:e.id,jcStatus:e.data().jcStatus};n.push(t)}),e="Ok",t=n),{Success:e,Result:t,FailReason:s,Error:a,Warning:""}}).catch(function(n){return e="No",t=[],s="Error",a=n.message,{Success:e,Result:t,FailReason:s,Error:a,Warning:""}})},Xt=function(e){var t="",a="",s="",n="";return W.a.firestore().collection("Maintenance").doc("Jobs").collection("JobCards").doc(e).get().then(function(e){return e.exists?(t="Ok",a=e.data(),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}):{Success:t="No",Result:a={},FailReason:n="Job Card do not exist.",Error:s,Warning:""}}).catch(function(e){return t="No",a={},n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}})},Zt=function(){var e=Object(L.a)(I.a.mark(function e(){var t,a,s,n,r,o,i,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a="",s="","",n="",r=W.a.firestore(),o={timestampsInSnapshots:!0},r.settings(o),i=r.collection("Projects"),l=[],e.abrupt("return",i.get().then(function(e){return e.docs.length>0?(e.forEach(function(e){var t={name:e.data().prjName,code:e.data().prjCode};l.push(t)}),t="Ok",a=l):(t="No",a=[],n="No Projects were found. Returning empty list."),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a="{}",n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),i={timestampsInSnapshots:!0},o.settings(i),l=o.collection("Projects").doc(t).collection("Contracts"),c=[],e.abrupt("return",l.get().then(function(e){return e.docs.length>0?(e.forEach(function(e){var t={name:e.data().contName,code:e.data().contCode};c.push(t)}),a="Ok",s=c):(a="No",s=[],r="No Contracts were found. Returning empty list."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s="{}",r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Kt=function(){var e="",t="",a="",s="",n=[];return W.a.firestore().collection("HelpDesk").get().then(function(r){return 0==r.docs.length?(e="No",t=[],s="There are no Tickets found. Returning Empty List."):(r.forEach(function(e){if("Closed"!==e.TicketStatus){var t={ticketNumber:e.id};n.push(t)}}),e="Ok",t=n),{Success:e,Result:t,FailReason:s,Error:a,Warning:""}}).catch(function(n){return e="No",t=[],s="Error",a=n.message,{Success:e,Result:t,FailReason:s,Error:a,Warning:""}})},Yt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={fields:{jcNumber:"",jcDate:"",jcDetails:"",jcMonth:0,jcYear:0,jcTime:"",jcTicketNum:"",jcStatus:"Pending",jcPrjName:"",jcContName:""},timeValues:["00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30"],time:[],contracts:[],status:[{Name:"Pending"},{Name:"Completed"}]},a.handleOnProjectChange=function(e){""!==e.currentTarget.value?(Qt(e.currentTarget.value).then(function(e){var t=[];e.Result.map(function(e){t.push({Name:e.name})}),console.log(t),a.setState({contracts:t})}),a.props.onChange(e)):a.setState({contracts:[]})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(z.a)(this.state.time);this.state.timeValues.map(function(t){e.push({Name:t})}),this.setState({time:e})}},{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.onSubmit,s=e.onCancel,r=e.data,o=e.flags,i=e.errors,l=e.showProcess,c=e.showButtons;return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{style:{marginTop:"10px"}},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{name:"jcNumber",label:"JC Number:",type:"text",onChange:t,value:r.jcNumber,flgDisabled:!0,error:i.jcNumber?i.jcNumber:""})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(oe,{name:"jcStatus",label:"JC Status:",type:"text",onChange:t,values:this.state.status,flgDisabled:o.isAdd||o.isEdit?"":"disabled",error:i.jcStatus?i.jcStatus:"",defValue:r.jcStatus}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{name:"jcDate",label:"JC Date:",type:"date",onChange:t,value:r.jcDate,flgDisabled:o.isAdd||o.isEdit?"":"disabled",error:i.jcDate?i.jcDate:""})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(oe,{name:"jcTime",label:"JC Time:",onChange:t,values:this.state.time,flgDisabled:o.isAdd||o.isEdit?"":"disabled",error:i.jcTime?i.jcTime:"",defValue:r.jcTime}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(oe,{name:"jcPrjName",label:"Project Name",values:this.props.projects,defValue:r.jcPrjName,onChange:this.handleOnProjectChange,flgDisabled:o.isAdd||o.isEdit?"":"disabled",error:i.jcPrjName?i.jcPrjName:""})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(oe,{name:"jcContName",label:"Contract Name",values:this.state.contracts,defValue:r.jcContName,onChange:t,flgDisabled:o.isAdd||o.isEdit?"":"disabled",error:i.jcContName?i.jcContName:""}))),n.a.createElement(oe,{name:"jcTicketNum",label:"Related Ticket #:",values:this.props.tickets,defValue:r.jcTicketNum,onChange:t,flgDisabled:o.isAdd||o.isEdit?"":"disabled",error:i.jcTicketNum?i.jcTicketNum:""}),n.a.createElement(ne,{name:"jcDetails",label:"JC Details:",rows:"10",onChange:t,value:r.jcDetails,flgDisabled:o.isAdd||o.isEdit?"":"disabled",error:i.jcDetails?i.jcDetails:""}),n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",className:l?"":"hidden",style:{marginTop:"2vh"}}),n.a.createElement("div",{className:"btn-toolbar btnToobar"+((o.isAdd||o.isEdit)&&c?"":" hidden")},n.a.createElement("div",{className:"btn-group btn-group-justified"},n.a.createElement("button",{type:"button",className:"btn btn-primary",style:{width:"50%"},onClick:function(){return a()}},n.a.createElement(k.a,{icon:"save"})),n.a.createElement("button",{type:"button",className:"btn btn-danger",style:{width:"50%"},onClick:function(){return s()}},n.a.createElement(k.a,{icon:"ban"}))))))}}]),t}(s.Component),_t=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={uprofile:{},jobcards:[],displayJC:[],projects:[],contracts:[],tickets:[],result:{},searchValue:"",buttonsOptions:{addButton:{showAdd:!0,onAdd:function(){return a.handleAdd()}},editButton:{showEdit:!1,onEdit:function(){return a.handleEdit()}},deleteButton:{showDelete:!1,onDelete:null},refreshButton:{showRefresh:!0,onRefresh:function(){return a.handleRefresh()}},searchButton:{showSearch:!0,onValueChange:function(){return a.handleSearchValueChange()},onSearch:function(){return a.handleSearch()}}},listProcess:!0,listVisible:!1,formProcess:!1,formVisible:!0,jobcard:{jcNumber:"",jcDate:"",jcDetails:"",jcMonth:1,jcYear:2018,jcTime:"",jcTicketNum:"",jcStatus:"Pending",jcPrjName:"",jcContName:""},flags:{isAdd:!1,isEdit:!1},showmodal:!1,errors:{}},a.schema={jcNumber:K.a.string().optional().allow("").regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("JC Number"),jcDate:K.a.string().required().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("JC Date"),jcDetails:K.a.string().required().regex(/^[a-zA-Z0-9\s\_\-\.\,\n\&\""\:]+$/,{name:"No Special Chars"}).label("JC Details"),jcMonth:K.a.number().integer().min(1).max(12).optional(),jcYear:K.a.number().integer().optional(),jcTime:K.a.string().required().regex(/^[a-zA-Z0-9\s\_\-\:]+$/,{name:"No Special Chars"}).label("JC Time"),jcTicketNum:K.a.string().optional().allow("").regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("JC Ticket #"),jcStatus:K.a.string().required().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("JC Status"),jcPrjName:K.a.string().required().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("JC Project Name"),jcContName:K.a.string().required().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("JC Contract Name")},a.handleSearch=function(){var e=Object(z.a)(a.state.jobcards).filter(function(e){return console.log(e.jcNumber,a.state.searchValue,e.jcNumber.indexOf(a.state.searchValue)),-1!==e.jcNumber.indexOf(a.state.searchValue)});a.setState({displayJC:e})},a.handleSearchValueChange=function(e){var t=e.currentTarget.value;a.setState({searchValue:t})},a.handleCloseModal=function(){a.setState({showmodal:!1})},a.handleListUpdated=function(){a.setState({listProcess:!1,listVisible:!0})},a.handleSubmit=function(){var e=a.validateFields();a.setState({errors:e||{}});var t=Object(i.a)({},a.state.buttonsOptions);if(a.setState({formProcess:!0,formVisible:!1}),e){a.setState({formProcess:!1,formVisible:!0})}else a.state.flags.isAdd?Jt(a.state.jobcard).then(function(e){if("Ok"===e.Success){var s=Object(i.a)({},e.Result),n=Object(i.a)({},a.state.flags);n.isAdd=!1,n.isEdit=!1;var r=Object(z.a)(a.state.jobcards);r.push(s);var o=Object(z.a)(r);a.setState({result:e,flags:n,jobcards:r,jobcard:s,formProcess:!1,formVisible:!0,displayJC:o}),T.toast.success("New Job Card Saved Successfully.",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}else{var l=Object(i.a)({},a.state.flags);l.isAdd=!1,l.isEdit=!1;a.setState({jobcard:{},flags:l,result:e,formProcess:!1,formVisible:!0}),T.toast.error("New Job Card was not Saved Successfully!\n"+e.FailReason,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}t.addButton.showAdd=!0,t.editButton.showEdit=!0,t.refreshButton.showRefresh=!0,a.setState({buttonsOptions:t})}).catch(function(e){var s,n=Object(i.a)({},a.state.flags);n.isAdd=!1,n.isEdit=!1;a.setState((s={jobcard:e},Object(Gt.a)(s,"jobcard",{}),Object(Gt.a)(s,"flags",n),Object(Gt.a)(s,"formProcess",!1),Object(Gt.a)(s,"formVisible",!0),s)),T.toast.error("Error occured!\n"+e,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),t.addButton.showAdd=!0,t.editButton.showEdit=!0,t.refreshButton.showRefresh=!0,a.setState({buttonsOptions:t})}):a.state.flags.isEdit&&(console.log("Editing"),qt(a.state.jobcard).then(function(e){if("Ok"===e.Success){var s=Object(i.a)({},a.state.flags);s.isAdd=!1,s.isEdit=!1;a.setState({result:e,flags:s,formProcess:!1,formVisible:!0}),T.toast.success("Job Card Updated Successfully.",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}else{var n=Object(i.a)({},a.state.flags);n.isAdd=!1,n.isEdit=!1;a.setState({jobcard:{},flags:n,result:e,formProcess:!1,formVisible:!0}),T.toast.error("Job Card was not Updated Successfully!\n"+e.FailReason,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}t.addButton.showAdd=!0,t.editButton.showEdit=!0,t.refreshButton.showRefresh=!0,a.setState({buttonsOptions:t})}).catch(function(e){var s=Object(i.a)({},a.state.flags);s.isAdd=!1,s.isEdit=!1;a.setState({result:e,jobcard:{},flags:s,formProcess:!1,formVisible:!0}),T.toast.error("Error Occured!\n"+e,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),t.addButton.showAdd=!0,t.editButton.showEdit=!0,t.refreshButton.showRefresh=!0,a.setState({buttonsOptions:t})}))},a.handleAdd=function(){var e=Object(i.a)({},a.state.jobcard),t=Object(i.a)({},a.state.flags),s=Object(i.a)({},a.state.buttonsOptions);e={jcNumber:"",jcDate:"",jcDetails:"",jcMonth:1,jcYear:0,jcTime:"",jcTicketNum:"",jcStatus:"Pending",jcPrjName:"",jcContName:""},t.isAdd=!0,t.isEdit=!1,s.showEdit=!1,s.addButton.showAdd=!1,s.refreshButton.showRefresh=!1,a.setState({jobcard:e,flags:t,buttonsOptions:s})},a.handleEdit=function(){var e=Object(i.a)({},a.state.flags);e.isEdit=!0,e.isAdd=!1,a.setState({flags:e})},a.handleCancel=function(){var e=Object(i.a)({},a.state.buttonsOptions);e.addButton.showAdd=!0,e.editButton.showEdit=!1,e.refreshButton.showRefresh=!0,a.setState({flags:{isAdd:!1,isEdit:!1},errors:{},buttonsOptions:e})},a.handleChange=function(e){var t=e.currentTarget,s=t.name,n=t.value,r=Object(i.a)({},a.state.jobcard);r[s]=n,a.setState({jobcard:r})},a.handleJCClick=function(e){Xt(e).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},e.Result),s=Object(i.a)({},a.state.buttonsOptions);s.editButton.showEdit=!0,a.setState({result:e}),a.setState({jobcard:t,buttonsOptions:s})}else{a.setState({jobcard:{}})}}).catch(function(e){a.setState({result:e}),a.setState({jobcard:{}})})},a.handleRefresh=function(){var e=zt();a.setState({listProcess:!0}),a.setState({listVisible:!1}),e.then(function(e){var t=e.Result.filter(function(e){return"Pending"===e.jcStatus}),s=Object(z.a)(t);a.setState({jobcards:t,displayJC:s});var n=Object(i.a)({},a.state.jobcard),r=Object(i.a)({},a.state.buttonsOptions);return n={jcNumber:"",jcDate:"",jcDetails:"",jcMonth:1,jcYear:0,jcTime:"",jcTicketNum:"",jcStatus:"Pending",jcPrjName:"",jcContName:""},r.addButton.showAdd=!0,r.editButton.showEdit=!1,r.refreshButton.showRefresh=!0,r.deleteButton.showDelete=!1,a.setState({listProcess:!1,listVisible:!0,jobcard:n,buttonsOptions:r,searchValue:""}),a.setState({result:e}),e}).catch(function(e){var t=Object(i.a)({},a.state.jobcard);return t={jcNumber:"",jcDate:"",jcDetails:"",jcMonth:1,jcYear:0,jcTime:"",jcTicketNum:"",jcStatus:"Pending",jcPrjName:"",jcContName:""},a.setState({listProcess:!1,listVisible:!0,jobcard:t,jobcards:[],result:e,showmodal:!0}),e})},a.validateFields=function(){var e={},t=K.a.validate(a.state.jobcard,a.schema,{abortEarly:!1});if(!t.error)return null;var s=!0,n=!1,r=void 0;try{for(var o,i=t.error.details[Symbol.iterator]();!(s=(o=i.next()).done);s=!0){var l=o.value;e[l.path[0]]=l.message}}catch(c){n=!0,r=c}finally{try{s||null==i.return||i.return()}finally{if(n)throw r}}return 0===Object.keys(e).length?null:e};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(L.a)(I.a.mark(function e(){var t,a=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=zt(),Kt().then(function(e){var t=[];e.Result.map(function(e){t.push({Name:e.ticketNumber})}),a.setState({tickets:t})}).catch(function(e){console.log(e)}),Zt().then(function(e){var t=[];e.Result.map(function(e){t.push({Name:e.name})}),a.setState({projects:t})}).catch(function(e){console.log(e)}),this.setState({listProcess:!0}),this.setState({listVisible:!1}),t.then(function(e){var t=Object(z.a)(e.Result);t=t.filter(function(e){return"Pending"===e.jcStatus});var s=Object(z.a)(t);return a.setState({jobcards:t,displayJC:s}),a.setState({result:e}),a.setState({listProcess:!1}),a.setState({listVisible:!0}),e}).catch(function(e){return a.setState({jobcards:[]}),a.setState({result:e}),a.setState({listProcess:!1}),a.setState({listVisible:!0}),a.setState({showmodal:!0}),e});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{title:"Maintenance Job Cards",bgColor:"white",color:"gray"}),n.a.createElement("div",{className:"col-md-3 leftCol"},n.a.createElement(se,{buttonsOptions:this.state.buttonsOptions,onSearchValueChange:this.handleSearchValueChange}),n.a.createElement(Se,{data:this.state.displayJC,name:"jcNumber",label:"jcNumber",value:"jcNumber",showProcess:this.state.listProcess,showList:this.state.listVisible,onClick:this.handleJCClick})),n.a.createElement("div",{className:"col-md-9 rightCol"},n.a.createElement(Yt,{onChange:this.handleChange,onSubmit:this.handleSubmit,onCancel:this.handleCancel,data:this.state.jobcard,flags:this.state.flags,errors:this.state.errors,showProcess:this.state.formProcess,showButtons:this.state.formVisible,projects:this.state.projects,contracts:this.state.contracts,tickets:this.state.tickets})),n.a.createElement(T.ToastContainer,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(s.Component),$t={textAlign:"center"},ea={textAlign:"left"};var ta=function(e){var t=e.reading,a=e.transClick,s=e.id;return console.log("Reading: ",t),n.a.createElement("tr",null,n.a.createElement("td",{style:ea},new Date(t.transDate).toLocaleDateString()),n.a.createElement("td",{style:ea},t.transTime?t.transTime:""),n.a.createElement("td",{style:$t},t.pHReading),n.a.createElement("td",{style:$t},t.clReading),n.a.createElement("td",{style:$t},t.tempReading),n.a.createElement("td",null,n.a.createElement("button",{onClick:function(){return a(s)}},n.a.createElement(k.a,{icon:"edit"}))))};Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a};var aa=function(e,t,a,s){var n=e,r=t,o="",l="",c="",d="";console.log("Code: ",{pn:n,cn:r,poolName:a,reading:s});var u=W.a.firestore().collection("Projects").doc(n).collection("Contracts").doc(r).collection("Assets").doc(a);Object(i.a)({},s);return u.get().then(function(e){if(e.exists){var t=s.transDate+" "+s.transTime;return u.collection("Readings").doc(t).set(s)}return{Success:o="No",Result:l={},FailReason:d="Pool Do Not exists. Cannot log a reading.",Error:c,Warning:""}}).then(function(e){return{Success:o="Ok",Result:l={},FailReason:d,Error:c,Warning:""}}).catch(function(e){return o="No",l={},d="Error",c=e.message,{Success:o,Result:l,FailReason:d,Error:c,Warning:""}})},sa=function(e,t,a,s){var n=e,r=t,o="",l="",c="",d="";console.log("Code: ",{pn:n,cn:r,poolName:a,reading:s});var u=W.a.firestore().collection("Projects").doc(n).collection("Contracts").doc(r).collection("Assets").doc(a);Object(i.a)({},s);return u.collection("Readings").doc(s.transDate).get().then(function(e){return e.exists?u.collection("Readings").doc(s.transDate).update(s):{Success:o="No",Result:l={},FailReason:d="Reading Do Not exists. Cannot update the log a reading.",Error:c,Warning:""}}).then(function(e){return{Success:o="Ok",Result:l={},FailReason:d,Error:c,Warning:""}}).catch(function(e){return o="No",l={},d="Error",c=e.message,{Success:o,Result:l,FailReason:d,Error:c,Warning:""}})},na=function(e,t,a){var s=e,n=t,r="",o="",i="",l="";return W.a.firestore().collection("Projects").doc(s).collection("Contracts").doc(n).collection("Assets").doc(a).collection("Readings").get().then(function(e){var t=[];return e.docs.length>0?(e.forEach(function(e){t.push(e.data())}),r="Ok",o=t):(r="No",o=t,l="No readings found. Returning empty list."),{Success:r,Result:o,FailReason:l,Error:i,Warning:""}}).catch(function(e){return r="No",o={},l="Error",i=e.message,{Success:r,Result:o,FailReason:l,Error:i,Warning:""}})},ra=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={dateSorted:!1,transNumSorted:!0,uprofile:{},clientsList:[],projectsList:[],contractsList:[],poolsList:[],readingData:{transDate:"",transTime:"",clientName:"",projectName:"",contractName:"",poolName:"",pHReading:0,clReading:0,tempReading:0},showProcess:!0,error:"",selectedClient:"",selectedProject:"",selectedContract:"",selectedPool:"",flags:{isAdd:!1,isEdit:!1},poolReadings:[],selectedReadingIndex:-1,buttonsOptions:{addButton:{showAdd:!0,onAdd:function(){return a.handleAdd()}},editButton:{showEdit:!1,onEdit:function(){return a.handleEdit()}},saveButton:{showSave:!1,onSave:function(){return a.handleOnSubmit()}},cancelButton:{showCancel:!1,onCancel:function(){return a.handleCancel()}},searchButton:{showSearch:!1,onSearch:null}}},a.handleAdd=function(){if(""!==a.state.selectedClient&&""!==a.state.selectedProject&&""!==a.state.selectedContract&&""!==a.state.selectedPool){var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1;var t=Object(i.a)({},a.state.buttonsOptions);t.addButton.showAdd=!1,t.editButton.showEdit=!1,t.saveButton.showSave=!0,t.cancelButton.showCancel=!0,a.setState({readingData:{transDate:"",transTime:"",clientName:"",projectName:"",contractName:"",poolName:"",pHReading:0,clReading:0},flags:e,buttonsOptions:t})}else T.toast.warn("You must select the Client, Project, and Contract before your Add or Edit...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.handleEdit=function(){var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0;var t=Object(i.a)({},a.state.buttonsOptions);t.addButton.showAdd=!1,t.editButton.showEdit=!1,t.saveButton.showSave=!0,t.cancelButton.showCancel=!0,a.setState({flags:e,buttonsOptions:t})},a.handleCancel=function(){if(Object(i.a)({},a.state.flags).isAdd){var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!1;var t=Object(i.a)({},a.state.buttonsOptions);t.addButton.showAdd=!0,t.editButton.showEdit=!1,t.saveButton.showSave=!1,t.cancelButton.showCancel=!1,a.setState({readingData:{transDate:"",clientName:"",projectName:"",contractName:"",poolName:"",pHReading:0,clReading:0},flags:e,buttonsOptions:t})}else{var s=Object(i.a)({},a.state.poolReadings[a.state.selectedReadingIndex]),n=Object(i.a)({},a.state.flags);n.isAdd=!1,n.isEdit=!1;var r=Object(i.a)({},a.state.buttonsOptions);r.addButton.showAdd=!0,r.editButton.showEdit=!0,r.saveButton.showSave=!1,r.cancelButton.showCancel=!1,a.setState({readingData:s,flags:n,buttonsOptions:r})}},a.handleTransDescOnChange=function(e){var t=Object(i.a)({},a.state.transData);t.transDesc=e.currentTarget.value,a.setState({transData:t})},a.handleClientsOnChange=function(e){a.setState({showProcess:!0});var t=e.currentTarget.value;He(e.currentTarget.value).then(function(e){var s=[];e.Result.map(function(e){var t={Name:e.name};s.push(t)}),a.setState({projectsList:s,selectedClient:t}),a.setState({showProcess:!1})}).catch(function(e){console.log(e)})},a.handleProjectsOnChange=function(e){a.setState({showProcess:!0});var t=e.currentTarget.value;Ue(e.currentTarget.value).then(function(e){var s=[];e.Result.map(function(e){var t={Name:e.name};s.push(t)}),a.setState({contractsList:s,selectedProject:t}),a.setState({showProcess:!1})}).catch(function(e){console.log(e)})},a.handleContractsOnChange=function(e){var t=a.state,s=(t.selectedClient,t.selectedProject),n=e.currentTarget.value;a.setState({selectedContract:n}),ct(s,n).then(function(e){var t=[];e.Result.map(function(e){if(e.Title.toUpperCase().includes("pool".toUpperCase())){var a={Name:e.Title};t.push(a)}}),a.setState({poolsList:t})}).catch(function(e){console.log(e)})},a.handlePoolsOnChange=function(e){var t=a.state,s=t.selectedProject,n=t.selectedContract,r=e.currentTarget.value;a.setState({selectedPool:r}),na(s,n,r).then(function(e){console.log("getReadings: ",e);var t=[];e.Result.map(function(e){t.push(e)}),console.log("poolReadings: ",t),a.setState({poolReadings:t})}).catch(function(e){console.log(e)})},a.handleTransDateOnChange=function(e){var t,s=Object(i.a)({},a.state.readingData);s.transDate=e.currentTarget.value,a.setState({readingData:s}),na(a.state.selectedProject,a.state.selectedContract,a.state.selectedPool).then(function(e){t=Object(i.a)({},e),console.log("ReadingByDate: ",t)})},a.handleTransTimeOnChange=function(e){var t,s=Object(i.a)({},a.state.readingData);s.transTime=e.currentTarget.value,a.setState({readingData:s}),na(a.state.selectedProject,a.state.selectedContract,a.state.selectedPool).then(function(e){t=Object(i.a)({},e),console.log("ReadingByDate: ",t)})},a.handleReadingValueOnChange=function(e){var t=Object(i.a)({},a.state.readingData);t[e.currentTarget.name]=e.currentTarget.value,console.log(e.currentTarget.name,e.currentTarget.value),a.setState({readingData:t})},a.handleOnSubmit=function(){if(""!==a.state.readingData.transDate)if(""!==a.state.readingData.transTime){a.setState({showProcess:!0});var e=a.state,t=e.flags,s=e.selectedClient,n=e.selectedContract,r=e.selectedProject,o=e.selectedPool;if(t.isAdd){var l=Object(i.a)({},a.state.readingData,{clientName:s,projectName:r,contractName:n,poolName:o});console.log(l);aa(r,n,o,l).then(function(e){var t=Object(z.a)(a.state.poolReadings);console.log(e),t.push(l);var s=Object(i.a)({},a.state.flags);s.isAdd=!1,s.isEdit=!1;var n=Object(i.a)({},a.state.buttonsOptions);n.addButton.showAdd=!0,n.editButton.showEdit=!1,n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({flags:s,buttonsOptions:n,poolReadings:t}),a.setState({showProcess:!1})}).catch(function(e){console.log(e),T.toast.error(e.message,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;var s=Object(i.a)({},a.state.buttonsOptions);s.addButton.showAdd=!0,s.editButton.showEdit=!1,s.saveButton.showSave=!1,s.cancelButton.showCancel=!1,a.setState({flags:t,buttonsOptions:s}),a.setState({showProcess:!1})})}else{a.setState({showProcess:!0});var c=Object(z.a)(a.state.poolReadings);c[a.state.selectedTransIndex]=Object(i.a)({},a.state.readingData),a.setState({poolReadings:c}),sa(r,n,o,a.state.readingData).then(function(e){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;var s=Object(i.a)({},a.state.buttonsOptions);s.addButton.showAdd=!0,s.editButton.showEdit=!0,s.saveButton.showSave=!1,s.cancelButton.showCancel=!1,a.setState({flags:t,buttonsOptions:s}),a.setState({showProcess:!1})}).catch(function(e){console.log(e);var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;var s=Object(i.a)({},a.state.buttonsOptions);s.addButton.showAdd=!0,s.editButton.showEdit=!0,s.saveButton.showSave=!1,s.cancelButton.showCancel=!1,a.setState({flags:t,buttonsOptions:s}),a.setState({showProcess:!1})})}}else T.toast.warn("Reading Time cannot be left empty...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});else T.toast.warn("Reading Date cannot be left empty...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.handleReadingClick=function(e){var t=Object(i.a)({},a.state.poolReadings[e]),s=Object(i.a)({},a.state.buttonsOptions);s.editButton.showEdit=!0,a.setState({readingData:t,buttonsOptions:s,selectedTransIndex:e})},a.sumCr=function(){var e=0;return a.state.soaTransactions.map(function(t){"Credit"===t.transType&&(e+=parseFloat(t.transAmount))}),e.toFixed(3)},a.sortByDate=function(){},a.sortByTransNum=function(){};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,Me().then(function(e){var t=[];e.Result.map(function(e){var a={Name:e};t.push(a)}),a.setState({clientsList:t}),a.setState({showProcess:!1})}).catch(function(e){console.log(e)}),a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{title:"Pools Readings Log",bgColor:"white",color:"gray"}),n.a.createElement("form",{style:{marginTop:"10px",paddingLeft:"25px",paddingRight:"25px"}},n.a.createElement(se,{buttonsOptions:this.state.buttonsOptions}),n.a.createElement("div",{style:{width:"100%",margin:"10px"}}),n.a.createElement(oe,{name:"ddlClients",label:"Clients",values:this.state.clientsList,onChange:this.handleClientsOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit,error:this.state.error}),n.a.createElement(oe,{name:"ddlProjects",label:"Projects",values:this.state.projectsList,onChange:this.handleProjectsOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit,error:this.state.error}),n.a.createElement(oe,{name:"ddlContracts",label:"Contracts",values:this.state.contractsList,onChange:this.handleContractsOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit,error:this.state.error}),n.a.createElement(oe,{name:"ddlPools",label:"Pools",values:this.state.poolsList,onChange:this.handlePoolsOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit,error:this.state.error}),n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{type:"date",name:"txtTransDate",label:"Reading Date",value:this.state.readingData.transDate,onChange:this.handleTransDateOnChange,flgDisabled:!1,error:this.state.error})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{type:"time",name:"txtTransTime",label:"Reading Time",value:this.state.readingData.transTime,onChange:this.handleTransTimeOnChange,flgDisabled:!1,error:this.state.error}))),n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{type:"number",name:"pHReading",label:"pH Value",value:this.state.readingData.pHReading,onChange:this.handleReadingValueOnChange,flgDisabled:!this.state.flags.isAdd&&!this.state.flags.isEdit,error:this.state.error})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{type:"text",name:"clReading",label:"Chlorine Value",value:this.state.readingData.clReading,onChange:this.handleReadingValueOnChange,flgDisabled:!this.state.flags.isAdd&&!this.state.flags.isEdit,error:this.state.error}))),n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{type:"number",name:"tempReading",label:"Temperature Value",value:this.state.readingData.tempReading,onChange:this.handleReadingValueOnChange,flgDisabled:!this.state.flags.isAdd&&!this.state.flags.isEdit,error:this.state.error})),n.a.createElement("div",{className:"col-md-6"})),n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",className:this.state.showProcess?"":"hidden",style:{marginTop:"2vh"}}),n.a.createElement("div",{className:"btn-toolbar btnToobar"+(this.state.flags.isAdd||this.state.flags.isEdit?"":" hidden")},n.a.createElement("div",{className:"btn-group btn-group-justified"}))),n.a.createElement("table",{className:"table table-striped table-hover"},n.a.createElement("thead",null,n.a.createElement("tr",{className:"bg-info"},n.a.createElement("th",{style:{width:"10%"}},n.a.createElement("div",{onClick:this.sortByDate,style:this.state.dateSorted?{color:"blue"}:{color:"black"}},"Date")),n.a.createElement("th",{style:{width:"10%"}},n.a.createElement("div",{onClick:this.sortByDate,style:this.state.dateSorted?{color:"blue"}:{color:"black"}},"Time")),n.a.createElement("th",{style:{width:"20%",textAlign:"center"}},"pH Reading"),n.a.createElement("th",{style:{width:"20%",textAlign:"center"}},"Chlorine Reading"),n.a.createElement("th",{style:{width:"20%",textAlign:"center"}},"Temp. Reading"),n.a.createElement("th",{style:{textAlign:"center"}},"Edit"))),n.a.createElement("tbody",null,this.state.poolReadings?this.state.poolReadings.map(function(t,a){return n.a.createElement(ta,{key:a,id:a,reading:t,transClick:e.handleReadingClick})}):null)),n.a.createElement("hr",null),n.a.createElement(T.ToastContainer,null))}}]),t}(s.Component),oa=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(u.a)(t).call(this))).state={servicesList:[]},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.service,a=e.id,s=e.onChange,r=e.servList,o=e.flags;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-2"},n.a.createElement("select",{className:"form-control",disabled:!o.isEdit&&!o.isAdd,onChange:function(e){s("serviceName",e.currentTarget.value,a)}},n.a.createElement("option",{value:""}),r.map(function(e){return n.a.createElement("option",{key:a+e,value:e,selected:e===t.serviceName?"selected":""},e)}))),n.a.createElement("div",{className:"col-md-1"},n.a.createElement("input",{type:"checkbox",className:"form-control",value:t.subcontracted,defaultChecked:t.subcontracted,disabled:!o.isEdit&&!o.isAdd,onChange:function(e){s("subcontracted",e.currentTarget.checked,a)}})),n.a.createElement("div",{className:"col-md-2"},n.a.createElement("input",{type:"number",style:{width:"100%",textAlign:"right"},className:"form-control",value:t.subcontValue,disabled:!o.isEdit&&!o.isAdd,onChange:function(e){s("subcontValue",e.currentTarget.value,a)}})),n.a.createElement("div",{className:"col-md-1"},n.a.createElement("select",{style:{width:"100%"},className:"form-control",disabled:!o.isEdit&&!o.isAdd,onChange:function(e){s("manfeestype",e.currentTarget.value,a)}},n.a.createElement("option",{value:""}),n.a.createElement("option",{selected:"%"===t.manfeestype?"selected":""},"%"),n.a.createElement("option",{selected:"Value"===t.manfeestype?"selected":""},"Value"))),n.a.createElement("div",{className:"col-md-2"},n.a.createElement("input",{type:"number",style:{width:"100%",textAlign:"right"},className:"form-control",value:t.manfeesvalue,disabled:!o.isEdit&&!o.isAdd,onChange:function(e){s("manfeesvalue",e.currentTarget.value,a)}})),n.a.createElement("div",{className:"col-md-2"},n.a.createElement("input",{type:"number",style:{width:"100%",textAlign:"center"},className:"form-control",value:t.manPower,disabled:!o.isEdit&&!o.isAdd,onChange:function(e){s("manPower",e.currentTarget.value,a)}})),n.a.createElement("div",{className:"col-md-2"},n.a.createElement("input",{type:"number",style:{width:"100%",textAlign:"right"},className:"form-control",value:t.quotedValue,disabled:!o.isEdit&&!o.isAdd,onChange:function(e){s("quotedValue",e.currentTarget.value,a)}}))))}}]),t}(s.Component);Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a};var ia=function(){var e="",t="",a="",s="";return W.a.firestore().collection("Accounts").doc("Project Services").collection("Services").get().then(function(n){var r=[];return n.docs.length>0?(n.forEach(function(e){r.push(e.data().Description)}),e="Ok",t=r):(e="No",t=r,s="No services found. Returning empty list."),{Success:e,Result:t,FailReason:s,Error:a,Warning:""}}).catch(function(n){return e="No",t=[],s="Error",a=n.message,{Success:e,Result:t,FailReason:s,Error:a,Warning:""}})},la=function(){var e="",t="",a="",s="";return W.a.firestore().collection("Projects").get().then(function(n){var r=[];return n.docs.length>0?(n.forEach(function(e){r.push(e.data().prjName)}),e="Ok",t=r):(e="No",t=r,s="No Projects found. Returning empty list."),{Success:e,Result:t,FailReason:s,Error:a,Warning:""}}).catch(function(n){return e="No",t=[],s="Error",a=n.message,{Success:e,Result:t,FailReason:s,Error:a,Warning:""}})},ca=function(){var e="",t="",a="",s="";return W.a.firestore().collection("Projects").get().then(function(n){var r=[];return n.docs.length>0?(n.forEach(function(e){r.find(function(t){return t==e.data().clientName})||r.push(e.data().clientName)}),console.log(r),e="Ok",t=r):(e="No",t=r,s="No Projects found. Returning empty list."),{Success:e,Result:t,FailReason:s,Error:a,Warning:""}}).catch(function(n){return e="No",t=[],s="Error",a=n.message,{Success:e,Result:t,FailReason:s,Error:a,Warning:""}})},da=function(e,t){var a="",s="",n="",r="";return W.a.firestore().collection("Projects").doc(e).collection("Contracts").get().then(function(e){var t=[];return e.docs.length>0?(e.forEach(function(e){t.push(e.data().contName)}),a="Ok",s=t):(a="No",s=t,r="No Contracts found. Returning empty list."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s=[],r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}})},ua=function(e,t){var a="",s="",n="",r="";return W.a.firestore().collection("Projects").doc(e).collection("Contracts").doc(t).get().then(function(e){var t={};return e.exists?(t=e.data(),a="Ok",s=t):(a="No",s=t,r="Contract was not found."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s={},r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}})},ha=function(e,t){var a=t,s="",n="",r="",o="",i=W.a.firestore().collection("Projects");return a.Services.forEach(function(e){e.quotedValue}),i.doc(e).collection("Contracts").doc(a.contName).get().then(function(t){if(!t.exists)return i.doc(e).collection("Contracts").doc(a.contName).set(a)}).then(function(e){return{Success:s="Ok",Result:n={},FailReason:o,Error:r,Warning:""}}).catch(function(e){return s="No",n={},o="Error",r=e.message,{Success:s,Result:n,FailReason:o,Error:r,Warning:""}})},ma=function(e,t){var a=t,s="",n="",r="",o="",i=W.a.firestore().collection("Projects");return a.Services.forEach(function(e){e.quotedValue}),i.doc(e).collection("Contracts").doc(a.contName).get().then(function(t){return t.exists?i.doc(e).collection("Contracts").doc(a.contName).update(a):{Success:s="No",Result:n="Contract was not found! Update aborted.",FailReason:o,Error:r,Warning:""}}).then(function(e){return{Success:s="Ok",Result:n={},FailReason:o,Error:r,Warning:""}}).catch(function(e){return s="No",n={},o="Error",r=e.message,{Success:s,Result:n,FailReason:o,Error:r,Warning:""}})},pa=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={projectsList:[],selectedProject:"",selectedContract:"",contractsList:[],servicesList:[],contract:{Description:"",ProjectName:"",Services:[],contCode:"",contName:"",contactEmails:"",contactPerson:"",effectDate:"",expiryDate:"",prjCode:""},service:{serviceName:"",subcontracted:!1,subcontValue:0,manfeestype:"",manfeesvalue:0,manPower:0,quotedValue:0,remarks:""},errors:{},formProcess:!1,formVisible:!0,flags:{isAdd:!1,isEdit:!1},buttonsOptions:{addButton:{showAdd:!1,onAdd:null},editButton:{showEdit:!1,onEdit:null},deleteButton:{showDelete:!1,onDelete:null},refreshButton:{showRefresh:!1,onRefresh:null},searchButton:{showSearch:!1,onSearch:null},saveButton:{showSave:!1,onSave:function(){return a.handleOnSubmit()}},cancelButton:{showCancel:!1,onCancel:function(){return a.handleOnCancel()}}},TopButtonsOptions:{addButton:{showAdd:!0,onAdd:function(){return a.handleAdd()}},editButton:{showEdit:!1,onEdit:function(){return a.handleEdit()}},deleteButton:{showDelete:!1,onDelete:null},refreshButton:{showRefresh:!1,onRefresh:function(){return a.handleRefresh()}},searchButton:{showSearch:!1,onSearch:null}},uprofile:{}},a.schema={Description:K.a.string().optional().allow("").regex(/^[a-zA-Z0-9\s\_\-\.\&\:\,]+$/,{name:"No Special Chars"}).label("Contract Description"),ProjectName:K.a.string().required().label("Project Name"),Services:K.a.any().label("Contract Services List"),contCode:K.a.string().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("Contract Code"),contName:K.a.string().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("Contract Name"),contactEmails:K.a.string().regex(/^[a-zA-Z0-9\s\_\-\@\.]+$/,{name:"No Special Chars"}).label("Contact Person's Email Address"),contactPerson:K.a.string().regex(/^[a-zA-Z0-9\s\_\-]+$/,{name:"No Special Chars"}).label("Contact Person's Name"),effectDate:K.a.string().label("Contract Effective Date"),expiryDate:K.a.string().label("Contract Effective Date"),prjCode:K.a.string().optional().allow("").label("Project Code")},a.validateFields=function(){var e={},t=K.a.validate(a.state.contract,a.schema,{abortEarly:!1});if(!t.error)return null;var s=!0,n=!1,r=void 0;try{for(var o,i=t.error.details[Symbol.iterator]();!(s=(o=i.next()).done);s=!0){var l=o.value;e[l.path[0]]=l.message}}catch(c){n=!0,r=c}finally{try{s||null==i.return||i.return()}finally{if(n)throw r}}return 0===Object.keys(e).length?null:e},a.handleAdd=function(){var e={Description:"",ProjectName:a.state.selectedProject,Services:[],contCode:"",contName:"",contactEmails:"",contactPerson:"",effectDate:"",expiryDate:"",prjCode:""},t=Object(i.a)({},a.state.TopButtonsOptions);t.addButton.showAdd=!1,t.editButton.showEdit=!1;var s=Object(i.a)({},a.state.buttonsOptions);s.saveButton.showSave=!0,s.cancelButton.showCancel=!0;var n=Object(i.a)({},a.state.flags);n.isAdd=!0,n.isEdit=!1,a.setState({contract:e,flags:n,TopButtonsOptions:t,buttonsOptions:s})},a.handleOnSubmit=function(){var e=a.validateFields();a.setState({errors:e||{}});if(a.setState({formProcess:!0,formVisible:!1}),e){console.log(e);return a.setState({formProcess:!1,formVisible:!0}),void T.toast.error(e,{position:T.toast.POSITION.TOP_RIGHT,autoClose:1e4,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}a.state.flags.isAdd?ha(a.state.contract.ProjectName,a.state.contract).then(function(e){if("Ok"===e.Success){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,flags:t,formProcess:!1,formVisible:!0}),T.toast.success("New Contract Saved Successfully.",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var s=Object(i.a)({},a.state.TopButtonsOptions);s.addButton.showAdd=!0,s.editButton.showEdit=!0;var n=Object(i.a)({},a.state.buttonsOptions);n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({TopButtonsOptions:s,buttonsOptions:n})}else{var r=Object(i.a)({},a.state.flags);r.isAdd=!1,r.isEdit=!1;a.setState({contract:{},flags:r,result:e,formProcess:!1,formVisible:!0}),T.toast.error("New Job Card was not Saved Successfully!\n"+e.FailReason,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var o=Object(i.a)({},a.state.TopButtonsOptions);o.addButton.showAdd=!0,o.editButton.showEdit=!0;var l=Object(i.a)({},a.state.buttonsOptions);l.saveButton.showSave=!1,l.cancelButton.showCancel=!1,a.setState({TopButtonsOptions:o,buttonsOptions:l})}}).catch(function(e){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({errors:e,contract:{},flags:t,formProcess:!1,formVisible:!0}),T.toast.error("Error occured!\n"+e,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var s=Object(i.a)({},a.state.TopButtonsOptions);s.addButton.showAdd=!0,s.editButton.showEdit=!0;var n=Object(i.a)({},a.state.buttonsOptions);n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({TopButtonsOptions:s,buttonsOptions:n})}):a.state.flags.isEdit&&ma(a.state.contract.ProjectName,a.state.contract).then(function(e){if(console.log(e),"Ok"===e.Success){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({result:e,flags:t,formProcess:!1,formVisible:!0}),T.toast.success("New Contract Saved Successfully.",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var s=Object(i.a)({},a.state.TopButtonsOptions);s.addButton.showAdd=!0,s.editButton.showEdit=!0;var n=Object(i.a)({},a.state.buttonsOptions);n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({TopButtonsOptions:s,buttonsOptions:n})}else{var r=Object(i.a)({},a.state.flags);r.isAdd=!1,r.isEdit=!1;a.setState({contract:{},flags:r,result:e,formProcess:!1,formVisible:!0}),T.toast.error("New Job Card was not Saved Successfully!\n"+e.FailReason,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var o=Object(i.a)({},a.state.TopButtonsOptions);o.addButton.showAdd=!0,o.editButton.showEdit=!0;var l=Object(i.a)({},a.state.buttonsOptions);l.saveButton.showSave=!1,l.cancelButton.showCancel=!1,a.setState({TopButtonsOptions:o,buttonsOptions:l})}}).catch(function(e){var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;a.setState({errors:e,contract:{},flags:t,formProcess:!1,formVisible:!0}),T.toast.error("Error occured!\n"+e,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var s=Object(i.a)({},a.state.TopButtonsOptions);s.addButton.showAdd=!0,s.editButton.showEdit=!0;var n=Object(i.a)({},a.state.buttonsOptions);n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({TopButtonsOptions:s,buttonsOptions:n})})},a.handleOnCancel=function(){var e={Description:"",ProjectName:"",Services:[],contCode:"",contName:"",contactEmails:"",contactPerson:"",effectDate:"",expiryDate:"",prjCode:""};a.setState({contract:e});var t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1;var s=Object(i.a)({},a.state.TopButtonsOptions);s.addButton.showAdd=!0,s.editButton.showEdit=!1;var n=Object(i.a)({},a.state.buttonsOptions);n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,""!==a.state.selectedProject&&""!==a.state.selectedContract&&(a.setState({formProcess:!0}),ua(a.state.selectedProject,a.state.selectedContract).then(function(t){e=Object(i.a)({},t.Result),a.setState({contract:e,formProcess:!1})}).catch(function(e){console.log(e),a.setState({formProcess:!1})}),s.editButton.showEdit=!0),a.setState({contract:e,flags:t,TopButtonsOptions:s,buttonsOptions:n})},a.handleEdit=function(){var e=Object(i.a)({},a.state.TopButtonsOptions);e.addButton.showAdd=!1,e.editButton.showEdit=!1;var t=Object(i.a)({},a.state.buttonsOptions);t.saveButton.showSave=!0,t.cancelButton.showCancel=!0;var s=Object(i.a)({},a.state.flags);s.isAdd=!1,s.isEdit=!0,a.setState({flags:s,TopButtonsOptions:e,buttonsOptions:t})},a.handleOnDetailsChange=function(e){var t=e.currentTarget,s=t.name,n=t.value,r=Object(i.a)({},a.state.contract);r[s]=n,a.setState({contract:r})},a.handleOnProjectsChange=function(e){if(!0===a.state.flags.isAdd){var t=e.currentTarget.value,s=a.state.contract;return s.ProjectName=t,void a.setState({contract:s})}a.setState({formProcess:!0});var n=e.currentTarget.value;if(a.state.flags.isAdd){var r=Object(i.a)({},a.state.contract);r.ProjectName=n,a.setState({contract:r})}else a.setState({contract:{Description:"",ProjectName:"",Services:[],contCode:"",contName:"",contactEmails:"",contactPerson:"",effectDate:"",expiryDate:"",prjCode:""}}),da(n).then(function(e){console.log(e.Result);var t=[];e.Result.map(function(e){t.push({Name:e})}),a.setState({contractsList:t,selectedProject:n,formProcess:!1})}).catch(function(e){console.log(e),a.setState({formProcess:!1})})},a.handleOnContractChange=function(e){a.setState({formProcess:!0});var t=e.currentTarget.value,s=a.state.selectedProject;ua(s,t).then(function(e){var s=e.Result,n=Object(i.a)({},a.state.TopButtonsOptions);n.editButton.showEdit=!0;var r=new Date(s.effectDate),o=new Date(s.expiryDate);console.log(r-o),a.setState({contract:s,formProcess:!1,TopButtonsOptions:n,selectedContract:t})}).catch(function(e){console.log(e),a.setState({formProcess:!1})})},a.handleOnChange=function(e,t,s){var n=Object(i.a)({},a.state.contract);if(n.Services[s][e]=t,"manfeestype"===e){var r=n.Services[s],o=r.subcontracted,l=r.subcontValue,c=r.manfeestype;o&&"%"===c&&(n.Services[s].manfeesvalue=10*l/100,n.Services[s].quotedValue=parseFloat(n.Services[s].manfeesvalue)+parseFloat(n.Services[s].subcontValue))}else if("manfeesvalue"===e){var d=n.Services[s],u=d.subcontracted;d.subcontValue,d.manfeestype;n.Services[s].quotedValue=u?parseFloat(n.Services[s].manfeesvalue)+parseFloat(n.Services[s].subcontValue):parseFloat(n.Services[s].manfeesvalue)}a.setState({contract:n})},a.handleOnServiceAdded=function(){var e=Object(i.a)({},a.state.contract),t=Object(i.a)({},a.state.service);e.Services.push(t),a.setState({contract:e})},a.componentDidMount=function(){a.setState({formProcess:!0}),ia().then(function(e){var t=Object(z.a)(e.Result);a.setState({servicesList:t})}),la().then(function(e){var t=[];e.Result.map(function(e){t.push({Name:e})}),a.setState({projectsList:t}),a.setState({formProcess:!1})})},a.caclSubtotal=function(){var e=0;return a.state.contract.Services.map(function(t){e+=parseFloat(t.quotedValue)}),e.toFixed(3)},a.calcContractValue=function(){var e=a.state.contract,t=e.effectDate,s=e.expiryDate,n=0;a.state.contract.Services.map(function(e){n+=parseFloat(e.quotedValue)});var r=new Date(s)-new Date(t),o=Math.round(r/1e3/60/60/24/30);return console.log(o),(n*o).toFixed(3)};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.errors;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement(A,{title:"Contract Definition",bgColor:"white",color:"gray"}),n.a.createElement(se,{buttonsOptions:this.state.TopButtonsOptions}),n.a.createElement("div",{style:{height:"2vh"}}),n.a.createElement("img",{src:x.a,width:"30vw",alt:"processing",className:this.state.formProcess?"":"hidden",style:{marginTop:"2vh"}}),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(oe,{name:"ProjectName",label:"Projects",values:this.state.projectsList,onChange:this.handleOnProjectsChange,flgDisabled:this.state.flags.isEdit,defValue:this.state.contract.ProjectName,error:t.ProjectName?t.ProjectName:""})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(oe,{name:"ContractsList",label:"Contracts",values:this.state.contractsList,onChange:this.handleOnContractChange,flgDisabled:this.state.flags.isEdit||this.state.flags.isAdd,error:t.ContractList?t.ContractList:""}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{name:"contName",label:"Contract Name",type:"text",onChange:this.handleOnDetailsChange,flgDisabled:!this.state.flags.isEdit&&!this.state.flags.isAdd,value:this.state.contract.contName,error:t.contName?t.contName:""})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{name:"contCode",label:"Contract Code",type:"text",onChange:this.handleOnDetailsChange,value:this.state.contract.contCode,flgDisabled:!this.state.flags.isEdit&&!this.state.flags.isAdd,error:t.contCode?t.contCode:""}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{name:"contactPerson",label:"Contact Person",type:"text",onChange:this.handleOnDetailsChange,value:this.state.contract.contactPerson,flgDisabled:!this.state.flags.isEdit&&!this.state.flags.isAdd,error:t.contactPerson?t.contactPerson:""})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{name:"contactEmails",label:"Contact Email",type:"text",onChange:this.handleOnDetailsChange,value:this.state.contract.contactEmails,flgDisabled:!this.state.flags.isEdit&&!this.state.flags.isAdd,error:t.contactEmails?t.contactEmails:""}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{name:"effectDate",label:"Effective Date",type:"date",onChange:this.handleOnDetailsChange,value:this.state.contract.effectDate,flgDisabled:!this.state.flags.isEdit&&!this.state.flags.isAdd,error:t.effectDate?t.effectDate:""})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{name:"expiryDate",label:"Expiry Date",type:"date",onChange:this.handleOnDetailsChange,value:this.state.contract.expiryDate,flgDisabled:!this.state.flags.isEdit&&!this.state.flags.isAdd,error:t.expiryDate?t.expiryDate:""}))),n.a.createElement(ne,{name:"Description",label:"Contract Details",rows:"7",onChange:this.handleOnDetailsChange,value:this.state.contract.Description,flgDisabled:!this.state.flags.isEdit&&!this.state.flags.isAdd,error:t.Description?t.Description:""}),n.a.createElement("hr",{style:{borderColor:"gray",boxShadow:"2px 1px 2px gray"}}),n.a.createElement("div",null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-1"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12",style:{height:"45px"}})),this.state.contract.Services.map(function(e,t){return n.a.createElement("div",{key:t,className:"row"},n.a.createElement("div",{className:"col-md-12",style:{height:"35px"}}))}),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("button",{onClick:this.handleOnServiceAdded,className:this.state.flags.isAdd||this.state.flags.isEdit?"":"hidden"},n.a.createElement(k.a,{icon:"plus"}))))),n.a.createElement("div",{className:"col-md-11"},n.a.createElement("div",{className:"row",style:ga},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-2",style:{fontWeight:"bold"}},"Service"),n.a.createElement("div",{className:"col-md-1",style:{fontWeight:"bold"}},"Subcontracted?"),n.a.createElement("div",{className:"col-md-2",style:{fontWeight:"bold"}},"SC Value"),n.a.createElement("div",{className:"col-md-1",style:{fontWeight:"bold"}},"Fees Type"),n.a.createElement("div",{className:"col-md-2",style:{fontWeight:"bold"}},"Fees Value"),n.a.createElement("div",{className:"col-md-2",style:{fontWeight:"bold"}},"Manpower"),n.a.createElement("div",{className:"col-md-2",style:{fontWeight:"bold"}},"Total Value")),this.state.contract.Services.map(function(t,a){return n.a.createElement(oa,{key:t,id:a,service:t,onChange:e.handleOnChange,servList:e.state.servicesList,flags:e.state.flags})}),n.a.createElement("div",{style:{height:"3vh"}},n.a.createElement("hr",null)),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8"}),n.a.createElement("div",{className:"col-md-2",style:{fontWeight:"bold",textAlign:"right"}},"Subtotal"),n.a.createElement("div",{className:"col-md-2",style:{fontWeight:"bold",textAlign:"right"}},this.caclSubtotal())),n.a.createElement("div",{style:{height:"3vh"}},n.a.createElement("hr",null)),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8"}),n.a.createElement("div",{className:"col-md-2",style:{fontWeight:"bold",textAlign:"right"}},"Total Contract Value"),n.a.createElement("div",{className:"col-md-2",style:{fontWeight:"bold",textAlign:"right"}},this.calcContractValue())))))),n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",className:this.state.formProcess?"":"hidden",style:{marginTop:"2vh"}}),n.a.createElement(se,{buttonsOptions:this.state.buttonsOptions}),n.a.createElement(T.ToastContainer,null)))}}]),t}(s.Component),ga={backgroundColor:"lightgray",borderRadius:"25px",paddingTop:"5px",paddingLeft:"10px",paddingRight:"10px",paddingBottom:"5px",margin:"0"};Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a};var fa=function(e,t){var a="",s="",n="",r="";return W.a.firestore().collection("Projects").doc(e).collection("Contracts").doc(t).collection("Plans").doc(e+"."+t+".Plan").get().then(function(e){return e.exists?(a="Ok",s=e.data().Plans,{Success:a,Result:s,FailReason:"",Error:n,Warning:""}):{Success:a="No",Result:s={},FailReason:"No Maintenance Plans were found. Returning empty list.",Error:n,Warning:""}}).catch(function(e){return a="No",s={},r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}})},ba=function(){var e="",t="",a="",s="";return W.a.firestore().collection("Projects").get().then(function(n){var r=[];return n.docs.length>0?(n.forEach(function(e){r.push(e.data().prjName)}),e="Ok",t=r):(e="No",t=r,s="No Projects found. Returning empty list."),{Success:e,Result:t,FailReason:s,Error:a,Warning:""}}).catch(function(n){return e="No",t=[],s="Error",a=n.message,{Success:e,Result:t,FailReason:s,Error:a,Warning:""}})},va=function(e,t){var a="",s="",n="",r="";return W.a.firestore().collection("Projects").doc(e).collection("Contracts").get().then(function(e){var t=[];return e.docs.length>0?(e.forEach(function(e){t.push(e.data().contName)}),a="Ok",s=t):(a="No",s=t,r="No Contracts found. Returning empty list."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s=[],r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}})},Ea=function(e,t,a){var s="",n="",r="",o="",i=W.a.firestore().collection("Projects").doc(e).collection("Contracts").doc(t);return i.get().then(function(o){if(o.exists){var l={Plans:a};return i.collection("Plans").doc(e+"."+t+".Plan").set(l)}return{Success:s="No",Result:n={},FailReason:"Contract was not found. Adding Maintenance Plans Aborted.",Error:r,Warning:""}}).then(function(e){return{Success:s="Ok",Result:n=e,FailReason:o,Error:r,Warning:""}}).catch(function(e){return s="No",n={},o="Error",r=e.message,{Success:s,Result:n,FailReason:o,Error:r,Warning:""}})},Ca=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={uprofile:{},plans:[],columns:[],rows:[],servicesList:[{Name:"MEP"},{Name:"Landscaping"}],projectsList:[],contractsList:[],selectedPrj:"",selectedCont:"",selectedPlan:-1,selectedPPlan:-1,servicePlans:{Plans:[],ServiceName:"",periodsPanelID:null},plan:{fromDate:"",toDate:"",title:""},formProcess:!1,buttonsOptions:{addButton:{showAdd:!1,onAdd:function(){return a.handleAdd()}},editButton:{showEdit:!1,onEdit:function(){return a.handleEdit()}},saveButton:{showSave:!1,onSave:function(){return a.handleOnSave()}},cancelButton:{showCancel:!1,onCancel:function(){return a.handleCnacel()}},searchButton:{showSearch:!1}},flags:{isAdd:!1,isEdit:!1},propsPanel:{chartPnaleClass:"col-md-8",propPanelVisible:!0},errors:{}},a.schema={fromDate:K.a.date().required().label("Plan Starting Date"),toDate:K.a.date().label("Plan Ending Date"),title:K.a.string().label("Service Title")},a.columns=[{type:"string",id:"Service"},{type:"string",id:"Title"},{type:"date",id:"Start"},{type:"date",id:"End"}],a.rows=[["Washington",new Date(1789,3,30),new Date(1795,2,4)],["Washington",new Date(1797,2,15),new Date(1798,2,4)],["Badih",new Date(1791,3,30),new Date(1794,1,4)],["Badih",new Date(1794,8,15),new Date(1798,2,4)]],a.componentDidMount=function(){a.setState({formProcess:!0}),ba().then(function(e){var t=[];e.Result.map(function(e){t.push({Name:e})}),a.setState({projectsList:t}),a.setState({formProcess:!1})}).catch(function(e){console.log(e),a.setState({formProcess:!1})}),Vt().then(function(e){var t=[];e.Success&&e.Result.map(function(e){t.push({Name:e.Description})}),a.setState({servicesList:t})}).catch(function(e){console.log(e)})},a.handleProjectsClick=function(e){var t=e.currentTarget.value;if(""!==t)a.setState({formProcess:!0}),va(t).then(function(e){var s=[];e.Result.map(function(e){s.push({Name:e})}),a.setState({contractsList:s,selectedPrj:t,selectedCont:""}),a.setState({formProcess:!1})}).catch(function(e){console.log(e),a.setState({formProcess:!1,selectedPrj:"",selectedCont:""})});else{a.setState({plans:[],rows:[],selectedPrj:"",selectedCont:""})}},a.handleContractsClick=function(e){var t=e.currentTarget.value;if(""!==t)a.setState({formProcess:!0}),fa(a.state.selectedPrj,t).then(function(e){var s=[];e.Result.length>0&&(s=Object(z.a)(e.Result));var n=[];s.length>0&&s.map(function(e){e.Plans.map(function(t){console.log(new Date(t.fromDate)),n.push([e.ServiceName,t.title,new Date(t.fromDate),new Date(t.toDate)])})});var r=Object(i.a)({},a.state.buttonsOptions);r.addButton.showAdd=!0,a.setState({plans:s,rows:n,selectedCont:t,buttonsOptions:r}),a.setState({formProcess:!1})}).catch(function(e){console.log(e),a.setState({formProcess:!1,selectedCont:""})});else{a.setState({plans:[],rows:[]})}},a.handleAdd=function(){var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1;var t=Object(i.a)({},a.state.buttonsOptions);t.addButton.showAdd=!1,t.editButton.showEdit=!1,t.saveButton.showSave=!0,t.cancelButton.showCancel=!0,a.setState({servicePlans:{Plans:[],ServiceName:"",periodsPanelID:null},plan:{fromDate:"",toDate:"",title:""},flags:e,buttonsOptions:t})},a.handleCnacel=function(){var e=Object(i.a)({},a.state.flags);if(e.isAdd){var t=Object(i.a)({},a.state.servicePlans),s=Object(i.a)({},a.state.plan);t.ServiceName="",t.Plans=[],s={fromDate:"",toDate:"",title:""},e.isAdd=!1,e.isEdit=!1;var n=Object(i.a)({},a.state.buttonsOptions);n.addButton.showAdd=!0,n.editButton.showEdit=!1,n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({servicePlans:t,plan:s,flags:e,buttonsOptions:n})}else{var r=Object(i.a)({},a.state.servicePlans),o=Object(i.a)({},a.state.plan);r.ServiceName="",r.Plans=[],o={fromDate:"",toDate:"",title:""},e.isAdd=!1,e.isEdit=!1;var l=Object(i.a)({},a.state.buttonsOptions);l.addButton.showAdd=!0,l.editButton.showEdit=!1,l.saveButton.showSave=!1,l.cancelButton.showCancel=!1,a.setState({servicePlans:r,plan:o,flags:e,buttonsOptions:l})}},a.handleOnChange=function(e){var t=e.currentTarget,s=t.name,n=t.value;if("ServiceName"===s){var r=Object(i.a)({},a.state.servicePlans),o=a.state.plans.find(function(e){return e.ServiceName===n});o&&o.Plans.find(function(e){return e.fromDate===a.state.plan.fromDate&&0===e.title.localeCompare(a.state.plan.title)})&&T.toast.warn("Similar service plan already exists!",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),r.ServiceName=n,a.setState({servicePlans:r})}else{var l=Object(i.a)({},a.state.plan),c=a.state.plans.find(function(e){return e.ServiceName===a.state.servicePlans.ServiceName});c&&c.Plans.find(function(e){return e.fromDate===n&&0===e.title.localeCompare(l.title)})&&T.toast.warn("Similar service plan already exists!",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),l[s]=n,a.setState({plan:l})}},a.validateFields=function(){var e={};""===a.state.servicePlans.ServiceName&&(e.ServiceName="Service Name is required");var t=K.a.validate(a.state.plan,a.schema,{abortEarly:!1});if(!t.error&&""!==a.state.servicePlans.ServiceName)return null;var s=!0,n=!1,r=void 0;try{for(var o,i=t.error.details[Symbol.iterator]();!(s=(o=i.next()).done);s=!0){var l=o.value;e[l.path[0]]=l.message}}catch(c){n=!0,r=c}finally{try{s||null==i.return||i.return()}finally{if(n)throw r}}return 0===Object.keys(e).length?null:e},a.handleOnSave=function(){var e=a.validateFields();a.setState({errors:e||{}});if(a.setState({formProcess:!0,formVisible:!1}),e){a.setState({formProcess:!1,formVisible:!0})}else{var t=Object(i.a)({},a.state.flags),s=a.state,n=s.servicePlans,r=s.plan,o=s.selectedCont,l=s.selectedPrj;if(a.setState({formProcess:!0}),t.isAdd){var c=Object(z.a)(a.state.plans),d=c.findIndex(function(e){return e.ServiceName===n.ServiceName});-1!==d?(c[d].Plans.push(r),console.log(d,r)):(n.Plans.push(r),c.push(n),console.log("Added new service: ",r)),console.log("Plans: ",c),Ea(l,o,c).then(function(e){console.log(e);var s=[];c.length>0&&c.map(function(e){e.Plans.map(function(t){s.push([e.ServiceName,t.title,Date(t.fromDate),Date(t.toDate)])})}),t.isAdd=!1,t.isEdit=!1;var n=Object(i.a)({},a.state.buttonsOptions);n.addButton.showAdd=!0,n.editButton.showEdit=!0,n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({formProcess:!1,flags:t,buttonsOptions:n,rows:s,plans:c})}).then(function(e){fa(a.state.selectedPrj,a.state.selectedCont).then(function(e){var t=[];e.Result.length>0&&(t=Object(z.a)(e.Result));var s=[];t.length>0&&t.map(function(e){e.Plans.map(function(t){s.push([e.ServiceName,t.title,new Date(t.fromDate),new Date(t.toDate)])})});var n=Object(i.a)({},a.state.buttonsOptions);n.addButton.showAdd=!0,a.setState({plans:t,rows:s,buttonsOptions:n}),a.setState({formProcess:!1})}).catch(function(e){console.log(e),a.setState({formProcess:!1,selectedCont:""})})}).catch(function(e){console.log(e);var s=[];c.length>0&&c.map(function(e){e.Plans.map(function(t){var a=new Date(t.fromDate).getDate(),n=new Date(t.fromDate).getMonth()+1,r=new Date(t.fromDate).getFullYear(),o=new Date(t.toDate).getDate(),i=new Date(t.toDate).getMonth()+1,l=new Date(t.toDate).getFullYear();s.push([e.ServiceName,t.title,new Date(r,n,a),new Date(l,i,o)])})}),t.isAdd=!1,t.isEdit=!1;var n=Object(i.a)({},a.state.buttonsOptions);n.addButton.showAdd=!0,n.editButton.showEdit=!0,n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({formProcess:!1,flags:t,buttonsOptions:n,rows:s})})}else{var u=Object(z.a)(a.state.plans),h=a.state,m=h.selectedPlan,p=h.selectedPPlan;u[m].Plans[p]=Object(i.a)({},r),Ea(l,o,u).then(function(e){console.log(e);var s=[];u.length>0&&u.map(function(e){e.Plans.map(function(t){var a=new Date(t.fromDate).getDate(),n=new Date(t.fromDate).getMonth()+1,r=new Date(t.fromDate).getFullYear(),o=new Date(t.toDate).getDate(),i=new Date(t.toDate).getMonth()+1,l=new Date(t.toDate).getFullYear();s.push([e.ServiceName,t.title,new Date(r,n,a),new Date(l,i,o)])})}),t.isAdd=!1,t.isEdit=!1;var n=Object(i.a)({},a.state.buttonsOptions);n.addButton.showAdd=!0,n.editButton.showEdit=!0,n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({formProcess:!1,flags:t,buttonsOptions:n,rows:s})}).then(function(e){fa(a.state.selectedPrj,a.state.selectedCont).then(function(e){var t=[];e.Result.length>0&&(t=Object(z.a)(e.Result));var s=[];t.length>0&&t.map(function(e){e.Plans.map(function(t){s.push([e.ServiceName,t.title,new Date(t.fromDate),new Date(t.toDate)])})});var n=Object(i.a)({},a.state.buttonsOptions);n.addButton.showAdd=!0,a.setState({plans:t,rows:s,buttonsOptions:n}),a.setState({formProcess:!1})}).catch(function(e){console.log(e),a.setState({formProcess:!1,selectedCont:""})})}).catch(function(e){console.log(e);var s=[];u.length>0&&u.map(function(e){e.Plans.map(function(t){s.push([e.ServiceName,t.title,new Date(t.fromDate),new Date(t.toDate)])})}),t.isAdd=!1,t.isEdit=!1;var n=Object(i.a)({},a.state.buttonsOptions);n.addButton.showAdd=!0,n.editButton.showEdit=!0,n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({formProcess:!1,flags:t,buttonsOptions:n,rows:s})})}}},a.handleEdit=function(){var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0;var t=Object(i.a)({},a.state.buttonsOptions);t.addButton.showAdd=!1,t.editButton.showEdit=!1,t.saveButton.showSave=!0,t.cancelButton.showCancel=!0,a.setState({flags:e,buttonsOptions:t})},a.handleOnPlanClick=function(e){var t=e.split("_")[0],s=e.split("_")[1],n=Object(z.a)(a.state.plans),r=n.findIndex(function(e){return 0===e.ServiceName.localeCompare(t)});if(-1!==r){var o=Object(i.a)({},n[r]),l=Object(i.a)({},n[r].Plans[s]);Object(i.a)({},a.state.buttonsOptions).editButton.showEdit=!0,a.setState({servicePlans:o,plan:l,selectedPlan:r,selectedPPlan:s})}},a.handleToggleProperties=function(){var e=a.state.propsPanel;e.propPanelVisible?(e.propPanelVisible=!1,e.chartPnaleClass="col-md-11"):(e.propPanelVisible=!0,e.chartPnaleClass="col-md-8"),a.setState({propsPanel:e})};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.errors;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{title:"Job Planner",bgColor:"white",color:"gray"}),n.a.createElement("div",{className:"row",style:ja},n.a.createElement("div",{className:this.state.propsPanel.chartPnaleClass,style:Oa},n.a.createElement(D.a,{chartType:"Timeline",data:[this.columns].concat(Object(z.a)(this.state.rows)),width:"300%",height:"300px",loader:n.a.createElement("div",null,"Loading Chart"),chartPackage:["controls"],chartEvents:this.state.chart_events,graph_id:"plansTimeline",options:{showRowNumber:!0,hAxis:{minValue:new Date(2019,1,1),maxValue:new Date(2019,12,31),format:"dd/MM/yyyy"}}}),n.a.createElement("hr",{style:ya}),n.a.createElement("div",null,n.a.createElement("table",{className:"table table-striped table-hover",style:{width:"100%"}},n.a.createElement("thead",null,n.a.createElement("tr",{class:"success"},n.a.createElement("th",null,"Service Name"),n.a.createElement("th",null,"Service Title"),n.a.createElement("th",null,"From Date"),n.a.createElement("th",null,"To Date"),n.a.createElement("th",null))),n.a.createElement("tbody",null,this.state.plans.map(function(t){return t.Plans.map(function(a,s){return n.a.createElement("tr",{key:t.ServiceName+s},n.a.createElement("td",null,t.ServiceName),n.a.createElement("td",null,a.title),n.a.createElement("td",null,a.fromDate),n.a.createElement("td",null,a.toDate),n.a.createElement("td",null,n.a.createElement("button",{onClick:function(){return e.handleOnPlanClick(t.ServiceName+"_"+s)}},n.a.createElement(k.a,{icon:"edit"}))))})}))))),n.a.createElement("div",{className:"col-md-1 "+(this.state.propsPanel.propPanelVisible?"hidden":""),style:Sa},n.a.createElement("div",{style:{width:"100%",marginBottom:"15px"}},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-1"},n.a.createElement("div",{onClick:function(){e.handleToggleProperties()}},n.a.createElement(k.a,{icon:"angle-double-left"}))),n.a.createElement("div",{className:"col-md-11"})))),n.a.createElement("div",{className:"col-md-4 "+(this.state.propsPanel.propPanelVisible?"":"hidden"),style:Sa},n.a.createElement("div",{style:{width:"100%",marginBottom:"15px"}},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-1"},n.a.createElement("div",{onClick:function(){e.handleToggleProperties()}},n.a.createElement(k.a,{icon:"angle-double-right"}))),n.a.createElement("div",{className:"col-md-10"},n.a.createElement(se,{buttonsOptions:this.state.buttonsOptions})),n.a.createElement("div",{className:"col-md-1"}))),n.a.createElement("img",{src:x.a,width:"40vw",alt:"processing",className:this.state.formProcess?"":"hidden",style:{marginTop:"2vh"}}),n.a.createElement(oe,{name:"Projects",label:"Project",values:this.state.projectsList,onChange:this.handleProjectsClick,defValue:this.state.selectedPrj,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit}),n.a.createElement(oe,{name:"Contracts",label:"Contract",values:this.state.contractsList,onChange:this.handleContractsClick,defValue:this.state.selectedCont,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit}),n.a.createElement(oe,{name:"ServiceName",label:"Service",values:this.state.servicesList,onChange:this.handleOnChange,defValue:this.state.servicePlans.ServiceName,flgDisabled:!this.state.flags.isAdd&&!this.state.flags.isEdit,error:t.ServiceName?t.ServiceName:""}),n.a.createElement(ie,{name:"title",label:"Service Title",value:this.state.plan.title,onChange:this.handleOnChange,error:t.title?t.title:"",flgDisabled:!this.state.flags.isAdd&&!this.state.flags.isEdit}),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{type:"date",label:"From Date",name:"fromDate",value:this.state.plan.fromDate,onChange:this.handleOnChange,error:t.fromDate?t.fromDate:"",flgDisabled:!this.state.flags.isAdd&&!this.state.flags.isEdit})),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(ie,{type:"date",label:"to Date",name:"toDate",value:this.state.plan.toDate,onChange:this.handleOnChange,error:t.toDate?t.toDate:"",flgDisabled:!this.state.flags.isAdd&&!this.state.flags.isEdit}))))),n.a.createElement(T.ToastContainer,null))}}]),t}(s.Component),Oa={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"68vh",overflow:"auto"},Sa={paddingTop:"15px",border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"68vh",backgroundColor:"lightgray",overflow:"auto"},ja={marginLeft:"1vw",marginRight:"1vw"},ya={borderColor:"gray",boxShadow:"2px 1px lightgray"},wa=V.auth(),Na=V.firestore(),Pa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={credentials:{useremail:"",password:""},user:{},formProcess:!1,errorMessage:""},a.handleChange=function(e){var t=Object(i.a)({},a.state.credentials);t[e.currentTarget.name]=e.currentTarget.value,a.setState({credentials:t})},a.handleSubmit=function(e){var t=a.state.credentials,s=t.useremail,n=t.password,r=a.props.history;a.setState({formProcess:!0}),a.props.updateToken(""),wa.signInWithEmailAndPassword(s,n).then(function(e){return sessionStorage.token=e.user.refreshToken,a.setState({user:e.user}),a.props.updateToken(e.user.refreshToken),Na.collection("Users").doc("docUsers").collection("colUsers").where("UID","==",e.user.uid).get()}).then(function(e){if(e.docs.length>0){a.props.onSuccessfulSignin(e.docs[0].data());var t=Object(i.a)({uid:a.state.user.uid},e.docs[0].data());sessionStorage.setItem("uprofile",JSON.stringify(t)),a.setState({formProcess:!1}),r.push("/fms/dashboard")}else console.log(e)}).catch(function(e){console.log("Unsucessful",e),a.setState({errorMessage:e.message,formProcess:!1}),sessionStorage.clear()})},a.props.onSignOut(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{title:"Log-in to the system",bgColor:"white",color:"gray"}),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-4"}),n.a.createElement("div",{className:"col-md-4",style:Ra},n.a.createElement(ie,{name:"useremail",label:"User Email",onChange:this.handleChange}),n.a.createElement(ie,{name:"password",label:"Password",type:"password",onChange:this.handleChange}),n.a.createElement("hr",null),n.a.createElement("button",{className:"btn btn-primary btn-sm",style:{width:"100%"},onClick:this.handleSubmit},"Log-in"),n.a.createElement("img",{src:x.a,width:"40vw",alt:"processing",className:this.state.formProcess?"":"hidden",style:{marginTop:"2vh"}}),n.a.createElement("div",{className:"row "+(""!==this.state.errorMessage?"":"hidden")},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("hr",null),n.a.createElement("label",{style:Aa},this.state.errorMessage)))),n.a.createElement("div",{className:"col-md-4"})))}}]),t}(s.Component),Ra={borderWidth:"1",borderStyle:"solid",borderColor:"lightgray",borderRadius:"25px",padding:"15px"},Aa={color:"red",fontStyle:"italic"};String.prototype.formatDate=function(e,t){var a=this.split("-").length>1?this.split("-"):this.split("/"),s=this.split("-").length>1?1:2,n=e.split(t),r=1===s?a[2].split(" ")[0]:a[1],o=1===s?a[1]:a[0],i=1===s?a[0]:a[2].split(" ")[0],l="";switch(n[0]){case"dd":l=r+t;break;case"MM":case"mm":l=o+t;break;case"yyyy":l=i+t}switch(n[1]){case"dd":l+=r+t;break;case"MM":case"mm":l+=o+t;break;case"yyyy":l+=i+t}switch(n[2]){case"dd":l+=r;break;case"MM":case"mm":l+=o;break;case"yyyy":l+=i}return l};var Da=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tickets,a=e.onTicketClick;return n.a.createElement(n.a.Fragment,null,n.a.createElement("table",{className:"table table-striped table-hover",style:{fontSize:"0.75vw"}},n.a.createElement("thead",null,n.a.createElement("tr",{className:"info"},n.a.createElement("th",{style:{width:"10%"}},"Ticket #"),n.a.createElement("th",{style:{width:"10%"}},"Date"),n.a.createElement("th",{style:{textAlign:"center"}},"Client"),n.a.createElement("th",{style:{textAlign:"center"}},"Project"),n.a.createElement("th",null,"Subject"),n.a.createElement("th",{style:{width:"10%",textAlign:"center"}},"Status"))),n.a.createElement("tbody",null,t.map(function(e,t){return n.a.createElement("tr",{key:t,onClick:function(){return a(t)}},n.a.createElement("td",{style:{textAlign:"center"}},e.TicketNum),n.a.createElement("td",{style:{textAlign:"center"}},e.OpeningDT.formatDate("dd-mm-yyyy","-")),n.a.createElement("td",{style:{textAlign:"left"}},e.ClientName),n.a.createElement("td",{style:{textAlign:"left"}},e.ProjectName),n.a.createElement("td",{style:{textAlign:"left"}},e.Subject),n.a.createElement("td",{style:{textAlign:"center"}},e.TicketStatus))}))))}}]),t}(s.Component),Ta=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={status:[{Name:"Open"},{Name:"In Progress"},{Name:"Closed"}]},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.ticket,t=(e.AttendedBy,e.ClientName),a=(e.ClosedBy,e.ClosingDT,e.ComplCat),s=e.ContractName,r=e.Details,o=(e.Duration,e.FileAttach,e.OpeningDT),i=e.ProjectName,l=(e.ReportedBy,e.ReportedOn,e.Subject),c=e.TicketStatus,d=(e.tsOpeningDT,e.TicketNum),u=this.props,h=u.clientsList,m=u.projectsList,p=u.contractsList,g=u.compleCatList,f=u.flags,b=u.openedBy;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12",style:{padding:"0"}},n.a.createElement("div",{className:"col-md-4"},n.a.createElement(ie,{name:"TicketNumber",label:"Ticket Number",value:d,flgDisabled:!0})),n.a.createElement("div",{className:"col-md-4"},n.a.createElement(ie,{name:"OpeningDT",label:"Opening Date",value:o,flgDisabled:!0})),n.a.createElement("div",{className:"col-md-4"},n.a.createElement(oe,{name:"TicketStatus",label:"Ticket Status",values:this.state.status,defValue:c,flgDisabled:!f.isAdd&&!f.isEdit}))),n.a.createElement("div",{className:"col-md-12"},n.a.createElement(oe,{name:"ClientName",label:"Client Name",flgDisabled:!1,values:h,onChange:this.props.onClientChange,defValue:t})),n.a.createElement("div",{className:"col-md-12"},n.a.createElement(oe,{name:"ProjectName",label:"Project Name",flgDisabled:!1,values:m,onChange:this.props.onProjectChange,defValue:i})),n.a.createElement("div",{className:"col-md-12"},n.a.createElement(oe,{name:"ContractName",label:"Contract Name",flgDisabled:!1,values:p,onChange:this.props.onChange,defValue:s})),n.a.createElement("div",{className:"col-md-12"},n.a.createElement(oe,{name:"ComplCat",label:"Subject Category",flgDisabled:!1,defValue:a,values:g,onChange:this.props.onChange})),n.a.createElement("div",{className:"col-md-12"},n.a.createElement(ie,{name:"Subject",label:"Subject",value:l,onChange:this.props.onChange,flgDisabled:!f.isAdd&&!f.isEdit})),n.a.createElement("div",{className:"col-md-12"},n.a.createElement(ne,{name:"Details",label:"Details",rows:"5",value:r,onChange:this.props.onChange,flgDisabled:!f.isAdd&&!f.isEdit})),n.a.createElement("div",{className:"col-md-12"},n.a.createElement(ie,{name:"userName",label:"Opened By",rows:"5",value:b,flgDisabled:!0}))))}}]),t}(s.Component),ka=function(e){var t=e.reply,a=t.Details,r=(t.FileAttachement,t.RepliedBy),o=t.tsReplyDT,i=e.ticket.ProjectName,l=e.onChange,c=e.onFileSelect,d=Object(s.useState)(!1),u=Object(Pt.a)(d,2),h=u[0],m=u[1],p=Object(s.useState)([]),g=Object(Pt.a)(p,2),f=g[0],b=g[1];Object(s.useEffect)(function(){(function(e){var t="",a="",s="",n="",r=[];return W.a.firestore().collection("Maintenance").doc("Jobs").collection("JobCards").where("jcPrjName","==",e).get().then(function(e){return 0==e.docs.length?(t="No",a=[],n="There are no Job Cards found. Returning Empty List."):(e.forEach(function(e){var t={jcNumber:e.id,jcDate:e.data().jcDate,jcPrjName:e.data().jcPrjName,jcContName:e.data().jcContName,jcStatus:e.data().jcStatus};r.push(t)}),t="Ok",a=r),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a=[],n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}})})(i).then(function(e){b(Object(z.a)(e.Result))})},[]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row",style:{paddingLeft:"0.75vw",paddingRight:"0.75vw"}},n.a.createElement("div",{className:"col-md-12"},n.a.createElement(ie,{name:"tsReplyDT",label:"Reply Timestamp",value:o,flgDisabled:!0}),n.a.createElement(ie,{name:"RepliedBy",label:"Replied By",value:r,flgDisabled:!0}),h?n.a.createElement(Ba,{jcList:f,onClick:function(e){Xt(e).then(function(t){var a=t.Result,s=a.jcDate,n=a.jcTime,r=a.jcDetails,o=a.jcStatus,i="<b>Job Card Details:</b><br /><b>JC Number:</b> ".concat(e,"<br /><b>JC Date/Time:</b> ").concat(s," ").concat(n,"<br /><b>Details:</b><br />").concat(r,"<br /><b>JC Status:</b> ").concat(o);l("Details",i),m(!1)})},onClose:function(){m(!1)}}):null,n.a.createElement(re,{name:"Details",label:"Reply Details",value:a,flgDisabled:!0,onChange:function(e,t){l("Details",t)},onInput:function(e){var t=e.split(" ");"#"==t[t.length-1]&&m(!0)}}),n.a.createElement(ie,{name:"FileSelect",type:"file",label:"Select File",onChange:c,flgDisabled:!1}))))},Ba=function(e){return n.a.createElement("div",{style:{position:"absolute",width:"150px",height:"125px",border:"solid 1px black",backgroundColor:"white",display:"flex",flexDirection:"column",overflowY:"scroll"}},n.a.createElement("div",{style:{width:"100%",backgroundColor:"lightgray",display:"flex",flexDirection:"row"}},n.a.createElement("div",{style:{width:"85%"}},n.a.createElement("strong",null,"Job Cards")),n.a.createElement("div",{style:{cursor:"pointer"},onClick:e.onClose},n.a.createElement("strong",null,"X"))),e.jcList.map(function(t){return n.a.createElement("div",{style:{width:"100%"},onClick:function(){return e.onClick(t.jcNumber)}},t.jcNumber+" "+t.jcDate)}))},xa=Ta,Fa=a(197),Ia="new_ticket_001",La="ticket_action_001",Va=function(e,t,a,s){return Fa.a.send(a,t,e,s)};Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a};var Wa=function(){var e=Object(L.a)(I.a.mark(function e(){var t,a,s,n,r,o,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a="",s="","",n="",r=W.a.firestore(),o={timestampsInSnapshots:!0},r.settings(o),l=r.collection("HelpDesk"),c=[],e.abrupt("return",l.get().then(function(e){return e.docs.length>0?(e.forEach(function(e){c.push(Object(i.a)({},e.data(),{TicketNum:e.id}))}),t="Ok",a=c):(t="No",a=[],n="No Tickets were found. Returning empty list."),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a=[],n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Ma=function(){var e=Object(L.a)(I.a.mark(function e(){var t,a,s,n,r,o,i,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a="",s="","",n="",r=W.a.firestore(),o={timestampsInSnapshots:!0},r.settings(o),i=r.collection("Dependencies").doc("HelpDesk").collection("Categories"),l=[],e.abrupt("return",i.get().then(function(e){return e.docs.length>0?(e.forEach(function(e){l.push(e.data().categName)}),t="Ok",a=l):(t="No",a=[],n="No Ticket Categories were found. Returning empty list."),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a=[],n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Ha=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),i={timestampsInSnapshots:!0},o.settings(i),l=o.collection("HelpDesk"),c=[],e.abrupt("return",l.doc(t).collection("Replies").get().then(function(e){return e.docs.length>0?(e.forEach(function(e){var t,a={Details:(t=e.data().Details,(t+"").replace(/&#\d+;/gm,function(e){return String.fromCharCode(e.match(/\d+/gm)[0])})),FileAttachment:e.data().FileAttachment,RepliedBy:e.data().RepliedBy,replyId:e.id};c.push(a)}),a="Ok",s=c):(a="No",s=[],r="No Replies were found. Returning empty list."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s=[],r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ua=function(e,t){var a,s="",n="",r="",o="",l=W.a.firestore();l.settings({timestampsInSnapshots:!0});var c=Object(i.a)({},e),d=0,u="",h=(a={ticket_number:"",subject:"",date_time:"",opened_by:"",cl_prj_cont:"",subj_cat:""},Object(Gt.a)(a,"subject",""),Object(Gt.a)(a,"details",""),Object(Gt.a)(a,"from_name","Experts Service Management"),Object(Gt.a)(a,"email_to",""),Object(Gt.a)(a,"email_from",""),Object(Gt.a)(a,"reply_to",""),a);return l.collection("Dependencies").doc("HelpDesk").get().then(function(e){return d=e.data().TicketCounter,c.TicketNum="AFMS"+d.pad(6,"0"),l.collection("HelpDesk").doc("AFMS"+d.pad(6,"0")).set(c)}).then(function(e){return l.collection("Dependencies").doc("HelpDesk").update({TicketCounter:d+1})}).then(function(e){return l.collection("Inventory").doc("Assets").collection("Clients").where("clName","==",c.ClientName).get()}).then(function(e){return u=e.docs[0].data().clEmail,l.collection("Dependencies").doc("HelpDesk").get()}).then(function(e){var a=e.data().email,s=e.data().emailServiceID,r=e.data().emailServiceUserID,o=t.email,i={TicketNumber:"AFMS"+d.pad(6,"0")};h.ticket_number="AFMS"+d.pad(6,"0"),h.subject=c.Subject,h.date_time=c.tsOpeningDT,h.opened_by=c.ReportedBy,h.cl_prj_cont=c.ClientName+"\\"+c.ProjectName+"\\"+c.ContractName,h.subj_cat=c.ComplCat,h.details=c.Details,h.email_to=a+", "+o+", "+u,h.email_from=a,h.reply_to=a;var l={Success:"Ok",Result:i.TicketNumber,FailReason:"",Error:"",Warning:""};return Va(h,Ia,s,r).then(function(e){return l}).catch(function(e){return n.Warning="Email Sending Failure!",console.log("There was an error sending the email.",e),l})}).catch(function(e){return s="No",n="ERROR",o="Error",r=e.message,console.log("Error occured: ",e),{Success:s,Result:n,FailReason:o,Error:r,Warning:""}})},Ga=function(e,t,a,s){var n;console.log("postTicketReplySupport: ",t);var r=e.TicketNum,o=t.RepliedBy,l=t.tsReplyDT,c=t.Details.replace(/./gm,function(e){return e.match(/[a-z0-9\s]+/i)?e:"&#"+e.charCodeAt(0)+";"}),d="",u="",h="",m="",p=W.a.firestore();p.settings({timestampsInSnapshots:!0});var g="";console.log("You passed FileAttachment as: ",t.FileAttachment);var f={RepliedBy:o,Details:c,FileAttachment:Object(i.a)({},t.FileAttachment),tsReplyDT:new Date(l)},b=(n={ticket_number:"",subject:"",date_time:"",opened_by:"",cl_prj_cont:"",subj_cat:""},Object(Gt.a)(n,"subject",""),Object(Gt.a)(n,"details",""),Object(Gt.a)(n,"from_name","Experts Service Management"),Object(Gt.a)(n,"email_to",""),Object(Gt.a)(n,"email_from",""),Object(Gt.a)(n,"reply_to",""),n);return p.collection("HelpDesk").doc(r).collection("Replies").doc(t.replyId).set(f).then(function(e){return p.collection("HelpDesk").doc(r).update({TicketStatus:a})}).then(function(e){return p.collection("HelpDesk").where("TicketNum","==",r).get()}).then(function(e){return p.collection("Inventory").doc("Assets").collection("Clients").where("clName","==",e.docs[0].data().ClientName).get()}).then(function(e){return g=e.docs[0].data().clEmail,p.collection("Dependencies").doc("HelpDesk").get()}).then(function(a){var n=a.data().email,i=a.data().emailServiceID,c=a.data().emailServiceUserID,d=s.email;b.ticket_number=r,b.subject=e.Subject,b.date_time=l,b.opened_by=o,b.cl_prj_cont=e.ClientName+"\\"+e.ProjectName+"\\"+e.ContractName,b.details=t.Details,b.email_to=n+", "+d+", "+g,b.email_from=n,b.reply_to=n;var h={Success:"Ok",Result:{},FailReason:"",Error:"",Warning:""};return Va(b,La,i,c).then(function(e){return h}).catch(function(e){return u.Warning="Email Sending Failure!",console.log("There was an error sending the email.",e),h})}).catch(function(e){return d="No",u={},m="Error",h=e.message,{Success:d,Result:u,FailReason:m,Error:h,Warning:""}})},Ja=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),i={timestampsInSnapshots:!0},o.settings(i),l=o.collection("Users").doc("docUsers").collection("colUsers"),c=[],e.abrupt("return",l.where("UID","==",t).get().then(function(e){return e.docs.length>0?(e.forEach(function(e){c.push(e.data().displayName)}),a="Ok",s=c):(a="No",s=[],r="No matching UIDs were found. Returning empty list."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s=[],r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),qa=a(194),za=a.n(qa),Xa=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).getUserName=function(e){Ja(e).then(function(e){return e.Success?e.Result[0]:"N/A"}).catch(function(e){return console.log(e),"N/A"})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.ticket,t=(e.AttendedBy,e.ClientName),a=(e.ClosedBy,e.ClosingDT,e.ComplCat),s=e.ContractName,r=e.Details,o=(e.Duration,e.FileAttach,e.OpeningDT),i=e.ProjectName,l=e.ReportedBy,c=(e.ReportedOn,e.Subject),d=e.TicketStatus,u=(e.tsOpeningDT,e.userID,e.TicketNum),h=this.props,m=h.replies,p=h.reply,g=h.flags,f=h.onChange,b=h.onFileSelect;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12",style:{padding:"0",fontSize:"0.75vw"}},n.a.createElement("table",{className:"table table-striped table-hover table-bordered"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"left"}},"Ticket#:"),n.a.createElement("td",null,u),n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"left"}},"Opened On:"),n.a.createElement("td",null,o)),n.a.createElement("tr",null,n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"left"}},"Status:"),n.a.createElement("td",null,n.a.createElement("select",{name:"TicketStatus",id:"TicketStatus",disabled:!g.isReply,onChange:function(e){var t=e.currentTarget.value;f("TicketStatus",t)},style:{fontSize:"12px"},value:d},n.a.createElement("option",{value:""}),n.a.createElement("option",{value:"Open"},"Open"),n.a.createElement("option",{value:"In Progress"},"In Progress"),n.a.createElement("option",{value:"Closed"},"Closed"))),n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"left"}},"Reported By:"),n.a.createElement("td",null,l)),n.a.createElement("tr",null,n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"left"}},"Client Name:"),n.a.createElement("td",null,t),n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"left"}},"Project Name:"),n.a.createElement("td",null,i)),n.a.createElement("tr",null,n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"left"}},"Contract Name:"),n.a.createElement("td",{colSpan:"3"},s)),n.a.createElement("tr",null,n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"left"}},"Subject Category:"),n.a.createElement("td",{colSpan:"3"},a)),n.a.createElement("tr",null,n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"left"}},"Subject:"),n.a.createElement("td",{colSpan:"3"},c)),n.a.createElement("tr",null,n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"left"}},"Details:"),n.a.createElement("td",{colSpan:"3"},r)),n.a.createElement("tr",{className:"info"},n.a.createElement("td",{colSpan:"4"},"Replies")),m?m.map(function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",{style:{fontWeight:"bold",textAlign:"left"}},e.replyId),n.a.createElement("td",{colSpan:"3",style:{textAlign:"left"}},n.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.Details}}),n.a.createElement("div",null,"X"!=e.FileAttachment?n.a.createElement(Za,{file:e.FileAttachment}):"")))}):"")),n.a.createElement("hr",null),g.isReply?n.a.createElement(ka,{reply:p,flags:g,onChange:f,onFileSelect:b,ticket:this.props.ticket}):"")))}}]),t}(s.Component),Za=function(e){return n.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},n.a.createElement("div",{style:{marginLeft:"3px",marginRight:"3px"}},n.a.createElement("img",{src:za.a,height:"30vw"})),n.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignContent:"flex-end",alignItems:"flex-end",justifyContent:"center"}},n.a.createElement("a",{href:e.file.DownloadURL,target:"_blank"},e.file.FileName)))},Qa=Xa;a(243),a(238);Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a};var Ka=function(){var e=Object(L.a)(I.a.mark(function e(){var t,a,s,n,r,o,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a="",s="","",n="",r=W.a.firestore(),o={timestampsInSnapshots:!0},r.settings(o),l=r.collection("StorageUploads").doc("Documents").collection("Files"),c=[],e.abrupt("return",l.get().then(function(e){return e.docs.length>0?(e.forEach(function(e){c.push(Object(i.a)({},e.data()))}),t="Ok",a=c):(t="No",a=[],n="No Attachments were found. Returning empty list."),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a=[],n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Ya=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,l,c,d;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),l={timestampsInSnapshots:!0},o.settings(l),c=o.collection("StorageUploads").doc("Documents").collection("Files"),d=[],e.abrupt("return",c.where("client","==",t).get().then(function(e){return e.docs.length>0?(e.forEach(function(e){d.push(Object(i.a)({},e.data()))}),a="Ok",s=d):(a="No",s=[],r="No Attachments were found. Returning empty list."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s=[],r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_a=function(){var e=Object(L.a)(I.a.mark(function e(t,a){var s,n,r,o,i,l,c,d,u;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s="",n="",r="","",o="",i=t.client,l=W.a.firestore(),c={timestampsInSnapshots:!0},l.settings(c);try{d=W.a.storage().ref("attachments/"+i+"/"+a.name),u=d.put(a)}catch(h){console.log(h)}return e.abrupt("return",new Promise(function(e,a){u.on("state_changed",function(e){},function(e){s="No",n=[],o="Error",r=e.message,a({Success:s,Result:n,FailReason:o,Error:r,Warning:""})},function(){var a="";u.snapshot.ref.getDownloadURL().then(function(i){a=i,t.DownloadURL=a,t.UploadDate=(new Date).toString(),es(t).then(function(a){n=a,e({Success:s="Ok",Result:t,FailReason:o,Error:r,Warning:""})})})})}).then(function(e){return e}).catch(function(e){return console.log("Error: ",e),e}));case 11:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),$a=function(){var e=Object(L.a)(I.a.mark(function e(t,a,s){var n,r,o,i,l,c,d,u;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="",r="",o="","",i="",t.client,l=W.a.firestore(),c={timestampsInSnapshots:!0},l.settings(c);try{d=W.a.storage().ref("attachments/"+s.ClientName+"/"+s.TicketNum+"/"+a.name),u=d.put(a)}catch(h){console.log(h)}return e.abrupt("return",new Promise(function(e,a){u.on("state_changed",function(e){},function(e){n="No",r=[],i="Error",o=e.message;var t={Success:n,Result:r,FailReason:i,Error:o,Warning:""};console.log("There was an error: ",e),a(t)},function(){var a="";console.log("Upload completed"),u.snapshot.ref.getDownloadURL().then(function(s){a=s,t.DownloadURL=a,t.UploadDate=(new Date).toString(),console.log("Returning download URL"),e(t)})})}).then(function(e){return console.log("Successful upload.",e),e}).catch(function(e){return console.log("Error: ",e),e}));case 11:case"end":return e.stop()}},e,this)}));return function(t,a,s){return e.apply(this,arguments)}}(),es=function(e){var t=e.TitleText,a=e.FileName,s={TitleText:t,FileSize:e.FileSize,FileName:a,DownloadURL:e.DownloadURL,UploadDate:e.UploadDate,client:e.client};return W.a.firestore().collection("StorageUploads").doc("Documents").collection("Files").doc(a).set(s).then(function(t){return e}).catch(function(e){return console.log(e),!1})},ts=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a="",s="",n="","",r="",o=W.a.firestore(),i={timestampsInSnapshots:!0},o.settings(i),W.a.storage().ref("attachments/"+t.client+"/"+t.FileName).delete().then(function(){as(t).then(function(e){return s=e,{Success:a="Ok",Result:t,FailReason:r,Error:n,Warning:""}})}).catch(function(e){return a="No",s=[],r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),as=function(e){e.TitleText;var t=e.FileName;e.FileSize,e.DownloadURL,e.UploadDate;return W.a.firestore().collection("StorageUploads").doc("Documents").collection("Files").doc(t).delete().then(function(t){return e}).catch(function(e){return console.log(e),!1})},ss=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={tickets:[],replies:[],selectedTicketIndex:0,reply:{Details:"",FileAttachment:{client:"",TitleText:"",FileName:"",FileSize:"",UploadDate:(new Date).toString(),DownloadURL:""},RepliedBy:"",tsReplyDT:new Date},clientsList:[],projectsList:[],contractsList:[],compleCatList:[],uprofile:{},ticket:{AttendedBy:"",ClientName:"",ClosedBy:"",ClosingDT:"",ComplCat:"",ContractName:"",Details:"",Duration:0,FileAttach:"",OpeningDT:"",ProjectName:"",ReportedBy:"",ReportedOn:"",Subject:"",TicketStatus:"",tsOpeningDT:"",userID:""},buttonsOptions:{addButton:{showAdd:!0,onAdd:function(){return a.handleAdd()}},saveButton:{showSave:!1,onSave:function(){return a.handleSubmit()}},cancelButton:{showCancel:!1,onCancel:function(){return a.handleCancel()}},searchButton:{showSearch:!1,onSearch:null},replyButton:{showReply:!1,onReply:function(){return a.handleReply()}}},flags:{isAdd:!1,isReply:!1,isEdit:!1},showButtons:!0,file:null},a.handleOnFileSelect=function(e){var t=e.currentTarget.value,s=Object(i.a)({},a.state.reply),n=Object(i.a)({},s.FileAttachment),r=e.currentTarget.files[0];console.log("*** File: ",r),r?(n.FileName=t.name,n.FileName=r.name,n.FileSize=r.size):n="X",s.FileAttachment=Object(i.a)({},n),a.setState({reply:s,file:r})},a.handleAdd=function(){var e={AttendedBy:"",ClientName:"",ClosedBy:"",ClosingDT:"",ComplCat:"",ContractName:"",Details:"",Duration:0,FileAttach:"",OpeningDT:(new Date).toLocaleDateString().formatDate("dd-mm-yyyy","-"),ProjectName:"",ReportedBy:a.state.uprofile.displayName,ReportedOn:new Date,Subject:"",TicketStatus:"Open",tsOpeningDT:new Date,userID:a.state.uprofile.UID,TicketNum:""},t=Object(i.a)({},a.state.flags);t.isAdd=!0,t.isEdit=!1,t.isReply=!1;var s=Object(i.a)({},a.state.buttonsOptions);s.addButton.showAdd=!1,s.replyButton.showReply=!1,s.saveButton.showSave=!0,s.cancelButton.showCancel=!0,a.setState({ticket:e,replies:[],flags:t,buttonsOptions:s})},a.handleReply=function(){var e={Details:"",FileAttachment:{client:"",TitleText:"",FileName:"",FileSize:"",UploadDate:(new Date).toString(),DownloadURL:""},RepliedBy:a.state.uprofile.displayName,tsReplyDT:new Date},t=Object(i.a)({},a.state.flags);t.isAdd=!1,t.isEdit=!1,t.isReply=!0;var s=Object(i.a)({},a.state.buttonsOptions);s.addButton.showAdd=!1,s.replyButton.showReply=!1,s.saveButton.showSave=!0,s.cancelButton.showCancel=!0,a.setState({reply:e,flags:t,buttonsOptions:s})},a.handleSubmit=function(){a.setState({showButtons:!1});var e=Object(i.a)({},a.state.flags),t=Object(i.a)({},a.state.ticket);if(e.isAdd)Ua(t,a.state.uprofile).then(function(s){t.TicketNum=s.Result;var n=Object(z.a)(a.state.tickets);n.push(t),n=_.a.orderBy(n,["TicketNum"]),e.isAdd=!1,e.isReply=!1,e.isEdit=!1;var r=Object(i.a)({},a.state.buttonsOptions);r.addButton.showAdd=!0,r.replyButton.showReply=!0,r.saveButton.showSave=!1,r.cancelButton.showCancel=!1,a.setState({ticket:t,tickets:n,flags:e,buttonsOptions:r,showButtons:!0,replies:[]})}).catch(function(s){console.log(s),t={AttendedBy:"",ClientName:"",ClosedBy:"",ClosingDT:"",ComplCat:"",ContractName:"",Details:"",Duration:0,FileAttach:"",OpeningDT:"",ProjectName:"",ReportedBy:"",ReportedOn:"",Subject:"",TicketStatus:"",tsOpeningDT:"",userID:""},e.isAdd=!1,e.isReply=!1,e.isEdit=!1;var n=Object(i.a)({},a.state.buttonsOptions);n.addButton.showAdd=!0,n.replyButton.showReply=!0,n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({ticket:t,flags:e,buttonsOptions:n,showButtons:!0,replies:[]})});else if(e.isReply){var s=Object(z.a)(a.state.replies),n=(new Date).getDate().pad(2,"0")+"."+((new Date).getMonth()+1).pad(2,"0")+"."+(new Date).getFullYear().toString()+" "+(new Date).getHours().toString()+":"+(new Date).getMinutes().toString()+":"+(new Date).getSeconds().toString(),r=Object(i.a)({},a.state.reply,{replyId:n}),o=Object(i.a)({},r.FileAttachment);$a(o,a.state.file,a.state.ticket).then(function(n){console.log("** Upload result: ",n),o=Object(i.a)({},n),r.FileAttachment=Object(i.a)({},o),console.log("File attachment result: ",r.FileAttachment),Ga(a.state.ticket,r,a.state.ticket.TicketStatus,a.state.uprofile).then(function(n){s.push(r),console.log("Trying to log reply"),s=s.sort(function(e,t){var a=e.replyId.split(" "),s=t.replyId.split(" "),n=a[0].split("."),r=a[1].split(":"),o=s[0].split("."),i=s[1].split(":");return new Date(parseInt(n[2]),parseInt(n[1]),parseInt(n[0]),parseInt(r[2]),parseInt(r[1]),parseInt(r[0]))-new Date(parseInt(o[2]),parseInt(o[1]),parseInt(o[0]),parseInt(i[2]),parseInt(i[1]),parseInt(i[0]))}),e.isAdd=!1,e.isReply=!1,e.isEdit=!1;var o=a.state.tickets.findIndex(function(e){return e.TicketNum==t.TicketNum}),l=Object(z.a)(a.state.tickets);l[o].TicketStatus=t.TicketStatus;var c=Object(i.a)({},a.state.buttonsOptions);c.addButton.showAdd=!0,c.replyButton.showReply=!0,c.saveButton.showSave=!1,c.cancelButton.showCancel=!1,a.setState({ticket:t,flags:e,buttonsOptions:c,showButtons:!0,replies:s,reply:r,tickets:l}),console.log("Reply log successful")}).catch(function(s){console.log(s);e.isAdd=!1,e.isReply=!1,e.isEdit=!1;var n=Object(i.a)({},a.state.buttonsOptions);n.addButton.showAdd=!0,n.replyButton.showReply=!0,n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({ticket:t,flags:e,buttonsOptions:n,showButtons:!0,replies:[],reply:{Details:"",RepliedBy:"",tsReplyDT:"",FileAttachment:"X"}})})}).catch(function(s){console.log(s),o={TitleText:"",FileName:"",FileSize:"",UploadDate:(new Date).toString(),DownloadURL:""},n.FileAttachment="X";var n={Details:"",RepliedBy:"",tsReplyDT:"",FileAttachment:"X"};e.isAdd=!1,e.isReply=!1,e.isEdit=!1;var r=Object(i.a)({},a.state.buttonsOptions);r.addButton.showAdd=!0,r.replyButton.showReply=!0,r.saveButton.showSave=!1,r.cancelButton.showCancel=!1,a.setState({ticket:t,flags:e,buttonsOptions:r,showButtons:!0,replies:[],reply:n})})}a.setState({showButtons:!1})},a.handleCancel=function(){var e=Object(i.a)({},a.state.flags),t=Object(i.a)({},a.state.buttonsOptions);if(e.isAdd){e.isAdd=!1,e.isEdit=!1,e.isReply=!1,t.addButton.showAdd=!0,t.replyButton.showReply=!1,t.saveButton.showSave=!1,t.cancelButton.showCancel=!1,a.setState({ticket:{TicketNum:""},flags:e,buttonsOptions:t})}else if(e.isReply){a.showProcess();var s=a.state.selectedTicketIndex,n=[],r={Details:"",FileAttachment:"X",RepliedBy:"",tsReplyDT:new Date},o={AttendedBy:"",ClientName:"",ClosedBy:"",ClosingDT:"",ComplCat:"",ContractName:"",Details:"",Duration:0,FileAttach:"",OpeningDT:"",ProjectName:"",ReportedBy:"",ReportedOn:"",Subject:"",TicketStatus:"",tsOpeningDT:"",userID:"",TicketNum:"",Replies:[]};a.setState({ticket:o,reply:r});var l=Object(z.a)(a.state.tickets),c=[],d=[];o=Object(i.a)({},l[s]),e.isAdd=!1,e.isEdit=!1,e.isReply=!1,t.addButton.showAdd=!0,t.replyButton.showReply=!0,t.saveButton.showSave=!1,t.cancelButton.showCancel=!1,a.setState({flags:e,buttonsOptions:t}),Ha(o.TicketNum).then(function(e){return n=Object(z.a)(e.Result),He(o.ClientName)}).then(function(e){return e.Result.map(function(e){c.push({Name:e.name})}),Ue(o.ProjectName)}).then(function(e){e.Result.map(function(e){d.push({Name:e.name})}),a.setState({projectsList:c,contractsList:d,ticket:o,replies:n,selectedTicketIndex:s}),a.hideProcess()}).catch(function(e){console.log(e),a.setState({projectsList:c,contractsList:d}),a.hideProcess()})}},a.handleOnReplyChange=function(e,t){if("TicketStatus"===e){var s=Object(i.a)({},a.state.ticket),n=s.TicketStatus;s.TicketStatus=t;var r=Object(i.a)({},a.state.reply);r.Details="Ticket Status changed from "+n+" to "+t,a.setState({reply:r,ticket:s})}else{var o=Object(i.a)({},a.state.reply);o[e]=t,a.setState({reply:o})}},a.handleTicketRowClick=function(e){a.showProcess();var t=[],s={Details:"",FileAttachment:"X",RepliedBy:"",tsReplyDT:new Date},n={AttendedBy:"",ClientName:"",ClosedBy:"",ClosingDT:"",ComplCat:"",ContractName:"",Details:"",Duration:0,FileAttach:"",OpeningDT:"",ProjectName:"",ReportedBy:"",ReportedOn:"",Subject:"",TicketStatus:"",tsOpeningDT:"",userID:"",TicketNum:"",Replies:[]};a.setState({ticket:n,reply:s});var r=Object(z.a)(a.state.tickets),o=[],l=[];n=Object(i.a)({},r[e]),Ha(n.TicketNum).then(function(e){return t=(t=Object(z.a)(e.Result)).sort(function(e,t){var a=e.replyId.split(" "),s=t.replyId.split(" "),n=a[0].split("."),r=a[1].split(":"),o=s[0].split("."),i=s[1].split(":");return new Date(parseInt(n[2]),parseInt(n[1]),parseInt(n[0]),parseInt(r[2]),parseInt(r[1]),parseInt(r[0]))-new Date(parseInt(o[2]),parseInt(o[1]),parseInt(o[0]),parseInt(i[2]),parseInt(i[1]),parseInt(i[0]))}),He(n.ClientName)}).then(function(e){return e.Result.map(function(e){o.push({Name:e.name})}),Ue(n.ProjectName)}).then(function(s){s.Result.map(function(e){l.push({Name:e.name})});var r=Object(i.a)({},a.state.buttonsOptions);r.replyButton.showReply=!0,a.setState({projectsList:o,contractsList:l,ticket:n,replies:t,buttonsOptions:r,selectedTicketIndex:e}),a.hideProcess()}).catch(function(e){console.log(e),a.setState({projectsList:o,contractsList:l}),a.hideProcess()})},a.componentDidMount=function(){a.showProcess();var e=[];Wa().then(function(t){return e=Object(z.a)(t.Result),a.setState({tickets:e}),Me()}).then(function(e){var t=[];return e.Result.map(function(e){t.push({Name:e})}),a.setState({clientsList:t}),Ma()}).then(function(e){var t=[];e.Result.map(function(e){t.push({Name:e})}),a.setState({compleCatList:t}),a.hideProcess()}).catch(function(e){console.log(e),a.hideProcess()}),Me().then(function(e){var t=[];e.Result.map(function(e){t.push({Name:e})}),a.setState({clientsList:t})}).catch(function(e){console.log(e),a.hideProcess()})},a.handleClientChange=function(e){a.showProcess();var t=e.currentTarget.value;He(t).then(function(e){var s=[];e.Result.map(function(e){s.push({Name:e.name})});var n=Object(i.a)({},a.state.ticket);n.ClientName=t,a.setState({projectsList:s,ticket:n}),a.hideProcess()}).catch(function(e){console.log(e),a.hideProcess()})},a.handleProjectChange=function(e){a.showProcess();var t=e.currentTarget.value;Ue(t).then(function(e){var s=[];e.Result.map(function(e){s.push({Name:e.name})});var n=Object(i.a)({},a.state.ticket);n.ProjectName=t,a.setState({contractsList:s,ticket:n}),a.hideProcess()}).catch(function(e){console.log(e),a.hideProcess()})},a.handleOnChange=function(e){var t=e.currentTarget,s=t.name,n=t.value,r=Object(i.a)({},a.state.ticket);r[s]=n,a.setState({ticket:r})},a.showProcess=function(){a.setState({showButtons:!1})},a.hideProcess=function(){a.setState({showButtons:!0})};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{title:"Customer Care Tickets",bgColor:"white",color:"gray"}),n.a.createElement("div",{className:"row",style:{paddingLeft:"25px",paddingRight:"25px"}},n.a.createElement("div",{className:"col-md-7",style:ns},n.a.createElement(Da,{tickets:this.state.tickets,onTicketClick:this.handleTicketRowClick})),n.a.createElement("div",{className:"col-md-5",style:ns},n.a.createElement("div",{className:"row"+(this.state.showButtons?"":" hidden"),style:{paddingLeft:"15px",paddingRight:"15px",marginBottom:"15px"}},n.a.createElement(se,{buttonsOptions:this.state.buttonsOptions})),n.a.createElement("div",{className:"row"+(this.state.showButtons?" hidden":""),style:{paddingLeft:"15px",paddingRight:"15px",marginBottom:"15px"}},n.a.createElement("img",{src:x.a,width:"40vw",alt:"processing",style:{marginTop:"2vh"}})),n.a.createElement("div",{className:"row",style:{padding:"0",overflow:"auto",height:"58vh"}},n.a.createElement("div",{className:"col-md-12"},this.state.flags.isAdd?n.a.createElement(xa,{ticket:this.state.ticket,clientsList:this.state.clientsList,onClientChange:this.handleClientChange,projectsList:this.state.projectsList,onProjectChange:this.handleProjectChange,contractsList:this.state.contractsList,compleCatList:this.state.compleCatList,flags:this.state.flags,openedBy:this.state.uprofile.displayName,onChange:this.handleOnChange}):this.state.ticket.TicketNum?n.a.createElement(Qa,{ticket:this.state.ticket,replies:this.state.replies,reply:this.state.reply,flags:this.state.flags,onChange:this.handleOnReplyChange,onFileSelect:this.handleOnFileSelect}):"")))))}}]),t}(s.Component),ns={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"68vh",overflow:"auto"};Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a},String.prototype.formatDate=function(e,t){var a=this.split("-").length>1?this.split("-"):this.split("/"),s=this.split("-").length>1?1:2,n=e.split(t),r=1===s?a[2].split(" ")[0]:a[1],o=1===s?a[1]:a[0],i=1===s?a[0]:a[2].split(" ")[0],l="";switch(n[0]){case"dd":l=r+t;break;case"MM":case"mm":l=o+t;break;case"yyyy":l=i+t}switch(n[1]){case"dd":l+=r+t;break;case"MM":case"mm":l+=o+t;break;case"yyyy":l+=i+t}switch(n[2]){case"dd":l+=r;break;case"MM":case"mm":l+=o;break;case"yyyy":l+=i}return l};var rs=a(195),os=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={params:{ddlMonth:(new Date).getMonth()+1,ddlYear:(new Date).getFullYear()}},a.handleOnChange=function(e){var t=e.currentTarget,s=t.name,n=t.value,r=Object(i.a)({},a.state.params);r[s]=n,a.setState({params:r})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{action:"http://airmechfms.com/fms/repCustCareTicketsMonthly.aspx",target:"_blank",method:"POST"},n.a.createElement(ie,{name:"ddlMonth",label:"Month",type:"number",value:this.state.params.ddlMonth,onChange:this.handleOnChange}),n.a.createElement(ie,{name:"ddlYear",type:"number",label:"Year",value:this.state.params.ddlYear,onChange:this.handleOnChange}),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))}}]),t}(s.Component),is=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(u.a)(t).call(this))).state={params:{ddlClients:"",ddlProjects:"",ddlContracts:"",dtFrom:new Date,dtTo:new Date},clientsList:[],projectsList:[],contractsList:[],selectedClient:"",selectedProject:"",selectedContract:"",errors:"",processing:!1},e.handleOnChange=function(t){var a=t.currentTarget,s=a.name,n=a.value,r=Object(i.a)({},e.state.params);r[s]=n,e.setState({params:r})},e.handleClientsClick=function(t){var a=t.currentTarget.value;e.setState({processing:!0}),He(a).then(function(t){if("Ok"===t.Success){var s=[];t.Result.map(function(e){s.push({Name:e.name})}),e.setState({projectsList:s,selectedClient:a,processing:!1})}else console.log(t),e.setState({processing:!1})}).catch(function(t){console.log(t),e.setState({processing:!1})})},e.handleProjectsClick=function(t){var a=t.currentTarget.value;e.setState({processing:!0}),console.log(a),Ue(a).then(function(t){if("Ok"===t.Success){var s=[];t.Result.map(function(e){s.push({Name:e.name})}),e.setState({contractsList:s,selectedProject:a,processing:!1})}else console.log(t),e.setState({processing:!1})}).catch(function(t){console.log(t),e.setState({processing:!1})})},Me().then(function(t){if("Ok"===t.Success){var a=[];t.Result.map(function(e){a.push({Name:e})}),e.setState({clientsList:a})}}).catch(function(e){console.log(e)}),e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{action:"http://airmechfms.com/fms/repCustCareTicketsList.aspx",target:"_blank",method:"POST"},n.a.createElement("div",{class:this.state.processing?"":"hidden"},n.a.createElement("img",{src:x.a,width:30,height:30})),n.a.createElement(oe,{name:"ddlClients",label:"Client Name",values:this.state.clientsList,onChange:this.handleClientsClick,flgDisabled:!1,error:this.state.errors,defValue:""}),n.a.createElement(oe,{name:"ddlProjects",label:"Project Name",values:this.state.projectsList,onChange:this.handleProjectsClick,flgDisabled:!1,error:this.state.errors,defValue:""}),n.a.createElement(oe,{name:"ddlContracts",label:"Contract Name",values:this.state.contractsList,onChange:this.handleProjectsClick,flgDisabled:!1,error:this.state.errors,defValue:""}),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))}}]),t}(s.Component),ls=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{action:"http://airmechfms.com/fms/repCustCareTicketsSummary.aspx",target:"_blank",method:"POST"},"This form requires no parameters to be passed.",n.a.createElement("br",null),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))}}]),t}(s.Component),cs=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={params:{ddlMonth:(new Date).getMonth()+1,ddlYear:(new Date).getFullYear()}},a.handleOnChange=function(e){var t=e.currentTarget,s=t.name,n=t.value,r=Object(i.a)({},a.state.params);r[s]=n,a.setState({params:r})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{action:"http://airmechfms.com/fms/repCustCareTicketsMonthly.aspx",target:"_blank",method:"POST"},n.a.createElement(ie,{name:"ddlFrom",label:"From",type:"date",value:this.state.params.ddlMonth,onChange:this.handleOnChange}),n.a.createElement(ie,{name:"ddlTo",type:"date",label:"To",value:this.state.params.ddlYear,onChange:this.handleOnChange}),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))}}]),t}(s.Component),ds=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{action:"http://airmechfms.com/fms/repMaintainJCSummary.aspx",target:"_blank",method:"POST"},"This form requires no parameters to be passed.",n.a.createElement("br",null),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))}}]),t}(s.Component),us=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={forms:{tbmForm:function(){return n.a.createElement(os,null)}}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"tbmForm"===this.props.reqForm?n.a.createElement(os,null):"tcontForm"===this.props.reqForm?n.a.createElement(is,null):"tssForm"===this.props.reqForm?n.a.createElement(ls,null):"jclForm"===this.props.reqForm?n.a.createElement(cs,null):"jcssForm"===this.props.reqForm?n.a.createElement(ds,null):void 0}}]),t}(s.Component),hs=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={uprofile:{},ticketsStatistics:{},showProcess:!1,params:{ddlMonth:10,ddlYear:2019},visibilityFlags:["","","","hidden","hidden"],repCatBtn:[],selectedRepCatIndex:0,reqForm:""},a.handleOnChange=function(e){var t=e.currentTarget,s=t.name,n=t.value,r=Object(i.a)({},a.state.params);r[s]=n,a.setState({params:r})},a.handleRepCatClick=function(e){var t=a.state.repCatBtn.findIndex(function(t){return t.Name===e});a.setState({selectedRepCatIndex:t})},a.handleReportClick=function(e){var t=a.state.repCatBtn[a.state.selectedRepCatIndex].Reports.filter(function(t){return t.Report===e})[0].Form;a.setState({reqForm:t})},a.componentDidMount=function(){a.setState({repCatBtn:rs})};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,a):Object(d.a)(a)}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"col-md-12"},n.a.createElement(A,{title:"Reports",bgColor:"white",color:"gray"}),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6 "+this.state.visibilityFlags[0],style:ms,onClick:this.handleClientColumnClick},n.a.createElement("div",{className:"col-md-12",style:gs},"Category"),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"Name",label:"Name",showList:!0,onClick:this.handleRepCatClick,data:this.state.repCatBtn,showProcess:this.state.showClientsProcess}))),n.a.createElement("div",{className:"col-md-6 "+this.state.visibilityFlags[1],onClick:this.handleProjectColumnClick,style:ms},n.a.createElement("div",{className:"col-md-12",style:gs},"Report"),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"Report",label:"Report",showList:!0,onClick:this.handleReportClick,data:this.state.repCatBtn.length>0?this.state.repCatBtn[this.state.selectedRepCatIndex].Reports:[],showProcess:this.state.showProjectsProcess}))))),n.a.createElement("div",{className:"col-md-6",style:ps},n.a.createElement("div",{className:"col-md-12",style:fs},"Report Generation Form"),""!==this.state.reqForm?n.a.createElement(us,{reqForm:this.state.reqForm}):""),n.a.createElement(T.ToastContainer,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(s.Component),ms={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"70vh"},ps={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"75vh",backgroundColor:"lightgray",overflow:"auto"},gs={color:"blue",fontSize:"1vw",fontWeight:"bold",borderBottom:"solid",borderColor:"lightgray",borderWidth:1,paddingTop:"10px",marginBottom:"10px",textAlign:"left"},fs={color:"blue",fontSize:"1vw",fontWeight:"bold",borderBottom:"solid",borderColor:"gray",borderWidth:1,paddingTop:"10px",marginBottom:"10px",textAlign:"left"},bs=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:"",bottomTBVisible:"hidden",topTBVisible:"",flags:{isAdd:!1,isEdit:!1}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.client;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"txtCltName",label:"Client Name",type:"text",value:e.clName,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtCltEmail",label:"Client Email",type:"text",value:e.clEmail,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtCPName",label:"Contact Person",type:"text",value:e.clContactName,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtCPNumber",label:"Contact Number(s)",type:"text",value:e.clContactNumber,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtAddress",label:"Address",type:"text",value:e.clAddress,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement("div",{className:this.state.bottomTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"success",onClick:this.handleOnSave},n.a.createElement(k.a,{icon:"save"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"danger",onClick:this.handleOnCancel},n.a.createElement(k.a,{icon:"ban"})))))))}}]),t}(s.Component),vs=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:"",bottomTBVisible:"hidden",topTBVisible:"",flags:{isAdd:!1,isEdit:!1}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.project;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"txtPrjName",label:"Project Name",type:"text",value:e.prjName,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtPrjCode",label:"Project Code",type:"text",value:e.prjCode,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtPrjDesc",label:"Description",type:"text",value:e.prjDescription,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtClName",label:"Client Name",type:"text",value:e.clientName,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement("div",{className:this.state.bottomTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"success",onClick:this.handleOnSave},n.a.createElement(k.a,{icon:"save"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"danger",onClick:this.handleOnCancel},n.a.createElement(k.a,{icon:"ban"})))))))}}]),t}(s.Component),Es=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.contract;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"txtContName",label:"Contract Name",type:"text",value:e.contName,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtContCode",label:"Contract Code",type:"text",value:e.contCode,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtContDesc",label:"Description",type:"text",value:e.Description,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtContEmail",label:"Contact Email",type:"text",value:e.contactEmails,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtContPerson",label:"Contact Person",type:"text",value:e.contactPerson,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtEffectiveDate",label:"Effective Date",type:"text",value:e.effectDate,flgDisabled:"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtExpiryDate",label:"Expiry Date",type:"text",value:e.expiryDate,flgDisabled:"disabled",error:this.state.error}))}}]),t}(s.Component),Cs=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={visibleStyle:{border:"solid lightgray 1px",borderRadius:"25px",padding:"5vh",width:"90%",height:"90%",background:"white",position:"fixed",top:"5%",left:"5%",display:"flex",flexDirection:"column",visibility:"visible",transition:"height 1s linear",boxShadow:"inset 0 0 5px black"},hiddenStyle:{border:"solid lightgray 1px",borderRadius:"25px",padding:"5vh",width:"90%",height:"90%",background:"white",position:"fixed",display:"flex",flexDirection:"column",visibility:"hidden"},backshade:{position:"fixed",top:0,left:0,width:"100%",height:"100vh",visibility:"hidden",background:"rgba(0, 0, 0, 0.5)"},closeButton:{position:"absolute",top:"5vh",left:"95%",display:"inline",color:"red",fontSize:"2vw",cursor:"pointer"},visible:!1,contents:null},a.displayPopWin=function(){a.props.onClickPopup().then(function(e){var t=Object(i.a)({},a.state.backshade);t.visibility="visible",a.setState({visible:!0,backshade:t,contents:a.props.children})}).catch(function(e){console.log(e)})},a.closePopWin=function(){var e=Object(i.a)({},a.state.backshade);e.visibility="hidden",a.setState({visible:!1,backshade:e})},a.componentDidMount=function(e){if(a.props.displaystyle){var t=Object(i.a)({},a.state.visibleStyle),s=Object(i.a)({},a.props.displaystyle);for(var n in s)t[n]=s[n];a.setState({visibleStyle:t}),console.log(t)}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.buttonstyle,e.showbutton);return n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{onClick:this.displayPopWin,className:"btn btn-primary"},t),n.a.createElement("div",{style:this.state.backshade,onClick:this.closePopWin}),n.a.createElement("div",{style:!0===this.state.visible?this.state.visibleStyle:this.state.hiddenStyle,id:"popWindow"},n.a.createElement("div",{style:{width:"100%",flex:9}},this.state.contents),n.a.createElement("span",{style:this.state.closeButton,onClick:this.closePopWin},n.a.createElement(k.a,{icon:"window-close"}))))}}]),t}(s.Component),Os=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:"",bottomTBVisible:"hidden",topTBVisible:"",flags:{isAdd:!1,isEdit:!1},columns:[{type:"date",id:"readingDate"},{type:"number",id:"readingValue"}],rows:[],meterReadings:[]},a.handleOnPopup=function(){return new Promise(function(e,t){var s=a.props,n=s.projectName,r=s.contractName,o=s.meterNumber,i=[],l=[["Date","Value"]];St("",n,r,o).then(function(t){0!==(i=t.Result).length?i.map(function(e){l.push([e.readingDate,e.readingValue])}):l.push([new Date,0]),a.setState({rows:l,meterReadings:i}),e(l)}).catch(function(e){console.log(e),t(e)})})},a.handleOnAdd=function(){a.props.handlers.handleOnAdd(),a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1,a.setState({flags:e})},a.handleOnEdit=function(){a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0,a.setState({flags:e})},a.handleOnSave=Object(L.a)(I.a.mark(function e(){var t;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(i.a)({},a.state.flags),e.next=3,a.props.handlers.handleOnSave(t);case 3:"Ok"===e.sent.Success&&(a.setState({bottomTBVisible:"hidden",topTBVisible:""}),t.isAdd=!1,t.isEdit=!1,a.setState({flags:t}));case 5:case"end":return e.stop()}},e,this)})),a.handleOnCancel=function(){a.props.handlers.handleOnCancel(),a.setState({bottomTBVisible:"hidden",topTBVisible:""});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a.componentDidMount=function(){},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.meter;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"col-md-10"},n.a.createElement("div",{className:this.state.topTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnAdd},n.a.createElement(k.a,{icon:"plus"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnEdit},n.a.createElement(k.a,{icon:"edit"}))))))),n.a.createElement("div",{className:"col-md-2"},n.a.createElement(Cs,{showbutton:n.a.createElement(k.a,{icon:"chart-line"}),onClickPopup:this.handleOnPopup},n.a.createElement("p",{className:"h4",style:{color:"blue",fontWeight:"bold"}},"Meter Readings for ",this.props.meterNumber),n.a.createElement(D.a,{chartType:"LineChart",data:this.state.rows,width:"100%",height:"90%",loader:n.a.createElement("div",null,"Loading Chart"),options:{title:"",vAxis:{title:"Meter Reating"},hAxis:{title:"Reading Date"},is3D:!0,legend:"none"}}))),n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"txtMeterNumber",label:"Meter Number",type:"text",value:e.Number,onChange:this.props.handlers.handleMeterNumberChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(oe,{name:"ddlMeterTypes",label:"Meter Type",values:[{Name:""},{Name:"Water"},{Name:"Electricity"}],onChange:this.props.handlers.handleMeterTypeChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error,defValue:e.Type}),n.a.createElement(ie,{name:"txtMeterLocation",label:"Location",type:"text",value:e.Location,onChange:this.props.handlers.handleMeterLocationChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtMeterRemarks",label:"Remarks",type:"text",value:e.Remarks,onChange:this.props.handlers.handleMeterRemarksChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement("div",{className:this.state.bottomTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"success",onClick:this.handleOnSave},n.a.createElement(k.a,{icon:"save"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"danger",onClick:this.handleOnCancel},n.a.createElement(k.a,{icon:"ban"})))))))}}]),t}(s.Component),Ss=(s.Component,Os),js=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:"",bottomTBVisible:"hidden",topTBVisible:"",flags:{isAdd:!1,isEdit:!1}},a.getMeterReading=function(e,t,a){},a.handleOnAdd=function(){a.props.handlers.handleOnAdd(),a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1,a.setState({flags:e})},a.handleOnEdit=function(){a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0,a.setState({flags:e})},a.handleOnSave=function(){var e=Object(i.a)({},a.state.flags),t=a.props.handlers.handleOnSave(e);console.log(t),a.setState({bottomTBVisible:"hidden",topTBVisible:""}),e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a.handleOnCancel=function(){a.props.handlers.handleOnCancel(),a.setState({bottomTBVisible:"hidden",topTBVisible:""});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.meterReading;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.state.topTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnAdd},n.a.createElement(k.a,{icon:"plus"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnEdit},n.a.createElement(k.a,{icon:"edit"})))))),n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"dtReadingDate",label:"Reading Date",type:"date",value:e.readingDate,onChange:this.props.handlers.handleReadingDateChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtReadingValue",label:"Reading Value",type:"text",value:e.readingValue,onChange:this.props.handlers.handleReadingValueChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"txtConsumption",label:"Consumption",type:"number",value:e.consumption,flgDisabled:"disabled",error:this.state.error}),n.a.createElement("div",{className:this.state.bottomTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"success",onClick:this.handleOnSave},n.a.createElement(k.a,{icon:"save"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"danger",onClick:this.handleOnCancel},n.a.createElement(k.a,{icon:"ban"})))))))}}]),t}(s.Component),ys=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={fullClientsList:[],clientsList:[],projectsList:[],fullProjectsList:[],contractsList:[],fullContractsList:[],metersItems:[],fullMetersItems:[],meterReadings:[],fullMeterReadings:[],showClientsProcess:!0,showProjectsProcess:!1,showContractsProcess:!1,showMetersProcess:!1,showMainLogProcess:!1,showFormProcess:"hidden",selectedClient:"",selectedProject:"",selectedContract:"",selectedMeter:"",selectedReading:"",visibileColumns:{first:0,last:2},visibilityFlags:["","","","hidden","hidden"],propControl:"",propControlTitle:"Client",client:{clName:"",clEmail:"",clContactName:"",clContactNumber:"",clAddress:"",SitesCount:0},project:{prjName:"",prjCode:"",prjDescription:"",clientName:""},meter:{Number:"",Location:"",Remarks:"",Type:""},contract:{contName:"",contCode:"",Description:"",contactEmails:"",contactPerson:"",effectDate:"",expiryDate:""},meterReading:{readingDate:new Date,readingValue:0,consumption:0},uprofile:{}},a.handleGoLeft=function(){var e=Object(i.a)({},a.state.visibileColumns),t=Object(z.a)(a.state.visibilityFlags);if(0!==e.first){for(var s=0;s<a.state.visibilityFlags.length;s++)s>=e.first-1&&s<=e.last-1?t[s]="":t[s]="hidden";--e.first,--e.last,a.setState({visibileColumns:e,visibilityFlags:t})}},a.handleGoRight=function(){var e=Object(i.a)({},a.state.visibileColumns),t=Object(z.a)(a.state.visibilityFlags);if(e.last!==t.length-1){for(var s=0;s<a.state.visibilityFlags.length;++s)s>=e.first+1&&s<=e.last+1?t[s]="":t[s]="hidden";++e.first,++e.last,a.setState({visibileColumns:e,visibilityFlags:t})}},a.metersFormHandlers={handleGetReadings:function(e){return a.state.meterReadings},handleMeterNumberChange:function(e){var t=Object(i.a)({},a.state.meter);t.Number=e.currentTarget.value,a.setState({meter:t})},handleMeterLocationChange:function(e){var t=Object(i.a)({},a.state.meter);t.Location=e.currentTarget.value,a.setState({meter:t})},handleMeterTypeChange:function(e){var t=Object(i.a)({},a.state.meter);t.Type=e.currentTarget.value,a.setState({meter:t})},handleMeterCountChange:function(e){var t=Object(i.a)({},a.state.meter);t.Count=e.currentTarget.value,a.setState({meter:t})},handleMeterRemarksChange:function(e){var t=Object(i.a)({},a.state.meter);t.Remarks=e.currentTarget.value,a.setState({meter:t})},handleOnAdd:function(){var e=Object(i.a)({},a.state.meter);e.Number="",e.Location="",e.Remarks="",a.setState({meter:e})},handleOnCancel:function(){var e=a.state,t=e.selectedProject,s=e.selectedContract,n=e.selectedMeter;if(""!==n)gt(t,s,n).then(function(e){var t=Object(i.a)({},e.Result);a.setState({meter:t})}).catch(function(e){console.log(e)});else{a.setState({meter:{Number:"",Location:"",Remarks:""}})}},handleOnSave:function(){var e=Object(L.a)(I.a.mark(function e(t){var s,n,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({showFormProcess:""}),s=Object(i.a)({},a.state.meter),n=a.state.selectedProject,r=a.state.selectedContract,!t.isAdd){e.next=8;break}return e.abrupt("return",ft(n,r,s).then(function(e){if("Ok"===e.Success){var t=Object(z.a)(a.state.metersItems);t.push(s),t=t.sort(function(e,t){var a=e.Number.toLowerCase(),s=t.Number.toLowerCase();return a<s?-1:a>s?1:0}),a.setState({metersItems:t,showFormProcess:"hidden"}),T.toast.success("New Asset Saved Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}else T.toast.warn(e.FailReason,{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),a.setState({showFormProcess:"hidden"});return e}).catch(function(e){return console.log(e),e}));case 8:return e.abrupt("return",bt(n,r,s).then(function(e){return a.setState({showFormProcess:"hidden"}),T.toast.success("Exitsing Meter Updated Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){return console.log(e),e}));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},a.readingsFormHandlers={handleReadingDateChange:function(e){var t=Object(i.a)({},a.state.meterReading);t.readingDate=e.currentTarget.value,a.setState({meterReading:t})},handleReadingValueChange:function(e){var t=Object(i.a)({},a.state.meterReading);t.readingValue=e.currentTarget.value,a.setState({meterReading:t})},handleOnAdd:function(){var e=Object(i.a)({},a.state.meterReading);e.readingDate=new Date,e.readingValue="",e.consumption=0,a.setState({meterReading:e})},handleOnCancel:function(){var e=a.state,t=e.selectedClient,s=e.selectedProject,n=e.selectedContract,r=e.selectedMeter,o=e.selectedReading;St(t,s,n,r,o).then(function(e){var t=Object(i.a)({},e.Result);a.setState({meterReading:t})}).catch(function(e){console.log(e)})},handleOnSave:function(e){a.setState({showFormProcess:""});var t=Object(i.a)({},a.state.meterReading),s=a.state.selectedClient,n=a.state.selectedProject,r=a.state.selectedContract,o=a.state.selectedMeter;e.isAdd?Ct(s,n,r,o,t).then(function(e){var s=Object(z.a)(a.state.meterReadings);s.push(t),s=s.sort(function(e,t){var a=e.readingDate,s=t.readingDate;return a<s?-1:a>s?1:0});for(var n=0;n<s.length;n++)if(s[n].readingDate===t.readingDate){var r=0;r=0!==n?s[n].readingValue-s[n-1].readingValue:0,t.consumption=r}return a.setState({meterReadings:s,showFormProcess:"hidden",meterReading:t}),T.toast.success("New Meter Reading Saved Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)}):Ot(s,n,r,o,t).then(function(e){return a.setState({showFormProcess:"hidden"}),T.toast.success("Exitsing Meter Reading Updated Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)})}},a.handleClientColumnClick=function(){var e=Object(i.a)({},a.state.client);e.clName="",e.clEmail="",e.clContactName="",e.clContactNumber="",e.clAddress="",a.setState({propControl:"ClientForm",propControlTitle:"Client",client:e})},a.handleOnClientClick=function(e){a.setState({showProjectsProcess:!0}),a.setState({projectsList:[],contractsList:[],assetsItems:[],assetsMaintLog:[],selectedProject:"",selectedContract:"",selectedAsset:"",selectedMainLog:""});var t=e;He(e).then(function(s){var n=[],r=[];0!==s.Result.length&&s.Result.map(function(e){var t={prjName:e.name};n.push(t),r.push(t)}),et(e).then(function(e){var t=Object(z.a)(e.Result),s=Object(i.a)({},t[0]);a.setState({client:s})}).catch(function(e){console.log(e)}),a.setState({projectsList:n,fullProjectsList:r,selectedClient:t}),a.setState({showProjectsProcess:!1}),a.setState({propControl:"ClientForm",propControlTitle:"Client"})}).catch(function(e){console.log(e)})},a.handleProjectColumnClick=function(){if(""===a.state.selectedClient)T.toast.warn("You did not select a client!");else{var e=Object(i.a)({},a.state.project);e.prjName="",e.prjCode="",e.prjDescription="",e.clientName="",a.setState({propControl:"ProjectForm",propControlTitle:"Project",project:e})}},a.handleOnProjectClick=function(e){a.setState({showContractsProcess:!0}),a.setState({contractsList:[],assetsItems:[],assetsMaintLog:[]});var t=e;Ue(e).then(function(s){var n=[],r=[];0!==s.Result.length&&s.Result.map(function(e){var t={contName:e.name};n.push(t),r.push(t)}),st(e).then(function(e){var t=Object(z.a)(e.Result),s=Object(i.a)({},t[0]);a.setState({project:s})}).catch(function(e){console.log(e)}),a.setState({contractsList:n,fullContractsList:r,selectedProject:t,propControl:"ProjectForm",propControlTitle:"Project"}),a.setState({showContractsProcess:!1})}).catch(function(e){console.log(e)})},a.handleContractColumnClick=function(){if(""===a.state.selectedProject)T.toast.warn("You did not select a project!");else{var e=Object(i.a)({},a.state.contract);e.contName="",e.contCode="",e.Description="",e.contactPerson="",e.contactEmails="",e.effectDate="",e.expiryDate="",a.setState({propControl:"ContractForm",propControlTitle:"Contract",contract:e})}},a.handleOnContractClick=function(e){a.setState({showMetersProcess:!0}),a.setState({metersItems:[],meterReadings:[]});var t=e,s=a.state.selectedProject;vt(s,e).then(function(e){var s=[],n=[];0!==e.Result.length&&e.Result.map(function(e){var t={Number:e.Number,Type:e.Type};s.push(t),n.push(t)}),dt(a.state.selectedProject,t).then(function(e){var t=Object(i.a)({},e.Result);a.setState({contract:t})}).catch(function(e){console.log(e)}),a.setState({metersItems:s,fullMetersItems:n,selectedContract:t,propControl:"ContractForm",propControlTitle:"Contract"}),a.setState({showMetersProcess:!1})}).catch(function(e){console.log(e)}),a.state.visibileColumns.last<3&&a.handleGoRight()},a.handleOnMeterClick=function(e){a.setState({showMainLogProcess:!0}),a.setState({assetsMaintLog:[]});var t=e,s=a.state.selectedClient,n=a.state.selectedProject,r=a.state.selectedContract;St(s,n,r,t).then(function(e){var s=[];0!==e.Result.length&&e.Result.map(function(e){var t={readingDate:e.readingDate,readingValue:e.readingValue};s.push(t)}),gt(n,r,t).then(function(e){var t=Object(i.a)({},e.Result);a.setState({meter:t})}).catch(function(e){console.log(e)}),a.setState({selectedMeter:t,meterReadings:s,propControl:"MetersForm",propControlTitle:"Meters"}),a.setState({showMainLogProcess:!1})}).catch(function(e){console.log(e)}),a.state.visibileColumns.last<3&&a.handleGoRight(),a.state.visibileColumns.last<4&&a.handleGoRight()},a.handleMetersColumnClick=function(){if(""===a.state.selectedContract)T.toast.warn("You did not select a contract!");else{var e=Object(i.a)({},a.state.asset);e={Title:"",Description:"",Location:"",Count:0,Remarks:""},a.setState({propControl:"MetersForm",propControlTitle:"Meters",asset:e})}},a.handleReadingsLogColumnClick=function(){if(""===a.state.selectedMeter)T.toast.warn("You did not select a Meter!");else{var e=Object(i.a)({},a.state.meterReading);e={readingDate:new Date,readingValue:""},a.setState({propControl:"ReadingsForm",propControlTitle:"Meter Reading Log",meterReading:e})}},a.handleOnMeterReadingsClick=function(e){a.setState({showMainLogProcess:!0}),a.setState({meterReading:{}});var t=e,s=a.state.selectedClient,n=a.state.selectedProject,r=a.state.selectedContract,o=a.state.selectedMeter;Et(s,n,r,o,t).then(function(e){console.log("Result: ",e.Result);for(var s=e.Result,n=0;n<a.state.meterReadings.length;n++)if(a.state.meterReadings[n].readingDate===s.readingDate){var r=0;r=0!==n?a.state.meterReadings[n].readingValue-a.state.meterReadings[n-1].readingValue:0,s.consumption=r}a.setState({selectedReadingDate:t,meterReading:s,propControl:"ReadingsForm",propControlTitle:"Meter Readings"}),a.setState({showMainLogProcess:!1})}).catch(function(e){console.log(e)}),a.state.visibileColumns.last<4&&a.handleGoRight()},a.handleOnClientSearch=function(e){var t=Object(z.a)(a.state.fullClientsList).filter(function(t){return-1!==t.clName.toLowerCase().indexOf(e.currentTarget.value.toLowerCase())});a.setState({clientsList:t})},a.handleOnProjectSearch=function(e){var t=Object(z.a)(a.state.fullProjectsList).filter(function(t){return-1!==t.prjName.toLowerCase().indexOf(e.currentTarget.value.toLowerCase())});a.setState({projectsList:t})},a.handleOnContractSearch=function(e){var t=Object(z.a)(a.state.fullContractsList).filter(function(t){return-1!==t.contName.toLowerCase().indexOf(e.currentTarget.value.toLowerCase())});a.setState({contractsList:t})},a.handleOnAssetSearch=function(e){var t=Object(z.a)(a.state.fullAssetsItems).filter(function(t){return-1!==t.title.toLowerCase().indexOf(e.currentTarget.value.toLowerCase())});a.setState({assetsItems:t})},a.renderProperties=function(){switch(a.state.propControl){case"ClientForm":return n.a.createElement(bs,{client:a.state.client,handlers:a.clientFormHandlers,showFormProcess:a.state.showFormProcess});case"ProjectForm":return n.a.createElement(vs,{project:a.state.project,handlers:a.projectFormHandlers,showFormProcess:a.state.showFormProcess});case"MetersForm":return n.a.createElement(Ss,{meter:a.state.meter,projectName:a.state.selectedProject,contractName:a.state.selectedContract,meterNumber:a.state.selectedMeter,handlers:a.metersFormHandlers,showFormProcess:a.state.showFormProcess});case"ContractForm":return n.a.createElement(Es,{contract:a.state.contract,showFormProcess:a.state.showFormProcess});case"ReadingsForm":return n.a.createElement(js,{meterReading:a.state.meterReading,handlers:a.readingsFormHandlers,showFormProcess:a.state.showFormProcess})}};var s=sessionStorage.token,r=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=r,a.state.showClientsProcess=!0,Me().then(function(e){var t=[],s=[];e.Result.map(function(e){var a={clName:e};t.push(a),s.push(a)}),a.setState({propControl:"ClientForm"}),a.setState({clientsList:t,fullClientsList:s}),a.setState({showClientsProcess:!1})}).catch(function(e){console.log(e)}),a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"col-md-12"},n.a.createElement(A,{title:"Clients and Contracts Assets Management",bgColor:"white",color:"gray"}),n.a.createElement("div",{className:"col-md-8"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-4 "+this.state.visibilityFlags[0],style:ws,onClick:this.handleClientColumnClick},n.a.createElement("div",{className:"col-md-12",style:Ps},"Clients"),n.a.createElement("div",{className:"col-md-12",style:Rs},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnClientSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"clName",label:"clName",selected:this.state.selectedClient,showList:!0,onClick:this.handleOnClientClick,data:this.state.clientsList,showProcess:this.state.showClientsProcess}))),n.a.createElement("div",{className:"col-md-4 "+this.state.visibilityFlags[1],onClick:this.handleProjectColumnClick,style:ws},n.a.createElement("div",{className:"col-md-12",style:Ps},"Projects"),n.a.createElement("div",{className:"col-md-12",style:Rs},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnProjectSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"prjName",label:"prjName",selected:this.state.selectedProject,showList:!0,onClick:this.handleOnProjectClick,data:this.state.projectsList,showProcess:this.state.showProjectsProcess}))),n.a.createElement("div",{className:"col-md-4 "+this.state.visibilityFlags[2],style:ws,onClick:this.handleContractColumnClick},n.a.createElement("div",{className:"col-md-12",style:Ps},"Contracts"),n.a.createElement("div",{className:"col-md-12",style:Rs},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnContractSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"contName",label:"contName",selected:this.state.selectedContract,showList:!0,onClick:this.handleOnContractClick,data:this.state.contractsList,showProcess:this.state.showContractsProcess}))),n.a.createElement("div",{className:"col-md-4 "+this.state.visibilityFlags[3],style:ws,onClick:this.handleMetersColumnClick},n.a.createElement("div",{className:"col-md-12",style:Ps},"Meters"),n.a.createElement("div",{className:"col-md-12",style:Rs},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnAssetSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"Number",label:"Number",selected:this.state.selectedMeter,showList:!0,onClick:this.handleOnMeterClick,data:this.state.metersItems,showProcess:this.state.showMetersProcess,mtype:"meter"}))),n.a.createElement("div",{className:"col-md-4 "+this.state.visibilityFlags[4],style:ws,onClick:this.handleReadingsLogColumnClick},n.a.createElement("div",{className:"col-md-12",style:Ps},"Meter Readings"),n.a.createElement("div",{className:"col-md-12",style:Rs},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnMainLogSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"readingDate",label:"readingDate",selected:this.state.selectedMainLog,showList:!0,data:this.state.meterReadings,onClick:this.handleOnMeterReadingsClick,showProcess:this.state.showMainLogProcess})))),n.a.createElement("div",{className:"row",style:{height:"5vh",backgroundColor:"lightblue",borderRadius:"25px"}},n.a.createElement("div",{className:"col-md-1"},n.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:this.handleGoLeft},n.a.createElement(k.a,{icon:"chevron-left"}))),n.a.createElement("div",{className:"col-md-10"}),n.a.createElement("div",{className:"col-md-1",onClick:this.handleGoRight},n.a.createElement("button",{className:"btn btn-sm btn-primary"},n.a.createElement(k.a,{icon:"chevron-right"}))))),n.a.createElement("div",{className:"col-md-4",style:Ns},n.a.createElement("div",{className:"col-md-12",style:As},this.state.propControlTitle+" Properties"),this.renderProperties()),n.a.createElement(T.ToastContainer,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(s.Component),ws={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"70vh"},Ns={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"75vh",backgroundColor:"lightgray",overflow:"auto"},Ps={color:"blue",fontSize:"1vw",fontWeight:"bold",borderBottom:"solid",borderColor:"lightgray",borderWidth:1,paddingTop:"10px",marginBottom:"10px",textAlign:"left"},Rs={fontSize:"0.75vw",borderBottom:"solid",borderColor:"lightgray",borderWidth:1,paddingTop:"5px",paddingBottom:"5px",marginBottom:"10px",textAlign:"left"},As={color:"blue",fontSize:"1vw",fontWeight:"bold",borderBottom:"solid",borderColor:"gray",borderWidth:1,paddingTop:"10px",marginBottom:"10px",textAlign:"left"};Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a};var Ds=function(){var e=Object(L.a)(I.a.mark(function e(){var t,a,s,n,r,o,i,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a="",s="","",n="",r=W.a.firestore(),o=r.collection("Users").doc("docUserGroups").collection("colUserGroups"),i=[],l="",e.abrupt("return",o.get().then(function(e){return e.docs.length>0?(e.forEach(function(e){l=e.data().Name,i.push({Name:l})}),t="Ok",a=i):(t="No",a=[],n="No User Groups were found. Returning empty list."),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a=[],n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Ts=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),l=o.collection("Users").doc("docUserGroups").collection("colUserGroups"),c={},e.abrupt("return",l.where("Name","==",t).get().then(function(e){return e.docs.length>0?(c=Object(i.a)({},e.docs[0].data()),a="Ok",s=c):(a="No",s=[],r="No User Group found. Returning empty list."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s=[],r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),ks=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),i=o.collection("Users").doc("docUsers").collection("colUsers"),l=[],c="",e.abrupt("return",i.where("UserGroup","==",t).get().then(function(e){return e.docs.length>0?(e.forEach(function(e){c=e.data().displayName,l.push({displayName:c})}),a="Ok",s=l):(a="No",s=[],r="No Users were found. Returning empty list."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s=[],r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Bs=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,l,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),l=o.collection("Users").doc("docUsers").collection("colUsers"),c={},e.abrupt("return",l.where("displayName","==",t).get().then(function(e){return e.docs.length>0?(c=Object(i.a)({},e.docs[0].data()),a="Ok",s=c):(a="No",s={},r="No User was found. Returning empty list."),{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}).catch(function(e){return a="No",s=[],r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),xs=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),i=o.collection("Users").doc("docUserGroups").collection("colUserGroups"),e.abrupt("return",i.where("UserGroup","==",t.Name).get().then(function(e){return e.docs.length>0?{Success:a="No",Result:s=[],FailReason:r="User Group Exists. Adding Aborted.",Error:n,Warning:""}:i.doc(t.Name).set(t)}).then(function(e){return{Success:"Ok",Result:e,FailReason:"",Error:"",Warning:""}}).catch(function(e){return a="No",s=[],r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Fs=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o,i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",s="",n="","",r="",o=W.a.firestore(),i=o.collection("Users").doc("docUserGroups").collection("colUserGroups"),e.abrupt("return",i.where("Name","==",t.Name).get().then(function(e){return e.docs.length>0?(console.log("Doc Found"),i.doc(t.Name).set(t)):(console.log("Doc Not Found"),{Success:a="No",Result:s=[],FailReason:r="User Group Does Not Exist. Updating Aborted.",Error:n,Warning:""})}).then(function(e){return{Success:"Ok",Result:e,FailReason:"",Error:"",Warning:""}}).catch(function(e){return a="No",s=[],r="Error",n=e.message,{Success:a,Result:s,FailReason:r,Error:n,Warning:""}}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Is=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"","","","","",a=W.a.auth().currentUser,s=W.a.firestore(),n="",s.collection("Users").doc("docUsers").collection("colUsers").where("UID","==",a.uid).get().then(function(e){e.docs.length>0&&(n=e.docs[0].data().password)}).catch(function(e){console.log(e)}),W.a.auth().createUserWithEmailAndPassword(t.email,t.password).then(function(e){return t.UID=e.user.uid,t.email=t.email.toLowerCase(),s.collection("Users").doc("docUsers").collection("colUsers").doc(t.displayName).set(t)}).then(function(e){W.a.auth().signOut(),W.a.auth().signInWithEmailAndPassword(t.email,t.password).then(function(e){e.user.updateProfile({displayName:t.displayName,phoneNumber:t.phoneNumber})}).then(function(e){W.a.auth().signOut(),W.a.auth().signInWithEmailAndPassword(a.email,n)}).catch(function(e){console.log(e)})}).then(function(e){return{Success:"Ok",Result:t,FailReason:"",Error:"",Warning:""}}).catch(function(e){return console.log(e),{Success:"No",Result:null,FailReason:"Error",Error:e,Warning:""}});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ls=function(){var e=Object(L.a)(I.a.mark(function e(t){var a,s,n,r,o=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=o.length>1&&void 0!==o[1]?o[1]:"","","","","","",s=W.a.auth().currentUser,n=W.a.firestore(),r="",n.collection("Users").doc("docUsers").collection("colUsers").where("UID","==",s.uid).get().then(function(e){e.docs.length>0&&(r=e.docs[0].data().password)}).catch(function(e){console.log(e)}),n.collection("Users").doc("docUsers").collection("colUsers").doc(t.displayName).get().then(function(e){if(e.exists)return n.collection("Users").doc("docUsers").collection("colUsers").doc(t.displayName).update(t)}).then(function(e){W.a.auth().signOut(),W.a.auth().signInWithEmailAndPassword(t.email,a).then(function(e){e.user.updateProfile({displayName:t.displayName,phoneNumber:t.phoneNumber}).catch(function(e){console.log("Error: ",e)}),e.user.updatePassword(t.password).catch(function(e){console.log("Error: ",e)})}).then(function(e){W.a.auth().signOut(),W.a.auth().signInWithEmailAndPassword(s.email,r)}).catch(function(e){console.log(e)})}).then(function(e){return{Success:"Ok",Result:t,FailReason:"",Error:"",Warning:""}}).catch(function(e){return console.log(e),{Success:"No",Result:null,FailReason:"Error",Error:e,Warning:""}});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Vs=function(){var e=Object(L.a)(I.a.mark(function e(){var t,a,s,n,r,o,i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",a="",s="","",n="",r=W.a.firestore(),o=r.collection("Users").doc("docClientUsers").collection("Users"),i=[],"",e.abrupt("return",o.get().then(function(e){return e.docs.length>0?(e.forEach(function(e){e.data().userEmail,i.push(e.data())}),t="Ok",a=i):(t="No",a=[],n="No Users were found. Returning empty list."),{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}).catch(function(e){return t="No",a=[],n="Error",s=e.message,{Success:t,Result:a,FailReason:n,Error:s,Warning:""}}));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Ws=function(){var e=Object(L.a)(I.a.mark(function e(t){var a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"","","","","",W.a.auth().currentUser,a=W.a.firestore(),"",console.log("User: ",t),W.a.auth().createUserWithEmailAndPassword(t.userEmail,t.passWord).then(function(e){var s=e.user.uid;return t.userEmail=t.userEmail.toLowerCase(),a.collection("Users").doc("docClientUsers").collection("Users").doc(s).set(t)}).then(function(e){return{Success:"Ok",Result:t,FailReason:"",Error:"",Warning:""}}).catch(function(e){return console.log(e),{Success:"No",Result:null,FailReason:"Error",Error:e,Warning:""}});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ms=(a(239),function(e){var t=e.value?"switch switchOnGrad":"switch",a=e.value?"circle switchOn":"circle",r=Object(s.useState)(t),o=Object(Pt.a)(r,2),i=o[0],l=o[1],c=Object(s.useState)(a,function(){i="circle"===u?"circle switchOn":"circle",console.log(u)}),d=Object(Pt.a)(c,2),u=d[0],h=d[1],m=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t="switch"===t?"switch switchOnGrad":"switch",h(p(u)),e.setState(!e.value,a),t},p=function(e){return e="circle"===e?"circle switchOn":"circle"};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"slidingSwitchContainer"},n.a.createElement("div",{className:"slidingSwitchLabel"},n.a.createElement("label",{htmlFor:e.name,className:"col-form-label inputLabel"},e.label)),n.a.createElement("div",{className:"slidingSwitch"},n.a.createElement("div",{className:e.value?"switch switchOnGrad":"switch",onClick:function(){e.flgDisabled||l(m(i,e.name))},id:"divSwitch"},n.a.createElement("div",{className:e.value?"circle switchOn":"circle",onClick:function(){e.flgDisabled||l(m(i,e.name))},id:"circle"}))),n.a.createElement("div",{className:"slidingSwitch"})),n.a.createElement("div",{className:"slidingSwitchError"},e.error&&n.a.createElement("div",{className:"alert alert-danger"},e.error)))}),Hs=function(e){var t=e.value?"switch2 switch2OnGrad":"switch2",a=e.value?"circle2 switch2On":"circle2",r=Object(s.useState)(t),o=Object(Pt.a)(r,2),i=o[0],l=o[1],c=Object(s.useState)(a,function(){i="circle2"===u?"circle2 switch2On":"circle2",console.log(u)}),d=Object(Pt.a)(c,2),u=d[0],h=d[1],m=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t="switch2"===t?"switch2 switch2OnGrad":"switch2",h(p(u)),e.setState(!e.value,a),t},p=function(e){return e="circle2"===e?"circle2 switch2On":"circle2"};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"slidingSwitchContainer"},n.a.createElement("div",{className:"slidingSwitchLabel"},n.a.createElement("label",{htmlFor:e.name,className:"col-form-label inputLabel"},e.label)),n.a.createElement("div",{className:"slidingSwitch"},n.a.createElement("div",{className:e.value?"switch2 switch2OnGrad":"switch2",onClick:function(){e.flgDisabled||l(m(i,e.name))},id:"divSwitch"},n.a.createElement("div",{className:e.value?"circle2 switch2On":"circle2",onClick:function(){e.flgDisabled||l(m(i,e.name))},id:"circle2"})))),n.a.createElement("div",{className:"slidingSwitchError"},e.error&&n.a.createElement("div",{className:"alert alert-danger"},e.error)))},Us=(a(84),function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:"",bottomTBVisible:"hidden",topTBVisible:"",flags:{isAdd:!1,isEdit:!1},Privileges:{Superuser:!1,Dashboard:!1,Masters:!1,MastHDD:!1,MastInvD:!1,MastUAdmin:!1,MastSProf:!1,Assets:!1,AssetsClients:!1,AssetsContracts:!1,Financials:!1,FinClientSOA:!1,Maintenance:!1,MaintenanceJP:!1,MaintenanceJC:!1,CustCare:!1,CustCareTkt:!1,Reports:!1}},a.handleOnAdd=function(){a.props.handlers.handleOnAdd(),a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1,a.setState({flags:e})},a.handleOnEdit=function(){a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0,a.setState({flags:e})},a.handleOnSave=function(){var e=Object(i.a)({},a.state.flags),t=a.props.handlers.handleOnSave(e);console.log(t),a.setState({bottomTBVisible:"hidden",topTBVisible:""}),e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a.handleOnCancel=function(){a.props.handlers.handleOnCancel(),a.setState({bottomTBVisible:"hidden",topTBVisible:""});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.userGroup;return console.log("Form: ",t),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.state.topTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnAdd},n.a.createElement(k.a,{icon:"plus"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnEdit},n.a.createElement(k.a,{icon:"edit"})))))),n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"Name",label:"Group Name",type:"text",value:this.props.userGroup.Name,onChange:function(t){return e.props.handlers.handleInputChange(t.currentTarget.value,"Name")},flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Ms,{name:"Superuser",label:"Superuser",value:this.props.userGroup.Privileges.Superuser,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Ms,{name:"Dashboard",label:"Dashboard",value:this.props.userGroup.Privileges.Dashboard,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Ms,{name:"Masters",label:"Masters",value:this.props.userGroup.Privileges.Masters,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Hs,{name:"MastHDD",label:"Customer Care Master",value:this.props.userGroup.Privileges.MastHDD,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Hs,{name:"MastInvD",label:"Inventory Master",value:this.props.userGroup.Privileges.MastInvD,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Hs,{name:"MastUAdmin",label:"Users Administration",value:this.props.userGroup.Privileges.MastUAdmin,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Hs,{name:"MastSProf",label:"Services Definitions",value:this.props.userGroup.Privileges.MastSProf,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Ms,{name:"Assets",label:"Assets",value:this.props.userGroup.Privileges.Assets,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Hs,{name:"AssetsClients",label:"Clients & Assets",value:this.props.userGroup.Privileges.AssetsClients,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Hs,{name:"AssetsContracts",label:"Contract Definition",value:this.props.userGroup.Privileges.AssetsContracts,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Ms,{name:"Financials",label:"Financials",value:this.props.userGroup.Privileges.Financials,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Hs,{name:"FinClientSOA",label:"Clients SOA",value:this.props.userGroup.Privileges.FinClientSOA,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Ms,{name:"Maintenance",label:"Maintenance",value:this.props.userGroup.Privileges.Maintenance,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Hs,{name:"MaintenanceJC",label:"Job Cards",value:this.props.userGroup.Privileges.MaintenanceJC,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Hs,{name:"MaintenanceJP",label:"Job Planner",value:this.props.userGroup.Privileges.MaintenanceJP,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Ms,{name:"CustCare",label:"Customer Care",value:this.props.userGroup.Privileges.CustCare,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Hs,{name:"CustCareTkt",label:"Tickets",value:this.props.userGroup.Privileges.CustCareTkt,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Ms,{name:"Reports",label:"Reports",value:this.props.userGroup.Privileges.Reports,setState:this.props.handlers.handleOnChange,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement("div",{className:this.state.bottomTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"success",onClick:this.handleOnSave},n.a.createElement(k.a,{icon:"save"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"danger",onClick:this.handleOnCancel},n.a.createElement(k.a,{icon:"ban"})))))))}}]),t}(s.Component)),Gs=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:null,bottomTBVisible:"hidden",topTBVisible:"",flags:{isAdd:!1,isEdit:!1},confPassWord:"",confPwError:null},a.handlePasswordConfirm=function(e){var t=e.currentTarget.value;if(a.setState({confPassWord:t}),t!==a.props.user.password){a.setState({confPwError:"Password and Confirmed Password do not match!"})}else{a.setState({confPwError:null})}},a.handleOnAdd=function(){a.props.handlers.handleOnAdd(),a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1,a.setState({flags:e})},a.handleOnEdit=function(){a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0,a.setState({flags:e})},a.handleOnSave=function(){var e=Object(i.a)({},a.state.flags),t=a.props.handlers.handleOnSave(e);console.log(t),a.setState({bottomTBVisible:"hidden",topTBVisible:""}),e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a.handleOnCancel=function(){a.props.handlers.handleOnCancel(),a.setState({bottomTBVisible:"hidden",topTBVisible:""});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user;return console.log("Form: ",t),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.state.topTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnAdd},n.a.createElement(k.a,{icon:"plus"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnEdit},n.a.createElement(k.a,{icon:"edit"})))))),n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"displayName",label:"User Name",type:"text",value:t.displayName,onChange:function(t){return e.props.handlers.handleChange(t.currentTarget.value,"displayName")},flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(Ms,{name:"disabled",label:"Disabled",value:t.disabled,setState:this.props.handlers.handleDisable,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"email",label:"User Email",type:"text",value:t.email,onChange:function(t){return e.props.handlers.handleChange(t.currentTarget.value,"email")},flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"phoneNumber",label:"Phone Number",type:"text",value:t.phoneNumber,onChange:function(t){return e.props.handlers.handleChange(t.currentTarget.value,"phoneNumber")},flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(oe,{name:"UserGroup",label:"User Group",values:this.props.userGroups,onChange:function(t){return e.props.handlers.handleUGChange(t.currentTarget.value,"UserGroup")},flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",defValue:this.props.user.UserGroup,error:this.state.error}),n.a.createElement(ie,{name:"password",label:"Password",type:"password",value:t.password,onChange:function(t){return e.props.handlers.handleChange(t.currentTarget.value,"password")},flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"confPassWord",label:"Confirm Password",type:"password",value:this.state.confPassWord,onChange:this.handlePasswordConfirm,flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.confPwError}),n.a.createElement("div",{className:this.state.bottomTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"success",onClick:this.handleOnSave},n.a.createElement(k.a,{icon:"save"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"danger",onClick:this.handleOnCancel},n.a.createElement(k.a,{icon:"ban"})))))))}}]),t}(s.Component),Js=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={showUGProcess:!0,showUsersProcess:!1,showFormProcess:"hidden",selectedUG:"",selectedUser:"",visibileColumns:{first:0,last:2},visibilityFlags:["",""],propControl:"",propControlTitle:"",users:[],userGroups:[],user:{UID:"",UserGroup:"",disabled:!1,displayName:"",email:"",emailVerified:!1,password:"",photoURL:"",unitsPath:""},oldPw:"",userGroup:{Name:"",Privileges:{Superuser:!1,Dashboard:!1,Masters:!1,MastHDD:!1,MastInvD:!1,MastUAdmin:!1,MastSProf:!1,Assets:!1,AssetsClients:!1,AssetsContracts:!1,Financials:!1,FinClientSOA:!1,Maintenance:!1,MaintenanceJP:!1,MaintenanceJC:!1,CustCare:!1,CustCareTkt:!1,Reports:!1}},uprofile:{}},a.handleGoLeft=function(){var e=Object(i.a)({},a.state.visibileColumns),t=Object(z.a)(a.state.visibilityFlags);if(0!==e.first){for(var s=0;s<a.state.visibilityFlags.length;s++)s>=e.first-1&&s<=e.last-1?t[s]="":t[s]="hidden";--e.first,--e.last,a.setState({visibileColumns:e,visibilityFlags:t})}},a.handleGoRight=function(){var e=Object(i.a)({},a.state.visibileColumns),t=Object(z.a)(a.state.visibilityFlags);if(e.last!==t.length-1){for(var s=0;s<a.state.visibilityFlags.length;++s)s>=e.first+1&&s<=e.last+1?t[s]="":t[s]="hidden";++e.first,++e.last,a.setState({visibileColumns:e,visibilityFlags:t})}},a.userGroupFormHandlers={handleOnChange:function(e,t){var s=Object(i.a)({},a.state.userGroup);s.Privileges[t]=e,a.setState(s)},handleInputChange:function(e,t){console.log(t,e);var s=Object(i.a)({},a.state.userGroup);s.Name=e,a.setState({userGroup:s})},handleOnAdd:function(){a.setState({userGroup:{Name:"",Privileges:{Superuser:!1,Dashboard:!1,Masters:!1,MastHDD:!1,MastInvD:!1,MastUAdmin:!1,MastSProf:!1,Assets:!1,AssetsClients:!1,AssetsContracts:!1,Financials:!1,FinClientSOA:!1,Maintenance:!1,MaintenanceJP:!1,MaintenanceJC:!1,CustCare:!1,CustCareTkt:!1,Reports:!1}}})},handleOnCancel:function(){},handleOnSave:function(e){a.setState({showFormProcess:""});var t=Object(i.a)({},a.state.userGroup);e.isAdd?xs(t).then(function(e){var s=Object(z.a)(a.state.userGroups);return s.push(t),s=s.sort(function(e,t){var a=e.Name.toLowerCase(),s=t.Name.toLowerCase();return a<s?-1:a>s?1:0}),a.setState({userGroups:s,showFormProcess:"hidden"}),T.toast.success("New User Group Saved Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)}):Fs(t).then(function(e){return console.log("Result: ",e),a.setState({showFormProcess:"hidden"}),T.toast.success("Exitsing User Group Updated Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)})}},a.userFormHandlers={handleChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=Object(i.a)({},a.state.user);s[t]=e,a.setState({user:s})},handleUGChange:function(e){var t=Object(i.a)({},a.state.user);t.UserGroup=e,a.setState({user:t})},handleDisable:function(e){var t=Object(i.a)({},a.state.user);t.disabled=e,a.setState({user:t})},handleOnAdd:function(){a.setState({user:{UID:"",UserGroup:"",disabled:!1,displayName:"",email:"",emailVerified:!1,password:"",phoneNumber:"",photoURL:"",unitsPath:""}})},handleOnCancel:function(){},handleOnSave:function(e){a.setState({showFormProcess:""});var t=Object(i.a)({},a.state.user);e.isAdd?Is(t).then(function(e){var s=Object(z.a)(a.state.users);return s.push(t),s=s.sort(function(e,t){var a=e.displayName.toLowerCase(),s=t.displayName.toLowerCase();return a<s?-1:a>s?1:0}),a.setState({users:s,showFormProcess:"hidden"}),T.toast.success("New User Added Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)}):Ls(t,a.state.oldPw).then(function(e){return a.setState({showFormProcess:"hidden"}),T.toast.success("Exitsing User Updated Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)})}},a.handleUGColumnClick=function(){a.setState({propControl:"userGroupForm",propControlTitle:"User Groups",userGroup:{Name:"",Privileges:{Superuser:!1,Dashboard:!1,Masters:!1,MastHDD:!1,MastInvD:!1,MastUAdmin:!1,MastSProf:!1,Assets:!1,AssetsClients:!1,AssetsContracts:!1,Financials:!1,FinClientSOA:!1,Maintenance:!1,MaintenanceJP:!1,MaintenanceJC:!1,CustCare:!1,CustCareTkt:!1,Reports:!1}}})},a.handleOnUGClick=function(e){a.setState({showUsersProcess:!0}),a.setState({users:[],selectedUser:""});var t={},s={},n=[];ks(e).then(function(t){return t.Result.length>0&&(n=Object(z.a)(t.Result)),Ts(e)}).then(function(e){t=Object(i.a)({},e.Result),s=Object(i.a)({},e.Result),a.setState({users:n,selectedUG:t,userGroup:s,showUsersProcess:!1,propControl:"userGroupForm"})}).catch(function(e){console.log("Error: ",e)})},a.handleUserColumnClick=function(){if(""===a.state.selectedUG)T.toast.warn("You did not select a User Group!");else{a.setState({propControl:"userForm",propControlTitle:"Users",user:{UID:"",UserGroup:"",disabled:!1,displayName:"",email:"",emailVerified:!1,password:"",phoneNumber:"",photoURL:"",unitsPath:""}})}},a.handleOnUserClick=function(e){a.setState({showUsersProcess:!0}),a.setState({user:{},oldPw:"",selectedUser:""});var t={},s={};console.log(e),Bs(e).then(function(e){console.log(e),"Ok"===e.Success?s=Object(i.a)({},e.Result):console.log("Not OK: ",e),t=Object(i.a)({},s),a.setState({user:s,selectedUser:t,oldPw:s.password,showUsersProcess:!1,propControl:"userForm"})}).catch(function(e){console.log("Error: ",e)})},a.componentDidMount=function(){Ds().then(function(e){var t=[];e.Result.length>0&&(t=Object(z.a)(e.Result)),a.setState({userGroups:t,showUGProcess:!1})}).catch(function(e){console.log("Error: ",e)})},a.handleOnClientSearch=function(e){var t=Object(z.a)(a.state.fullClientsList).filter(function(t){return-1!==t.clName.toLowerCase().indexOf(e.currentTarget.value.toLowerCase())});a.setState({clientsList:t})},a.handleOnProjectSearch=function(e){var t=Object(z.a)(a.state.fullProjectsList).filter(function(t){return-1!==t.prjName.toLowerCase().indexOf(e.currentTarget.value.toLowerCase())});a.setState({projectsList:t})},a.renderProperties=function(){switch(a.state.propControl){case"userGroupForm":return n.a.createElement(Us,{userGroup:a.state.userGroup,handlers:a.userGroupFormHandlers,showFormProcess:a.state.showFormProcess});case"userForm":return n.a.createElement(Gs,{user:a.state.user,handlers:a.userFormHandlers,showFormProcess:a.state.showFormProcess,userGroups:a.state.userGroups})}};var s=sessionStorage.token,r=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=r,a.state.showClientsProcess=!0,a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"col-md-12"},n.a.createElement(A,{title:"User Administration",bgColor:"white",color:"gray"}),n.a.createElement("div",{className:"col-md-8"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6 "+this.state.visibilityFlags[0],style:qs,onClick:this.handleUGColumnClick},n.a.createElement("div",{className:"col-md-12",style:Xs},"User Groups"),n.a.createElement("div",{className:"col-md-12",style:Zs},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnClientSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"Name",label:"Name",selected:this.state.selectedUG,showList:!0,onClick:this.handleOnUGClick,data:this.state.userGroups,showProcess:this.state.showUGProcess}))),n.a.createElement("div",{className:"col-md-6 "+this.state.visibilityFlags[1],onClick:this.handleUserColumnClick,style:qs},n.a.createElement("div",{className:"col-md-12",style:Xs},"Users"),n.a.createElement("div",{className:"col-md-12",style:Zs},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnProjectSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"displayName",label:"displayName",selected:this.state.selectedUser,showList:!0,onClick:this.handleOnUserClick,data:this.state.users,showProcess:this.state.showUsersProcess})))),n.a.createElement("div",{className:"row",style:{height:"5vh",backgroundColor:"lightblue",borderRadius:"25px"}},n.a.createElement("div",{className:"col-md-1"},n.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:this.handleGoLeft},n.a.createElement(k.a,{icon:"chevron-left"}))),n.a.createElement("div",{className:"col-md-10"}),n.a.createElement("div",{className:"col-md-1",onClick:this.handleGoRight},n.a.createElement("button",{className:"btn btn-sm btn-primary"},n.a.createElement(k.a,{icon:"chevron-right"}))))),n.a.createElement("div",{className:"col-md-4",style:zs},n.a.createElement("div",{className:"col-md-12",style:Qs},this.state.propControlTitle+" Properties"),this.renderProperties()),n.a.createElement(T.ToastContainer,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(s.Component),qs={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"70vh"},zs={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"75vh",backgroundColor:"lightgray",overflow:"auto"},Xs={color:"blue",fontSize:"1vw",fontWeight:"bold",borderBottom:"solid",borderColor:"lightgray",borderWidth:1,paddingTop:"10px",marginBottom:"10px",textAlign:"left"},Zs={fontSize:"0.75vw",borderBottom:"solid",borderColor:"lightgray",borderWidth:1,paddingTop:"5px",paddingBottom:"5px",marginBottom:"10px",textAlign:"left"},Qs={color:"blue",fontSize:"1vw",fontWeight:"bold",borderBottom:"solid",borderColor:"gray",borderWidth:1,paddingTop:"10px",marginBottom:"10px",textAlign:"left"},Ks=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:null,bottomTBVisible:"hidden",topTBVisible:"",flags:{isAdd:!1,isEdit:!1},confPassWord:"",confPwError:null,clients:[],projects:[],contracts:[]},a.handlePasswordConfirm=function(e){var t=e.currentTarget.value;if(a.setState({confPassWord:t}),t!==a.props.user.password){a.setState({confPwError:"Password and Confirmed Password do not match!"})}else{a.setState({confPwError:null})}},a.handleOnAdd=function(){a.props.handlers.handleOnAdd(),a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1,a.setState({flags:e})},a.handleOnEdit=function(){a.setState({bottomTBVisible:"",topTBVisible:"hidden"});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0,a.setState({flags:e})},a.handleOnSave=function(){var e=Object(i.a)({},a.state.flags),t=a.props.handlers.handleOnSave(e);console.log(t),a.setState({bottomTBVisible:"hidden",topTBVisible:""}),e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a.handleOnCancel=function(){a.props.handlers.handleOnCancel(),a.setState({bottomTBVisible:"hidden",topTBVisible:""});var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!1,a.setState({flags:e})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user;return console.log("Form: ",t),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.state.topTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnAdd},n.a.createElement(k.a,{icon:"plus"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"primary",onClick:this.handleOnEdit},n.a.createElement(k.a,{icon:"edit"})))))),n.a.createElement("div",{className:this.props.showFormProcess},n.a.createElement("img",{src:x.a,width:"60vw",alt:"processing",style:{marginTop:"5vh"}})),n.a.createElement(ie,{name:"userEmail",label:"User Email",type:"text",value:t.userEmail,onChange:function(t){return e.props.handlers.handleChange(t.currentTarget.value,"userEmail")},flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(ie,{name:"passWord",label:"Password",type:"text",value:t.passWord,onChange:function(t){return e.props.handlers.handleChange(t.currentTarget.value,"passWord")},flgDisabled:this.state.flags.isAdd||this.state.flags.isEdit?"":"disabled",error:this.state.error}),n.a.createElement(oe,{name:"clientName",label:"Client Name",values:this.props.clients,onChange:function(t){return e.props.handlers.handleClientChange(t.currentTarget.value,"clientName")},flgDisabled:(this.state.flags.isAdd||this.state.flags.isEdit,""),defValue:this.props.user.clientName,error:this.state.error}),n.a.createElement(oe,{name:"projectName",label:"Project Name",values:this.props.projects,onChange:function(t){return e.props.handlers.handleProjectChange(t.currentTarget.value,"projectName")},flgDisabled:(this.state.flags.isAdd||this.state.flags.isEdit,""),defValue:this.props.user.projectName,error:this.state.error}),n.a.createElement(oe,{name:"contractName",label:"Contract Name",values:this.props.contracts,onChange:function(t){return e.props.handlers.handleContractChange(t.currentTarget.value,"contractName")},flgDisabled:(this.state.flags.isAdd||this.state.flags.isEdit,""),defValue:this.props.user.contractName,error:this.state.error}),n.a.createElement("div",{className:this.state.bottomTBVisible},n.a.createElement(jt.a,null,n.a.createElement($.a,{justified:!0},n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"success",onClick:this.handleOnSave},n.a.createElement(k.a,{icon:"save"}))),n.a.createElement($.a,null,n.a.createElement(Z.a,{bsStyle:"danger",onClick:this.handleOnCancel},n.a.createElement(k.a,{icon:"ban"})))))))}}]),t}(s.Component),Ys=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={showUGProcess:!0,showUsersProcess:!1,showFormProcess:"hidden",selectedUser:"",visibileColumns:{first:0,last:2},visibilityFlags:["",""],propControl:"",propControlTitle:"",users:[],user:{clientName:"",commGroup:"",contractName:"",passWord:"",projectName:"",userEmail:""},oldPw:"",uprofile:{},clients:[],projects:[],contracts:[]},a.handleGoLeft=function(){var e=Object(i.a)({},a.state.visibileColumns),t=Object(z.a)(a.state.visibilityFlags);if(0!==e.first){for(var s=0;s<a.state.visibilityFlags.length;s++)s>=e.first-1&&s<=e.last-1?t[s]="":t[s]="hidden";--e.first,--e.last,a.setState({visibileColumns:e,visibilityFlags:t})}},a.handleGoRight=function(){var e=Object(i.a)({},a.state.visibileColumns),t=Object(z.a)(a.state.visibilityFlags);if(e.last!==t.length-1){for(var s=0;s<a.state.visibilityFlags.length;++s)s>=e.first+1&&s<=e.last+1?t[s]="":t[s]="hidden";++e.first,++e.last,a.setState({visibileColumns:e,visibilityFlags:t})}},a.userFormHandlers={handleClientChange:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("Client Handler");var t=[],s=Object(i.a)({},a.state.selectedUser);s.clientName=e,He(e).then(function(e){e.Result.length>0&&(e.Result.map(function(e){t.push({Name:e.name})}),a.setState({projects:t,selectedUser:s}))}).catch(function(e){console.log("Error: ",e.message),a.setState({projects:t,selectedUser:s})}),console.log(t)},handleProjectChange:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=[],s=Object(i.a)({},a.state.selectedUser);s.projectName=e,Ue(e).then(function(e){e.Result.length>0&&(e.Result.map(function(e){t.push({Name:e.name})}),console.log("Contracts: ",t),a.setState({contracts:t,selectedUser:s}))}).catch(function(e){console.log("Error: ",e.message),a.setState({contracts:t,selectedUser:s})})},handleContractChange:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=Object(i.a)({},a.state.selectedUser);t.contractName=e,a.setState({selectedUser:t})},handleChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=Object(i.a)({},a.state.selectedUser);s[t]=e,a.setState({selectedUser:s})},handleUGChange:function(e){var t=Object(i.a)({},a.state.user);t.UserGroup=e,a.setState({user:t})},handleDisable:function(e){var t=Object(i.a)({},a.state.user);t.disabled=e,a.setState({user:t})},handleOnAdd:function(){a.setState({user:{clientName:"",commGroup:"",contractName:"",passWord:"",projectName:"",userEmail:""}})},handleOnCancel:function(){},handleOnSave:function(e){a.setState({showFormProcess:""});var t=Object(i.a)({},a.state.selectedUser);e.isAdd&&Ws(t).then(function(e){var s=Object(z.a)(a.state.users);return s.push(t),s=s.sort(function(e,t){var a=e.userEmail.toLowerCase(),s=t.userEmail.toLowerCase();return a<s?-1:a>s?1:0}),a.setState({users:s,showFormProcess:"hidden"}),T.toast.success("New User Added Successfully...",{position:T.toast.POSITION.TOP_RIGHT,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),e}).catch(function(e){console.log(e)})}},a.handleUserColumnClick=function(){a.setState({propControl:"userForm",propControlTitle:"Users",user:{clientName:"",commGroup:"",contractName:!1,passWord:"",projectName:"",userEmail:!1}})},a.handleOnUserClick=function(e){a.setState({showUsersProcess:!0}),a.setState({user:{},oldPw:"",selectedUser:""});var t,s=[],n=[];console.log(e);var r=a.state.users.findIndex(function(t){return t.userEmail===e});t=Object(i.a)({},a.state.users[r]),He(t.clientName).then(function(e){return e.Result.length>0?(e.Result.map(function(e){s.push({Name:e.name})}),console.log(s),a.setState({projects:s}),Ue(t.projectName)):""}).then(function(e){e.Result.length>0&&(e.Result.map(function(e){n.push({Name:e.name})}),console.log(n),a.setState({contracts:n}))}),a.setState({selectedUser:t,showUsersProcess:!1})},a.componentDidMount=function(){a.setState({showUsersProcess:!0}),Vs().then(function(e){var t=[];e.Result.length>0&&(t=Object(z.a)(e.Result)),a.setState({users:t,showUsersProcess:!1})}).catch(function(e){console.log("Error: ",e)}),Me().then(function(e){var t=Object(z.a)(a.state.clients);e.Result.length>0&&e.Result.map(function(e){t.push({Name:e})}),a.setState({clients:t})}).catch(function(e){console.log("Error: ",e)})},a.handleOnClientSearch=function(e){var t=Object(z.a)(a.state.fullClientsList).filter(function(t){return-1!==t.clName.toLowerCase().indexOf(e.currentTarget.value.toLowerCase())});a.setState({clientsList:t})},a.handleOnProjectSearch=function(e){var t=Object(z.a)(a.state.fullProjectsList).filter(function(t){return-1!==t.prjName.toLowerCase().indexOf(e.currentTarget.value.toLowerCase())});a.setState({projectsList:t})},a.renderProperties=function(){switch(a.state.propControl){case"userForm":return n.a.createElement(Ks,{user:a.state.user,handlers:a.userFormHandlers,showFormProcess:a.state.showFormProcess})}};var s=sessionStorage.token,r=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=r,a.state.showClientsProcess=!0,a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"col-md-12"},n.a.createElement(A,{title:"Client User Administration",bgColor:"white",color:"gray"}),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12 ",onClick:this.handleUserColumnClick,style:_s},n.a.createElement("div",{className:"col-md-12",style:en},"Users"),n.a.createElement("div",{className:"col-md-12",style:tn},n.a.createElement("input",{type:"text",style:{width:"100%"},className:"form-control",onChange:this.handleOnProjectSearch})),n.a.createElement("div",{style:{width:"100%",height:"52vh",overflow:"auto"}},n.a.createElement(Se,{name:"userEmail",label:"userEmail",selected:this.state.selectedUser,showList:!0,onClick:this.handleOnUserClick,data:this.state.users,showProcess:this.state.showUsersProcess})))),n.a.createElement("div",{className:"row",style:{height:"5vh",backgroundColor:"lightblue",borderRadius:"25px"}},n.a.createElement("div",{className:"col-md-1"},n.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:this.handleGoLeft},n.a.createElement(k.a,{icon:"chevron-left"}))),n.a.createElement("div",{className:"col-md-10"}),n.a.createElement("div",{className:"col-md-1",onClick:this.handleGoRight},n.a.createElement("button",{className:"btn btn-sm btn-primary"},n.a.createElement(k.a,{icon:"chevron-right"}))))),n.a.createElement("div",{className:"col-md-6",style:$s},n.a.createElement("div",{className:"col-md-12",style:an},this.state.propControlTitle+" Properties"),n.a.createElement(Ks,{user:this.state.selectedUser,handlers:this.userFormHandlers,clients:this.state.clients,projects:this.state.projects,contracts:this.state.contracts,showFormProcess:this.state.showFormProcess})),n.a.createElement(T.ToastContainer,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(s.Component),_s={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"70vh"},$s={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"75vh",backgroundColor:"lightgray",overflow:"auto"},en={color:"blue",fontSize:"1vw",fontWeight:"bold",borderBottom:"solid",borderColor:"lightgray",borderWidth:1,paddingTop:"10px",marginBottom:"10px",textAlign:"left"},tn={fontSize:"0.75vw",borderBottom:"solid",borderColor:"lightgray",borderWidth:1,paddingTop:"5px",paddingBottom:"5px",marginBottom:"10px",textAlign:"left"},an={color:"blue",fontSize:"1vw",fontWeight:"bold",borderBottom:"solid",borderColor:"gray",borderWidth:1,paddingTop:"10px",marginBottom:"10px",textAlign:"left"};String.prototype.formatDate=function(e,t){var a=this.split("-").length>1?this.split("-"):this.split("/"),s=this.split("-").length>1?1:2,n=e.split(t),r=1===s?a[2].split(" ")[0]:a[1],o=1===s?a[1]:a[0],i=1===s?a[0]:a[2].split(" ")[0],l="";switch(n[0]){case"dd":l=r+t;break;case"MM":case"mm":l=o+t;break;case"yyyy":l=i+t}switch(n[1]){case"dd":l+=r+t;break;case"MM":case"mm":l+=o+t;break;case"yyyy":l+=i+t}switch(n[2]){case"dd":l+=r;break;case"MM":case"mm":l+=o;break;case"yyyy":l+=i}return l};var sn=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.attachments,a=e.onAttachClick;return n.a.createElement(n.a.Fragment,null,n.a.createElement("table",{className:"table table-striped table-hover",style:{fontSize:"0.75vw"}},n.a.createElement("thead",null,n.a.createElement("tr",{className:"info"},n.a.createElement("th",{style:{width:"10%"}},"Att. Text"),n.a.createElement("th",{style:{width:"10%"}},"Att. Date"))),n.a.createElement("tbody",null,t?t.map(function(e,t){return n.a.createElement("tr",{key:t,onClick:function(){return a(t)}},n.a.createElement("td",{style:{textAlign:"center"}},e.TitleText),n.a.createElement("td",{style:{textAlign:"center"}},e.UploadDate))}):null)))}}]),t}(s.Component),nn=(s.Component,function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={errors:{},clients:[]},a.componentDidMount=function(){a.setState({formProcess:!0}),ca().then(function(e){var t=[];t.push({Name:"All"}),e.Result.map(function(e){t.push({Name:e})}),a.setState({clients:t}),a.setState({formProcess:!1})})},a.checkTitleText=function(e){return""===e||void 0===e?n.a.createElement("div",{className:"row col-md-2",style:{textAlign:"center",verticalAlign:"middle",lineHeight:"90px",fontWeight:"bold",fontSize:"1.25em",color:"red"}},"\u2717"):a.props.attachments.find(function(t){return t.TitleText===e})?n.a.createElement("div",{className:"row col-md-2",style:{textAlign:"center",verticalAlign:"middle",lineHeight:"90px",fontWeight:"bold",fontSize:"1.25em",color:"red"}},"\u2717"):n.a.createElement("div",{className:"row col-md-2",style:{textAlign:"center",verticalAlign:"middle",lineHeight:"90px",fontWeight:"bold",fontSize:"1.25em",color:"green"}},"\u2713")},a.checkFilename=function(e){return""===e||void 0===e?n.a.createElement("div",{className:"row col-md-2",style:{textAlign:"center",verticalAlign:"middle",lineHeight:"90px",fontWeight:"bold",fontSize:"1.25em",color:"red"}},"\u2717"):a.props.attachments.find(function(t){return t.FileName===e})?n.a.createElement("div",{className:"row col-md-2",style:{textAlign:"center",verticalAlign:"middle",lineHeight:"90px",fontWeight:"bold",fontSize:"1.25em",color:"red"}},"\u2717"):n.a.createElement("div",{className:"row col-md-2",style:{textAlign:"center",verticalAlign:"middle",lineHeight:"90px",fontWeight:"bold",fontSize:"1.25em",color:"green"}},"\u2713")},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.attachment,t=e.TitleText,a=e.FileName,s=e.FileSize,r=e.DownloadURL,o=e.UploadDate,i=e.client,l=this.props,c=l.flags,d=l.onTitleChange,u=this.state,h=u.clients,m=u.errors;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12",style:{padding:"0"}},n.a.createElement("div",{className:"row",style:{padding:"10px"}},n.a.createElement("div",{className:"col-md-12"},n.a.createElement(oe,{name:"clientName",label:"Clients",values:h,onChange:this.props.onClientSelect,flgDisabled:!1,defValue:i,error:m.ClientName?m.ClientName:""}))),n.a.createElement("div",{className:"row",style:{padding:"10px"}},n.a.createElement("div",{className:"col-md-10"},n.a.createElement(ie,{name:"TitleText",label:"Title Text",value:t,onChange:d,flgDisabled:!c.isAdd&&!c.isEdit})),this.checkTitleText(t)),n.a.createElement("div",{className:"row",style:{padding:"10px"}},n.a.createElement("div",{className:"col-md-10"},n.a.createElement(ie,{name:"FileSelect",type:"file",label:"Select File",onChange:this.props.onFileSelect,flgDisabled:!c.isAdd&&!c.isEdit})),this.checkFilename(a)),n.a.createElement("div",{className:"row",style:{padding:"10px"}},n.a.createElement("div",{className:"col-md-12"},n.a.createElement(ie,{type:"text",name:"UploadDate",label:"Upload Date",value:o,flgDisabled:!0}))),n.a.createElement("div",{className:"row",style:{padding:"10px"}},n.a.createElement("div",{className:"col-md-12"},n.a.createElement(ie,{name:"FileName",label:"File Name",value:a,flgDisabled:!0}))),n.a.createElement("div",{className:"row",style:{padding:"10px"}},n.a.createElement("div",{className:"col-md-12"},n.a.createElement(ie,{name:"FileSize",label:"File Size",value:s,flgDisabled:!0}))),n.a.createElement("div",{className:"row",style:{padding:"10px"}},n.a.createElement("div",{className:"col-md-12"},n.a.createElement(ie,{name:"DownloadURL",label:"Download URL",value:r,flgDisabled:!0}))))))}}]),t}(s.Component)),rn=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={uprofile:{},attachment:{client:"",TitleText:"",FileName:"",FileSize:"",UploadDate:(new Date).toString(),DownloadURL:""},attachments:[],buttonsOptions:{addButton:{showAdd:!0,onAdd:function(){return a.handleAdd()}},saveButton:{showSave:!1,onSave:function(){return a.handleSubmit()}},cancelButton:{showCancel:!1,onCancel:function(){return a.handleCancel()}},searchButton:{showSearch:!1,onSearch:null},deleteButton:{showDelete:!1,onDelete:function(){return a.handleDelete()}}},flags:{isAdd:!1,isReply:!1,isEdit:!1},showButtons:!0,file:null},a.handleDelete=function(){var e=Object(i.a)({},a.state.attachment);ts(e).then(function(t){var s=Object(z.a)(a.state.attachments);s.splice(s.findIndex(function(t){return e.FileName===t.FileName}),1),e={TitleText:"",FileName:"",FileSize:"",UploadDate:(new Date).toString(),DownloadURL:""},a.setState({attachment:e,attachments:s})}).catch(function(e){console.log("Error: ",e.message),alert("Error occured while deleting the attachment.\nPlease, inform the system administrator!")})},a.handleAdd=function(){var e=Object(i.a)({},a.state.flags);e.isAdd=!0,e.isEdit=!1,e.isReply=!1;var t=Object(i.a)({},a.state.buttonsOptions);t.addButton.showAdd=!1,t.saveButton.showSave=!0,t.cancelButton.showCancel=!0,t.deleteButton.showDelete=!1,a.setState({attachment:{FileName:"",FileSize:"",DownloadURL:"",UploadDate:"",TitleText:""},flags:e,buttonsOptions:t})},a.validateFields=function(){return""==a.state.attachment.client||void 0==a.state.attachment.client?(alert("Client name can't be empty!"),!1):""===a.state.attachment.TitleText||void 0===a.state.attachment.TitleText?(alert("Title Text can't be empty!"),!1):""!=a.state.attachment.FileName&&void 0!=a.state.attachment.FileName||(alert("Please, select a file to upload!"),!1)},a.handleSubmit=function(){if(a.validateFields()){a.setState({showButtons:!1});var e=Object(i.a)({},a.state.flags),t=Object(i.a)({},a.state.attachment);e.isAdd&&_a(t,a.state.file).then(function(s){t=Object(i.a)({},s.Result);var n=Object(z.a)(a.state.attachments);n.push(t),e.isAdd=!1,e.isReply=!1,e.isEdit=!1;var r=Object(i.a)({},a.state.buttonsOptions);r.addButton.showAdd=!0,r.saveButton.showSave=!1,r.cancelButton.showCancel=!1,a.setState({attachment:t,attachments:n,flags:e,buttonsOptions:r,showButtons:!0})}).catch(function(s){console.log(s),t={TitleText:"",FileName:"",FileSize:"",UploadDate:(new Date).toString(),DownloadURL:""},e.isAdd=!1,e.isReply=!1,e.isEdit=!1;var n=Object(i.a)({},a.state.buttonsOptions);n.addButton.showAdd=!0,n.saveButton.showSave=!1,n.cancelButton.showCancel=!1,a.setState({attachment:t,flags:e,buttonsOptions:n,showButtons:!0})})}},a.handleCancel=function(){var e=Object(i.a)({},a.state.flags);e.isAdd=!1,e.isEdit=!0,e.isReply=!1;var t=Object(i.a)({},a.state.buttonsOptions);t.addButton.showAdd=!0,t.saveButton.showSave=!1,t.cancelButton.showCancel=!1,t.deleteButton.showDelete=!1,a.setState({attachment:{FileName:"",FileSize:"",DownloadURL:"",UploadDate:"",TitleText:""},flags:e,buttonsOptions:t})},a.handleOnFileSelect=function(e){var t=e.currentTarget.value,s=Object(i.a)({},a.state.attachment),n=e.currentTarget.files[0];s.FileName=t.name,s.FileName=n.name,s.FileSize=n.size,a.setState({attachment:s,file:n})},a.handleOnClientSelect=function(e){var t=e.currentTarget.value,s=Object(i.a)({},a.state.attachment);s.client=t,s={client:t,TitleText:"",FileName:"",FileSize:"",UploadDate:(new Date).toString(),DownloadURL:""};var n=[];""==t?Ka().then(function(e){n=e.Result,a.setState({attachments:n}),a.hideProcess()}).catch(function(e){console.log(e),a.hideProcess()}):Ya(t).then(function(e){n=e.Result,a.setState({attachments:n}),a.hideProcess()}).catch(function(e){console.log(e),a.hideProcess()}),a.setState({attachment:s,attachments:n})},a.handleOnTitleChange=function(e){var t=e.currentTarget.value,s=Object(i.a)({},a.state.attachment);s.TitleText=t,a.setState({attachment:s})},a.handleAttachmentRowClick=function(e){var t=(new Date).toString(),s=Object(z.a)(a.state.attachments),n=Object(i.a)({},a.state.buttonsOptions);t=Object(i.a)({},s[e]),n.deleteButton.showDelete=!0,a.setState({attachment:t})},a.componentDidMount=function(){a.showProcess();var e=[];Ka().then(function(t){e=t.Result,a.setState({attachments:e}),a.hideProcess()}).catch(function(e){console.log(e),a.hideProcess()})},a.handleOnChange=function(e){var t=e.currentTarget,s=t.name,n=t.value,r=Object(i.a)({},a.state.ticket);r[s]=n,a.setState({ticket:r})},a.showProcess=function(){a.setState({showButtons:!1})},a.hideProcess=function(){a.setState({showButtons:!0})};var s=sessionStorage.token,n=JSON.parse(sessionStorage.getItem("uprofile"));return s&&a.props.menuVisible?(a.state.uprofile=n,a):(e.history.push("/"),Object(d.a)(a))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{title:"Client Protal - Upload Attachments",bgColor:"white",color:"gray"}),n.a.createElement("div",{className:"row",style:{paddingLeft:"25px",paddingRight:"25px"}},n.a.createElement("div",{className:"col-md-5",style:on},n.a.createElement(sn,{attachments:this.state.attachments,onAttachClick:this.handleAttachmentRowClick})),n.a.createElement("div",{className:"col-md-4",style:on},n.a.createElement("div",{className:"row"+(this.state.showButtons?"":" hidden"),style:{paddingLeft:"15px",paddingRight:"15px",marginBottom:"15px"}},n.a.createElement(se,{buttonsOptions:this.state.buttonsOptions})),n.a.createElement("div",{className:"row"+(this.state.showButtons?" hidden":""),style:{paddingLeft:"15px",paddingRight:"15px",marginBottom:"15px"}},n.a.createElement("img",{src:x.a,width:"40vw",alt:"processing",style:{marginTop:"2vh"}})),n.a.createElement("div",{className:"row",style:{padding:"0",overflow:"auto",height:"58vh"}},n.a.createElement("div",{className:"col-md-12"},n.a.createElement(nn,{attachment:this.state.attachment,flags:this.state.flags,onFileSelect:this.handleOnFileSelect,onTitleChange:this.handleOnTitleChange,onClientSelect:this.handleOnClientSelect,onChange:null,attachments:this.state.attachments})))),n.a.createElement("div",{className:"col-md-3",style:on},""!=this.state.attachment.TitleText&&void 0!==this.state.attachment.TitleText?n.a.createElement("div",null,n.a.createElement("div",null,this.state.attachment.TitleText),n.a.createElement("div",null,n.a.createElement("a",{href:this.state.attachment.DownloadURL,target:"_blank"},"Open"))):null)))}}]),t}(s.Component),on={border:"solid",borderWidth:"1px",borderColor:"lightgray",borderRadius:"25px",height:"68vh",overflow:"auto"};Number.prototype.pad=function(e,t){for(var a=String(this);a.length<(e||2);)a=t+a;return a},String.prototype.formatDate=function(e,t){var a=this.split("-").length>1?this.split("-"):this.split("/"),s=this.split("-").length>1?1:2,n=e.split(t),r=1===s?a[2].split(" ")[0]:a[1],o=1===s?a[1]:a[0],i=1===s?a[0]:a[2].split(" ")[0],l="";switch(n[0]){case"dd":l=r+t;break;case"MM":case"mm":l=o+t;break;case"yyyy":l=i+t}switch(n[1]){case"dd":l+=r+t;break;case"MM":case"mm":l+=o+t;break;case"yyyy":l+=i+t}switch(n[2]){case"dd":l+=r;break;case"MM":case"mm":l+=o;break;case"yyyy":l+=i}return l};var ln=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={subDir:"/fms"},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.authFunc,t=e.handleSignin,a=e.handleSignout,s=e.handleTokenUpdate,r=e.handleSuccessfulSignin,o=this.props.menuVisible,i=this.state.subDir;return n.a.createElement(N.a,null,n.a.createElement(P.a,{exact:!0,path:"/",render:function(e){return n.a.createElement(Pa,Object.assign({onSignin:t,onSuccessfulSignin:r,updateToken:s,onSignOut:a},e))}}),n.a.createElement(P.a,{exact:!0,path:"/fms/",render:function(e){return n.a.createElement(Pa,Object.assign({onSignin:t,onSuccessfulSignin:r,updateToken:s,onSignOut:a},e))}}),n.a.createElement(P.a,{path:i+"/mastusersadmin",render:function(e){return n.a.createElement(Js,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/mastclientusersadmin",render:function(e){return n.a.createElement(Ys,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/dashboard",render:function(e){return n.a.createElement(U,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/mastcustcare",render:function(e){return n.a.createElement(xe,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/mastinvdepend",render:function(e){return n.a.createElement(Pe,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/projservdef",render:function(e){return n.a.createElement(Ut,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/fincsoa",render:function(e){return n.a.createElement(ze,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/finjentry",render:function(e){return n.a.createElement(Ye,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/invclientsassets",render:function(e){return n.a.createElement(Tt,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/contmetread",render:function(e){return n.a.createElement(ys,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/projcontdef",render:function(e){return n.a.createElement(pa,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/mainjobcards",render:function(e){return n.a.createElement(_t,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/mainjobplanner",render:function(e){return n.a.createElement(Ca,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/mainpoolreadings",render:function(e){return n.a.createElement(ra,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/ccaretickets",render:function(e){return n.a.createElement(ss,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/crmuploadattach",render:function(e){return n.a.createElement(rn,Object.assign({menuVisible:o},e))}}),n.a.createElement(P.a,{path:i+"/reports",render:function(e){return n.a.createElement(hs,Object.assign({menuVisible:o},e))}}))}}]),t}(s.Component),cn=a(55),dn=a(30);cn.b.add(dn.h,dn.k,dn.j,dn.o,dn.l,dn.c,dn.m,dn.d,dn.g,dn.n,dn.i,dn.e,dn.f,dn.a,dn.b);var un=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={credentials:{useremail:"",password:""},uProfile:{},token:"",showMenuBar:!1},a.handleShowMenuBar=function(){a.setState({showMenuBar:!0})},a.authFunctions={handleSignout:function(){a.setState({uProfile:{},token:"",showMenuBar:!1}),sessionStorage.clear()},handleSignin:function(e){console.log(e);var t=Object(i.a)({},a.state.credentials);t.uemail=e.uemail,t.upass=e.upass,a.setState({credentials:t,ue:e.uemail,up:e.upass})},handleSuccessfulSignin:function(e){var t=Object(i.a)({},a.state.uProfile);t=e,a.setState({uProfile:t,showMenuBar:!0})},handleTokenUpdate:function(e){a.setState({token:e})}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(R,{title:"Facility Management System Ver. 2.0",bgColor:"white",color:"blue"}),n.a.createElement(w,{menuBarVisible:this.state.showMenuBar}),n.a.createElement(ln,{authFunc:this.authFunctions,menuVisible:this.state.showMenuBar}))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var hn=a(252);o.a.render(n.a.createElement(hn.a,null,n.a.createElement(un,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},47:function(e,t,a){},84:function(e,t,a){}},[[127,2,1]]]);
//# sourceMappingURL=main.a94cee7e.chunk.js.map